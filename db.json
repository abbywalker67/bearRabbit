{"meta":{"version":1,"warehouse":"5.0.0"},"models":{"Asset":[{"_id":"node_modules/hexo-theme-butterfly/source/css/index.styl","path":"css/index.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/css/var.styl","path":"css/var.styl","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/img/404.jpg","path":"img/404.jpg","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/img/favicon.png","path":"img/favicon.png","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/img/friend_404.gif","path":"img/friend_404.gif","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/main.js","path":"js/main.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/tw_cn.js","path":"js/tw_cn.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/utils.js","path":"js/utils.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/algolia.js","path":"js/search/algolia.js","modified":1,"renderable":1},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/local-search.js","path":"js/search/local-search.js","modified":1,"renderable":1}],"Cache":[{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/last_html.png.crdownload","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1658915970000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/last_pdf.png.crdownload","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1658915981000},{"_id":"source/_posts/2021-02-03-量化投资5.md","hash":"c568176a0c19684069db60d216d52a683e80e9ce","modified":1612665683000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建.md","hash":"2715f5929031b2ae4d6c7b4e5c86e33b2befe080","modified":1612690926000},{"_id":"source/_posts/2021-02-17-preparation.md","hash":"b32ac2ce3b7d23a59b5ff8ca8c7598ef6debe17c","modified":1613568692000},{"_id":"source/_posts/2022-07-07-工程清单（持续更新）.md","hash":"e52787efd3900c3177ebf50d0ca642b9bca63cf1","modified":1755128540736},{"_id":"source/_posts/2021-03-04-个人进化论01.md","hash":"0a91cdf0d234835dbd358513f5ec612b7f3d97ab","modified":1614913346000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）.md","hash":"92a6e2496c002c80899382a806c226479eb8b076","modified":1755128540736},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）.md.bak","hash":"13c5eb68f54d1185c5761ec75173881148b7e6b4","modified":1755128540736},{"_id":"source/_posts/2023-03-08-额尔古纳河右岸读后感.md","hash":"b79f252d012a579590f21d40db241ac97b43a112","modified":1755181460444},{"_id":"source/_posts/2021-02-01-量化投资4.md","hash":"51da8ac9372ea8fe60153ba7b98a46044000fcd3","modified":1755128540669},{"_id":"source/_posts/2023-12-20-win11中安装copilot.md","hash":"d8dc064be1bfbcc0d42ea8df7e5a9883de007370","modified":1755181460446},{"_id":"source/categories/index.md","hash":"a087c332ef87ddf8661a2717182bb47af5fc3c17","modified":1612665683000},{"_id":"source/_posts/2023-12-02-数据要素相关政策.md","hash":"be49261908aacafb6c4311d00b705ba796cda1c3","modified":1755181460446},{"_id":"source/tags/index.md","hash":"28bfe7ba928d6991ec25d7d408cd08b27cafea36","modified":1612665683000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/git_ssh.png","hash":"84aee6f8ead70d9f45845a01c960b1b62e8ff9fb","modified":1612684361000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_new.png","hash":"366e48a6e4af743b2c3e518ea13a70e6c4c2eca3","modified":1612681162000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_pub_page.png","hash":"2c26ababd4df19a331331c625dd7dda114571dbd","modified":1612683229000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_setting.png","hash":"645d3c2b35234f71fa2a8f6c695cf21ceb0d27b7","modified":1612683065000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/ssh_suc.png","hash":"16bad37a61647396080cd2129b377ca4965c6244","modified":1612685322000},{"_id":"source/_posts/2021-02-07-kxq/ssh_suc.png","hash":"16bad37a61647396080cd2129b377ca4965c6244","modified":1613568692000},{"_id":"source/_posts/2023-03-08-额尔古纳河右岸读后感/主人公原型.jpg","hash":"eba919a356184ce725e7fa126646bf0ec9b7dffd","modified":1678241126000},{"_id":"source/_posts/2023-03-08-额尔古纳河右岸读后感/电影剧照.jpg","hash":"74cfc59824c9a5709da662e14b95a8693da86199","modified":1678241196000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_raw_2.png","hash":"aac56b26c517af1baca0e4b1ecea865f1fb47259","modified":1658914270000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_raw_3.png","hash":"f3794e8ef8cf7aed2d020facd0e664941d25b6ab","modified":1658914284000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_setup_1.png","hash":"e74437fa757d823f12d551b29dc34ae05376ca24","modified":1658913726000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_raw_4.png","hash":"2fa766c905912c16c14acb58dca9b289ebcd3230","modified":1658914301000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_setup_2.png","hash":"8b200aded8b39a5528db890611fcb248787d1ff6","modified":1658913739000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/without_img.png","hash":"05acbc40069aa2a737cbb9bd22ad7a15d4193862","modified":1658915077000},{"_id":"source/_posts/2021-02-01-量化投资4/sl_real_url_req.png","hash":"2f4130dc7f5c527316f727aec2ff2cb8a5870912","modified":1612665683000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_new_config.png","hash":"39b1d740a001bd1383ba8d31221b6bfdb08693d8","modified":1612681307000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_new_pub.png","hash":"4a1c0837303ce10f4def6a1d4aaead457e060660","modified":1612682853000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_ssh_new.png","hash":"ac07ef80703c81532bd9a149305cb14cf275309d","modified":1612684967000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_ssh_newdetail.png","hash":"b26217df8cf6b860d24f759c873a4ef6c772e2a3","modified":1612685153000},{"_id":"source/_posts/2021-02-03-量化投资5/ts_stock_basics.png","hash":"af9b03418693277c296be3691891a8beabe2dcd6","modified":1612665683000},{"_id":"source/_posts/2023-12-02-数据要素相关政策/国家数据局.jpg","hash":"60425aabf310a88a6a5303455e49aed9b2f1a979","modified":1701492942513},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/analyse_pkg_3.png","hash":"e8cb8a79f2d16b5b016644afad67163bfd65b9d1","modified":1658913921000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_info_2.png","hash":"e71ea2789ddd3c797e6864f112a9e115d518a6da","modified":1658914187000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_filters.png","hash":"261dd8e8f08d9408bf371ed014aa57e200a2d17e","modified":1658914058000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_info_1.png","hash":"bf22a3dbe07f82e29cd7680dd4a6121865b0b78f","modified":1658914171000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_raw_1.png","hash":"f1bdddc04d1fc1f68b08f65ddc23dfa0022394c6","modified":1658914251000},{"_id":"source/_posts/2021-02-01-量化投资4/get_sl_real_url.png","hash":"cd1968f998806a96c9c8fc3a1eb78906510b7198","modified":1612665683000},{"_id":"source/_posts/2021-02-01-量化投资4/sl_real_url_rsp.png","hash":"76e47825349fa450eac4519b4e7c8c4e99d3de7c","modified":1612665683000},{"_id":"source/_posts/2021-02-01-量化投资4/stock_list_csv.png","hash":"eda65db62a8f2afa215062c3ba68d53647e093d7","modified":1612665683000},{"_id":"source/_posts/2021-02-01-量化投资4/stock_info_csv.png","hash":"cd93d37c6f8fe73b297117bdade0c1b764bd5934","modified":1612665683000},{"_id":"source/_posts/2021-02-01-量化投资4/stock_list_web.png","hash":"cd99d49723a0c25e921794a2624a335ac7f66563","modified":1612665683000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_ssh.png","hash":"75d75c870cdb4778980b9a1daecaeb9a77358e4a","modified":1612684880000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/analyse_pkg_2.png","hash":"beeaca2090da8ebdc740c045b15fe0b92ab06c12","modified":1658913910000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/with_img.png","hash":"41fcc61d1cd6369849d7d48563c5778175c106bb","modified":1658915091000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/raw_info.png","hash":"ce978d8f38968fde0c6b710fc35b38a49295fb05","modified":1658914902000},{"_id":"source/_posts/2021-02-01-量化投资4/stock_info_web.png","hash":"b53eb2bc734db426578479edb6a95101fc7a32a9","modified":1612665683000},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/analyse_pkg_1.png","hash":"4d29d059baaa9cc6e756852c48c22b2e7ece7e6d","modified":1658913899000},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/hexo-hello.png","hash":"3469910d09b190b41bdd22d14ea56b251acd3843","modified":1612680123000},{"_id":"themes/butterfly/LICENSE","hash":"c8bc7df08db9dd3b39c2c2259a163a36cf2f6808","modified":1612169781000},{"_id":"themes/butterfly/README_CN.md","hash":"9d729ee2ffc5e5f703ccfbfbbb7b286d59071125","modified":1701495874683},{"_id":"themes/butterfly/README.md","hash":"20a91bea7f7ada8b8195d2abff106a7ce21bba20","modified":1701495874683},{"_id":"themes/butterfly/_config.yml.bak","hash":"cc53dd348fe65f82908e5533bad21352891787a5","modified":1612249963000},{"_id":"themes/butterfly/_config.yml","hash":"e3a55783dbe0c54e6ddbddd3b7b7e26363ed2b96","modified":1701495874684},{"_id":"themes/butterfly/plugins.yml","hash":"9b21d2395b435b0df05db1b3faf8b853d92cf027","modified":1701495874730},{"_id":"themes/butterfly/package.json","hash":"1e3099099a5459a30a14421c84f9ab834f54aa51","modified":1701495874730},{"_id":"themes/butterfly/languages/default.yml","hash":"90e9e2f36dc51aa77eb7804ae048b4876035b12d","modified":1701495874685},{"_id":"themes/butterfly/languages/en.yml","hash":"68127be0e6b44cfc5f31353d8b275c02939b3ff9","modified":1701495874685},{"_id":"themes/butterfly/languages/zh-CN.yml","hash":"2dcc70a011b37890215ae0fd6d8f8c78aa8af6b0","modified":1701495874686},{"_id":"themes/butterfly/layout/category.pug","hash":"bf979aec88d78b644fc5d31518f8679ad7625792","modified":1701495874688},{"_id":"themes/butterfly/layout/archive.pug","hash":"bc77220dfc269b8faad0930e1a4142ebf68165e5","modified":1701495874687},{"_id":"themes/butterfly/layout/page.pug","hash":"bf2d6c6d2d156777b55292e51be02b0b3acf0af8","modified":1701495874729},{"_id":"themes/butterfly/layout/index.pug","hash":"648dcbdb3d145a710de81c909e000e8664d2ac9c","modified":1612169781000},{"_id":"themes/butterfly/layout/post.pug","hash":"fdbb508b5e6dec30fb8753c5a7fdd494410c4fc0","modified":1701495874730},{"_id":"themes/butterfly/layout/tag.pug","hash":"4bb5efc6dabdf1626685bf6771aaa1467155ae86","modified":1612169781000},{"_id":"themes/butterfly/languages/zh-TW.yml","hash":"1392e7b8c678cdfb54f55523693e66abc7d80538","modified":1701495874687},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/bug_report.yml","hash":"eed9190301095b35081aa2658204cc3f15b9f5e1","modified":1701495874682},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/config.yml","hash":"63ad2249ad09fb3fe21bd5ff9adefb304a7ab24a","modified":1701495874682},{"_id":"themes/butterfly/.github/ISSUE_TEMPLATE/feature_request.yml","hash":"6e0f9470b18bd37d4891282ac73d61676b040e8c","modified":1701495874682},{"_id":"themes/butterfly/layout/includes/404.pug","hash":"aace9ddff469de4226e47a52ede1c81e66d66d5c","modified":1701495874688},{"_id":"themes/butterfly/.github/workflows/stale.yml","hash":"4040c76547e270aaf184e9b219a44ca41bbb1b9f","modified":1701495874682},{"_id":"themes/butterfly/.github/workflows/publish.yml","hash":"e320b40c051bae1549156cd5ea4a51383cf78598","modified":1612169781000},{"_id":"themes/butterfly/layout/includes/additional-js.pug","hash":"50eea5aa78cdeb6c72dd22f0aeabc407cc0f712e","modified":1701495874689},{"_id":"themes/butterfly/layout/includes/footer.pug","hash":"8715948b93e7508b84d913be1969b28c6b067b9b","modified":1612169781000},{"_id":"themes/butterfly/layout/includes/layout.pug","hash":"96df62e34661d8ca4a45267286127479e5178a79","modified":1701495874694},{"_id":"themes/butterfly/layout/includes/head.pug","hash":"ea8d4e8ac6af93cd268ba8f6ffcb80417bc2501e","modified":1701495874689},{"_id":"themes/butterfly/layout/includes/pagination.pug","hash":"c5c58714fb3cb839653e5c32e6094784c8662935","modified":1701495874698},{"_id":"themes/butterfly/layout/includes/rightside.pug","hash":"f448bf73103b88de4443e52d600e871cf3de3e32","modified":1701495874700},{"_id":"themes/butterfly/layout/includes/sidebar.pug","hash":"9277fead4c29dbe93976f078adaa26e8f9253da3","modified":1701495874700},{"_id":"themes/butterfly/scripts/events/404.js","hash":"f1d1c378356b776e9b2a8411e6dca88dc8c3245c","modified":1701495874731},{"_id":"themes/butterfly/scripts/events/cdn.js","hash":"7864ba45716c51aef8d8b04fd4bc212e0008ce3b","modified":1701495874731},{"_id":"themes/butterfly/scripts/events/init.js","hash":"ce68e84a9ccfcf91100befbaa9afc392a0cd93bb","modified":1701495874732},{"_id":"themes/butterfly/scripts/events/merge_config.js","hash":"ef9cd54eedf9d8de458f7d9e9203cd547f3f44d2","modified":1701495874732},{"_id":"themes/butterfly/scripts/events/welcome.js","hash":"f59e10305fef59ea3e62a7395106c0927582879d","modified":1701495874733},{"_id":"themes/butterfly/scripts/events/stylus.js","hash":"0a336dfe5ed08952fa0df1532421df38a74a20d6","modified":1701495874733},{"_id":"themes/butterfly/scripts/filters/random_cover.js","hash":"0df22d7dbfa766a65cb6032a1f003348f4307cfe","modified":1701495874734},{"_id":"themes/butterfly/scripts/events/comment.js","hash":"95479790234c291b064d031577d71214cdd1d820","modified":1701495874732},{"_id":"themes/butterfly/scripts/filters/post_lazyload.js","hash":"5ed2d7ef240c927fe1b7a7fb5bf9e55e2bfd55a5","modified":1701495874734},{"_id":"themes/butterfly/scripts/tag/button.js","hash":"164d5f1c2d1b4cb5a813a6fc574016743a53c019","modified":1701495874736},{"_id":"themes/butterfly/scripts/tag/flink.js","hash":"3ba7677969ff01fab06fc6713455ddc6861f0024","modified":1701495874737},{"_id":"themes/butterfly/scripts/tag/gallery.js","hash":"7ec77b3093f5de67e7032f40a5b12f1389f6f6ff","modified":1701495874737},{"_id":"themes/butterfly/scripts/tag/hide.js","hash":"5d08c3552f7d3c80a724ca628bff66321abe2e5a","modified":1701495874738},{"_id":"themes/butterfly/scripts/tag/inlineImg.js","hash":"c863d2732ce4bdc084f2d0db92f50f80328c1007","modified":1701495874738},{"_id":"themes/butterfly/scripts/tag/label.js","hash":"b013dc0a3d57d2caa18b89263f23871da9ec456d","modified":1701495874738},{"_id":"themes/butterfly/scripts/tag/mermaid.js","hash":"289f85847c58f0b2b7d98a68e370a2896edb8949","modified":1701495874739},{"_id":"themes/butterfly/scripts/tag/note.js","hash":"e68d8d21f3a86e3646907a3685550ee20e8d4a9f","modified":1701495874739},{"_id":"themes/butterfly/scripts/tag/score.js","hash":"35d54adc92e717cc32e13515122b025fd1a98ea2","modified":1701495874740},{"_id":"themes/butterfly/scripts/tag/series.js","hash":"dc56e5182dd3813dc977c9bf8556dcc7615e467b","modified":1701495874740},{"_id":"themes/butterfly/scripts/tag/tabs.js","hash":"7c448886f230adb4f4a0208c88fff809abcb5637","modified":1701495874740},{"_id":"themes/butterfly/scripts/tag/timeline.js","hash":"e611074a5a7f489a8b04afac0a3f7f882ce26532","modified":1701495874740},{"_id":"themes/butterfly/scripts/helpers/aside_categories.js","hash":"cdd992c8577d583c237b6aac9f5077d8200879b2","modified":1701495874734},{"_id":"themes/butterfly/scripts/helpers/aside_archives.js","hash":"4f712b4ea383b59a3122683db1d54c04a79ccc5d","modified":1612169781000},{"_id":"themes/butterfly/scripts/helpers/findArchiveLength.js","hash":"b12895e0765d596494e5526d121de0dd5a7c23d3","modified":1701495874735},{"_id":"themes/butterfly/scripts/helpers/inject_head_js.js","hash":"b55f71347d2ead097c7f98c0ec792b091433345c","modified":1701495874735},{"_id":"themes/butterfly/scripts/helpers/page.js","hash":"c74d6a9b8f71e69447f7847a5f5e81555d68b140","modified":1701495874736},{"_id":"themes/butterfly/scripts/helpers/related_post.js","hash":"76343ac8422c9c8539082e77eda6ffee4b877eb2","modified":1701495874736},{"_id":"themes/butterfly/scripts/helpers/series.js","hash":"17c0095bc8d612a268cdcab000b1742dc4c6f811","modified":1701495874736},{"_id":"themes/butterfly/source/css/index.styl","hash":"b13d96924a5534bff91d75566b196ac87b4fac22","modified":1701495874758},{"_id":"themes/butterfly/source/css/var.styl","hash":"950250f66faeb611a67540e0fa6cedbcf5a7a321","modified":1701495874758},{"_id":"themes/butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1612169782000},{"_id":"themes/butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1612169782000},{"_id":"themes/butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1612169782000},{"_id":"themes/butterfly/source/js/main.js","hash":"59cd756a94ecdf3ec7b18f50691a8a6305f7a65a","modified":1701495874759},{"_id":"themes/butterfly/source/js/tw_cn.js","hash":"d776c670e4076ad6049dbb64cdee7a734b51d37f","modified":1701495874760},{"_id":"themes/butterfly/source/js/utils.js","hash":"7b871fe0c4456660cff4c7b9cc4ed089adac2caf","modified":1701495874761},{"_id":"themes/butterfly/layout/includes/head/Open_Graph.pug","hash":"c8dbdfe6145a0bc6f7691c9551be8169a2698f0a","modified":1701495874690},{"_id":"themes/butterfly/layout/includes/head/analytics.pug","hash":"c7666a10448edd93f5ace37296051b7670495f1b","modified":1701495874690},{"_id":"themes/butterfly/layout/includes/head/config_site.pug","hash":"bd5dd5452e28a4fe94c3241a758ec6f4fdb7a149","modified":1701495874691},{"_id":"themes/butterfly/layout/includes/head/config.pug","hash":"39e1ca0a54eb5fd3688a78737417a1aaa50914c9","modified":1701495874691},{"_id":"themes/butterfly/layout/includes/head/pwa.pug","hash":"6dc2c9b85df9ab4f5b554305339fd80a90a6cf43","modified":1612169781000},{"_id":"themes/butterfly/layout/includes/head/google_adsense.pug","hash":"f29123e603cbbcc6ce277d4e8f600ba67498077c","modified":1612169781000},{"_id":"themes/butterfly/layout/includes/head/preconnect.pug","hash":"a7c929b90ae52b78b39b1728e3ab0e3db1cb7b9a","modified":1701495874691},{"_id":"themes/butterfly/layout/includes/head/site_verification.pug","hash":"5168caadc4cf541f5d6676a9c5e8ae47a948f9ad","modified":1701495874692},{"_id":"themes/butterfly/layout/includes/header/index.pug","hash":"1bef867c799ba158c5417272fb137539951aa120","modified":1701495874692},{"_id":"themes/butterfly/layout/includes/header/menu_item.pug","hash":"ca8bcd90ad9467819330bfe7c02b76322754bccf","modified":1701495874693},{"_id":"themes/butterfly/layout/includes/header/post-info.pug","hash":"e7b25a322ae861dca06d458d3f914220e92758cf","modified":1701495874694},{"_id":"themes/butterfly/layout/includes/header/social.pug","hash":"7a641b5dd45b970e1dafd1433eb32ea149e55cf2","modified":1701495874694},{"_id":"themes/butterfly/layout/includes/header/nav.pug","hash":"962ee70a35e60a13c31eea47d16b9f98069fe417","modified":1701495874693},{"_id":"themes/butterfly/layout/includes/loading/fullpage-loading.pug","hash":"766baca6ddce49d1724a02312387b292ff2d0bdc","modified":1701495874695},{"_id":"themes/butterfly/layout/includes/loading/index.pug","hash":"00ae419f527d8225a2dc03d4f977cec737248423","modified":1701495874695},{"_id":"themes/butterfly/layout/includes/loading/pace.pug","hash":"a6fde4835d6460ce7baf792fd5e1977fad73db25","modified":1701495874695},{"_id":"themes/butterfly/layout/includes/mixins/article-sort.pug","hash":"9155f01d4c644a2e19b2b13b2d3c6d5e34dd0abf","modified":1701495874696},{"_id":"themes/butterfly/layout/includes/mixins/post-ui.pug","hash":"194a5f310dccecee3ae0b648e4e5318f6fbbddcd","modified":1701495874696},{"_id":"themes/butterfly/layout/includes/page/default-page.pug","hash":"e9459f122af7b733398578f9f0f8ab3c5e12a217","modified":1701495874697},{"_id":"themes/butterfly/layout/includes/page/flink.pug","hash":"e37681bc9c169d4220f26ecda2b3d5c02b6b9a0f","modified":1701495874697},{"_id":"themes/butterfly/layout/includes/page/tags.pug","hash":"12be059c536490af216a397e8f2a7abbf6d4610e","modified":1701495874698},{"_id":"themes/butterfly/layout/includes/post/post-copyright.pug","hash":"0abad416b1974a17e5be7817931d5fe799180170","modified":1701495874699},{"_id":"themes/butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1701495874697},{"_id":"themes/butterfly/layout/includes/post/reward.pug","hash":"912df10a053db3135968e92b6fd1a707ee94c968","modified":1701495874699},{"_id":"themes/butterfly/layout/includes/third-party/aplayer.pug","hash":"e939344fd389aeb11864ee697d5fd9b036d8325f","modified":1701495874702},{"_id":"themes/butterfly/layout/includes/third-party/effect.pug","hash":"43014bfc63583d3ee8808d526dd165848c0ed52f","modified":1701495874715},{"_id":"themes/butterfly/layout/includes/third-party/pangu.pug","hash":"f0898509da70388b5c532f19e762756d74080200","modified":1701495874720},{"_id":"themes/butterfly/layout/includes/third-party/pjax.pug","hash":"9b734d99963f3e7f562597dcf60485ccbf6e961c","modified":1701495874721},{"_id":"themes/butterfly/layout/includes/third-party/prismjs.pug","hash":"08979afbfecb4476a5ae8e360947b92624d285b8","modified":1701495874721},{"_id":"themes/butterfly/layout/includes/third-party/subtitle.pug","hash":"dfb5e16a7e7106bb20b2ac2d0df1251d0fc79609","modified":1701495874724},{"_id":"themes/butterfly/layout/includes/widget/card_ad.pug","hash":"a8312b527493dabbadbb1280760168d3bc909a3b","modified":1612169781000},{"_id":"themes/butterfly/layout/includes/widget/card_announcement.pug","hash":"21e019bdc3b1e796bb00976bb29af2d51f873624","modified":1701495874725},{"_id":"themes/butterfly/layout/includes/widget/card_archives.pug","hash":"73d33b6930e7944187a4b3403daf25d27077a2dd","modified":1612169781000},{"_id":"themes/butterfly/layout/includes/widget/card_author.pug","hash":"ab037bf5794638bd30da4cf7cf106e5d03b5f696","modified":1701495874725},{"_id":"themes/butterfly/layout/includes/widget/card_bottom_self.pug","hash":"1dba77d250eeebfb6e293d504352c7e9ea31980b","modified":1701495874725},{"_id":"themes/butterfly/layout/includes/widget/card_newest_comment.pug","hash":"8e22f53886a57a68286970d8af8b4c950fd4a1d7","modified":1701495874726},{"_id":"themes/butterfly/layout/includes/widget/card_categories.pug","hash":"66e383b4ef374951eb87dd1bf4cdb7a667193fb5","modified":1612169781000},{"_id":"themes/butterfly/layout/includes/widget/card_post_series.pug","hash":"2084b8065e63dd045bdca3dc5992014133601e28","modified":1701495874726},{"_id":"themes/butterfly/layout/includes/widget/card_recent_post.pug","hash":"bb842d2aa6469d65bf06af1372f0a19a9e4ef44c","modified":1701495874727},{"_id":"themes/butterfly/layout/includes/widget/card_post_toc.pug","hash":"59d979702fa21d960443824198614d63aaf69662","modified":1701495874726},{"_id":"themes/butterfly/layout/includes/widget/card_tags.pug","hash":"842b772a387b576550fa127030e1c2e9bf65716d","modified":1701495874727},{"_id":"themes/butterfly/layout/includes/widget/card_top_self.pug","hash":"7b5ae404a1205546b7de4be42291315cf918f2b3","modified":1701495874727},{"_id":"themes/butterfly/layout/includes/widget/card_webinfo.pug","hash":"12185713f9ca08984fc74e3b69d8cd6828d23da8","modified":1701495874728},{"_id":"themes/butterfly/layout/includes/widget/index.pug","hash":"8df529f71e25f1c0a00e533de7944ed3d1ba7bd8","modified":1701495874728},{"_id":"themes/butterfly/source/css/_global/function.styl","hash":"e920dae9ce00177922468db49240f5aca0af4f64","modified":1701495874741},{"_id":"themes/butterfly/source/css/_global/index.styl","hash":"0421da07907b3d98df64239e073b23fbb3f04149","modified":1701495874742},{"_id":"themes/butterfly/source/css/_highlight/highlight.styl","hash":"41054740cfbd1357138785464f6859681ca58493","modified":1701495874742},{"_id":"themes/butterfly/source/css/_highlight/theme.styl","hash":"3c178608406c31d768af355ef1d7326da37cc75f","modified":1701495874744},{"_id":"themes/butterfly/source/css/_mode/darkmode.styl","hash":"dbc855795a881f8c805bf5c9c5c4d5d542a648ec","modified":1701495874750},{"_id":"themes/butterfly/source/css/_mode/readmode.styl","hash":"a22fd15048d21452f0015d0765d295d730203308","modified":1701495874750},{"_id":"themes/butterfly/source/css/_layout/aside.styl","hash":"aae70ddd126b2e40158e45036abecbfa33cbfbba","modified":1701495874745},{"_id":"themes/butterfly/source/css/_layout/chat.styl","hash":"792a04d36de32f230ca3256ad87a90fe8392f333","modified":1701495874745},{"_id":"themes/butterfly/source/css/_layout/comments.styl","hash":"fbfce4d67cacd1df22fb73d89d008693f59d9d91","modified":1701495874745},{"_id":"themes/butterfly/source/css/_layout/footer.styl","hash":"5e27f7842af82ff7498d4b59787ce9ca90fa9e6f","modified":1701495874746},{"_id":"themes/butterfly/source/css/_layout/head.styl","hash":"66a7a0e3c58ac23c81afe9fe18834b9db9c42698","modified":1701495874746},{"_id":"themes/butterfly/source/css/_layout/loading.styl","hash":"f0b01bbf321c2c24fdccaee367dd9fd448031a72","modified":1701495874746},{"_id":"themes/butterfly/source/css/_layout/pagination.styl","hash":"bd099f7d3adef4b7edd24c0a25a07415b156e587","modified":1701495874747},{"_id":"themes/butterfly/source/css/_layout/post.styl","hash":"f2d1a0f9c890dd2313b2996a0ec7130999a24813","modified":1701495874747},{"_id":"themes/butterfly/source/css/_layout/relatedposts.styl","hash":"6dcf19c0933c8828a439f801b0f4b256447dec07","modified":1701495874748},{"_id":"themes/butterfly/source/css/_layout/reward.styl","hash":"c0b11a1a5f52e3a6af4e312a8134c93eda18a7dd","modified":1701495874748},{"_id":"themes/butterfly/source/css/_layout/rightside.styl","hash":"0322237e762db401d7b4aa33168d0b9334a9ec26","modified":1701495874749},{"_id":"themes/butterfly/source/css/_layout/sidebar.styl","hash":"80ee9d0bfe5d38aac1f0cdcea5fc88b71d310041","modified":1701495874749},{"_id":"themes/butterfly/source/css/_layout/third-party.styl","hash":"15ea7564b2e3bf46bc91fb6e49c94d057b37caaf","modified":1701495874750},{"_id":"themes/butterfly/source/css/_page/404.styl","hash":"a7223a8fcc4fa7b81e552c9a2554be7df9de312e","modified":1701495874751},{"_id":"themes/butterfly/source/css/_page/archives.styl","hash":"5dd1ba997741d02894ff846eda939ad8051c0bb2","modified":1701495874751},{"_id":"themes/butterfly/source/css/_page/categories.styl","hash":"68bc8cbea25dbb3cdc170f09f9b43ce130547717","modified":1701495874752},{"_id":"themes/butterfly/source/css/_page/common.styl","hash":"df7a51fcabbadab5aa31770e3202a47c9599bbb7","modified":1701495874752},{"_id":"themes/butterfly/source/css/_page/flink.styl","hash":"ecc2b2e28c179eb9406fc2c6f00e141078249cdd","modified":1701495874753},{"_id":"themes/butterfly/source/css/_page/homepage.styl","hash":"a977cd8161ef4d6ddd5293e81403519076657430","modified":1701495874753},{"_id":"themes/butterfly/source/css/_page/tags.styl","hash":"9e35f91847773b915c74a78b8aa66c7bdb950ad0","modified":1701495874753},{"_id":"themes/butterfly/source/css/_search/algolia.styl","hash":"37db99299af380e9111dce2a78a5049b301b13e0","modified":1701495874754},{"_id":"themes/butterfly/source/css/_search/index.styl","hash":"0b23010154e19f37f0c4af0110f9f834d6d41a13","modified":1701495874754},{"_id":"themes/butterfly/source/css/_search/local-search.styl","hash":"8a53d7ba5ca2f5eb4124b684e7845b648583f658","modified":1701495874755},{"_id":"themes/butterfly/source/css/_tags/button.styl","hash":"62da1de0d5b8453fcecbfacddb16985265638ba5","modified":1701495874755},{"_id":"themes/butterfly/source/css/_tags/gallery.styl","hash":"3e9355b76f87e2ee90f652855282b37ab5ae0b3e","modified":1701495874755},{"_id":"themes/butterfly/source/css/_tags/hexo.styl","hash":"985b183db7b7bfd8f9bdb60494549fb7f850348b","modified":1701495874756},{"_id":"themes/butterfly/source/css/_tags/hide.styl","hash":"b7cf7753479fcf2fe07287ffdb0e568adbba4c18","modified":1701495874756},{"_id":"themes/butterfly/source/css/_tags/inlineImg.styl","hash":"5a873d01fabebcf7ddf7a6b1c2e2e5e2714097f4","modified":1701495874756},{"_id":"themes/butterfly/source/css/_tags/label.styl","hash":"2f83bd145b870d80d4b18b0ac603235229a5694e","modified":1701495874756},{"_id":"themes/butterfly/source/css/_tags/note.styl","hash":"4929382bd60788d34752a66e2fe764ef797a72a0","modified":1701495874757},{"_id":"themes/butterfly/source/css/_tags/tabs.styl","hash":"353b95f9a6c2c1e777d978118cb61f909ccbf89c","modified":1701495874757},{"_id":"themes/butterfly/source/css/_tags/timeline.styl","hash":"07ea7134db7a66c87658116f089fb1a2a6906563","modified":1701495874757},{"_id":"themes/butterfly/source/css/_third-party/normalize.min.css","hash":"8549829fb7d3c21cd9e119884962e8c463a4a267","modified":1612169782000},{"_id":"themes/butterfly/source/js/search/algolia.js","hash":"a7c2fe73cc05ad3525909b86ad0ede1a9f2d3b48","modified":1701495874760},{"_id":"themes/butterfly/source/js/search/local-search.js","hash":"ab3904451ae1d78903424b8b2ef815c8571e1749","modified":1701495874760},{"_id":"themes/butterfly/layout/includes/third-party/abcjs/abcjs.pug","hash":"8f95aca305b56ccd7c8c7367b03d26db816ebd5f","modified":1701495874701},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"d6fff5a7f84c8b09f282f9ddc0020a68a8aac9ea","modified":1701495874702},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/artalk.pug","hash":"19b5cfa1f77781246e02967cefe149f19170e45f","modified":1701495874702},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"4b98145d6584d586cabf033493282afc72ae816a","modified":1701495874703},{"_id":"themes/butterfly/layout/includes/third-party/abcjs/index.pug","hash":"58f37823f6cd9a194fb50f7ca7c2233e49939034","modified":1701495874701},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/remark42.pug","hash":"716dc463fe4ef5112e7018ed60804125fdfa5cad","modified":1701495874704},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"7e233f872aea6fd6beccdc9efd86b1bf9ec9f12d","modified":1701495874704},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"846cabae287ae31b3bbfac3da022475713dd5ecc","modified":1701495874703},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"fd2320ee25507bb8ef49f932c2d170586b44ea4d","modified":1701495874705},{"_id":"themes/butterfly/layout/includes/third-party/chat/chatra.pug","hash":"08a85e52fc800d3562df869e5e2613313e76fce6","modified":1701495874705},{"_id":"themes/butterfly/layout/includes/third-party/chat/crisp.pug","hash":"09d2ab2570b67e6f09244a898ccab5567cb82ace","modified":1701495874706},{"_id":"themes/butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"0d960849d5b05d27ec87627b983ca35f2411b9e8","modified":1701495874706},{"_id":"themes/butterfly/layout/includes/third-party/chat/index.pug","hash":"1157118db9f5d7c0c5a0fc7c346f6e934ca00d52","modified":1701495874706},{"_id":"themes/butterfly/layout/includes/third-party/chat/messenger.pug","hash":"799da8f3015e6fe440681b21644bcb3810a5518c","modified":1701495874707},{"_id":"themes/butterfly/layout/includes/third-party/chat/tidio.pug","hash":"6d40b521eec4136f6742c548a4445ed593470b1b","modified":1701495874707},{"_id":"themes/butterfly/layout/includes/third-party/comments/artalk.pug","hash":"eb8f2919ea9d52f6c829ffa8052ba2585d0b6b98","modified":1701495874707},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqus.pug","hash":"364d1fd655baca9132038ef1e312abde2c0bc7de","modified":1701495874708},{"_id":"themes/butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"f78c9c20c86d58c7cf099f6f8d6097103d7d43e5","modified":1701495874709},{"_id":"themes/butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"11f5dca1432e59f22955aaf4ac3e9de6b286d887","modified":1701495874709},{"_id":"themes/butterfly/layout/includes/third-party/comments/giscus.pug","hash":"1eab7ca1cb16c6786f9c3ca0efef8cc15e444ab4","modified":1701495874710},{"_id":"themes/butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"1c86c8fc1a28514a02a1f6a25ca9ec05eb3955b7","modified":1701495874710},{"_id":"themes/butterfly/layout/includes/third-party/comments/index.pug","hash":"db6713d2b90eb8183f86ac92c26761a8501c0ddb","modified":1701495874710},{"_id":"themes/butterfly/layout/includes/third-party/comments/livere.pug","hash":"09c2ef4bc6d005f96dfa48b1d9af1ec095c5266d","modified":1701495874711},{"_id":"themes/butterfly/layout/includes/third-party/comments/remark42.pug","hash":"7f450664e6323a076ae59c393b0f22167cfa82e5","modified":1701495874713},{"_id":"themes/butterfly/layout/includes/third-party/comments/js.pug","hash":"3abbaaa4ea575c45b3cebffd40bad1acc6ffce84","modified":1701495874711},{"_id":"themes/butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"0b44f6de0f5632b55298d506833f45dae46a6346","modified":1701495874714},{"_id":"themes/butterfly/layout/includes/third-party/comments/utterances.pug","hash":"b65a42167df5fb07e2a63f312a58c321d3112a90","modified":1701495874714},{"_id":"themes/butterfly/layout/includes/third-party/comments/valine.pug","hash":"4ed7c74087e81c6fcaf4fca7dced58b4e19f4cb1","modified":1701495874714},{"_id":"themes/butterfly/layout/includes/third-party/math/index.pug","hash":"2afa4c21dd19890f47fb568cfb0d90efb676a253","modified":1701495874715},{"_id":"themes/butterfly/layout/includes/third-party/comments/waline.pug","hash":"7e56b48ab49bd03606d781aaa06f1f1132639ff2","modified":1701495874715},{"_id":"themes/butterfly/layout/includes/third-party/math/katex.pug","hash":"f0d3eddd2bed68e5517274b3530bfe0fa5057d8e","modified":1701495874716},{"_id":"themes/butterfly/layout/includes/third-party/math/mathjax.pug","hash":"bb944185f4bb9f9a9b9d70ee215f66ccd6d4c6cf","modified":1701495874716},{"_id":"themes/butterfly/layout/includes/third-party/math/mermaid.pug","hash":"c682e4d61017fb0dd2e837bfcc242371f1a13364","modified":1701495874717},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/artalk.pug","hash":"6de0c412a4d9b65c576ec79e1949925823c90fa6","modified":1701495874717},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"d8898e427acd91ceb97d6a7ee3acb011ca86b9fc","modified":1701495874718},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"0b2ef6e853720f453c5048015f877bc91f85a6f7","modified":1701495874718},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"f8b65460c399973090c1fb7ab81e3708c252e7cc","modified":1701495874718},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/remark42.pug","hash":"a4e52188b6effeee1df2a01dcbf4105de76a61a8","modified":1701495874718},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"17520a86de12ae585289463c066d3ac91b78a2ff","modified":1701495874719},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"ecfff55b2c7f6d87ce4d5028fdf9f8c0bf155c73","modified":1701495874719},{"_id":"themes/butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"0544d91c0bc9e26e0fe1b5ff490f4a8540ed1ee1","modified":1701495874720},{"_id":"themes/butterfly/layout/includes/third-party/search/algolia.pug","hash":"90338ac4cd114d324fe1caaaeea8be9ca05d6a46","modified":1701495874722},{"_id":"themes/butterfly/layout/includes/third-party/search/docsearch.pug","hash":"52a06a2e039f44383085333cac69f3f4e7d0ad3a","modified":1701495874722},{"_id":"themes/butterfly/layout/includes/third-party/search/local-search.pug","hash":"420a86e73d0d748ac234fd00d06d9e433ca5e3f2","modified":1701495874723},{"_id":"themes/butterfly/layout/includes/third-party/share/addtoany.pug","hash":"1f02a26730e5f36cc2dfec7ff4d5c93a099ed5ba","modified":1701495874723},{"_id":"themes/butterfly/layout/includes/third-party/search/index.pug","hash":"3adcf28a8d205ea3ee19828eda0e668702fac07a","modified":1701495874722},{"_id":"themes/butterfly/layout/includes/third-party/share/index.pug","hash":"c16ee69b5ca8db016db0508d014ae0867c4ce929","modified":1701495874724},{"_id":"themes/butterfly/source/css/_highlight/highlight/diff.styl","hash":"6e77f1ca0cfb0db6b028f5c0238780e66d344f3d","modified":1701495874742},{"_id":"themes/butterfly/layout/includes/third-party/share/share-js.pug","hash":"8106bd031586f075a994956ee4438eb13be25d7b","modified":1701495874724},{"_id":"themes/butterfly/source/css/_highlight/highlight/index.styl","hash":"fc702a4614d0562a381907b083f71ba63d301d86","modified":1701495874743},{"_id":"themes/butterfly/source/css/_highlight/prismjs/diff.styl","hash":"1309292f1c8c53d96cd7333507b106bcc24ca8fc","modified":1612169782000},{"_id":"themes/butterfly/source/css/_highlight/prismjs/index.styl","hash":"01ff9e77eb1bd454bec65a6ff5972c8e219bc708","modified":1701495874743},{"_id":"themes/butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"cd4fc9c5a61608a5dedf645c1295430a1623040f","modified":1701495874704},{"_id":"themes/butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"7c9cc43e1d2577f7151039d58e603c30860fd281","modified":1701495874744},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/butterfly.png","hash":"b41a0d536df9ab507e376b5c70fdaa4f011033c3","modified":1612690216000},{"_id":"source/_posts/2021-03-04-个人进化论01/wo.png","hash":"538d157074263dd8a5069bd1e17cd13a95c8a2a3","modified":1614913346000},{"_id":"public/sitemap.xml","hash":"40161d42833a7a0dc70a80d2bf1c303f64efd2c1","modified":1703171850715},{"_id":"public/sitemap.txt","hash":"84ee9e7ee7a14c7532498373deb3ad6fdac63773","modified":1703085668738},{"_id":"public/atom.xml","hash":"b72e70699293a3f190ec5495e474e04face3bc17","modified":1703171850715},{"_id":"public/categories/index.html","hash":"25e9783c6fa35cb43222a552545107ff7f92fb72","modified":1703171850715},{"_id":"public/tags/index.html","hash":"a0ab8e4a24032433ee0f425bf62b7f02aa876871","modified":1703171850715},{"_id":"public/2023/12/02/数据要素相关政策/index.html","hash":"1cfd67d4bcc87b799c719c55e248f8b41b05c5d9","modified":1703085668738},{"_id":"public/2023/12/20/win11中安装copilot/index.html","hash":"0ae85c7c121b1e5ccae3c0dc2fb33786873b62d1","modified":1703171850715},{"_id":"public/2023/03/08/额尔古纳河右岸读后感/index.html","hash":"428386a5769eadb3b4e554742bfa24fe7984a394","modified":1703085668738},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/index.html","hash":"c7b5149d3490414a38256b807f67d84d90979abb","modified":1703085668738},{"_id":"public/2022/07/07/工程清单（持续更新）/index.html","hash":"a43441b0a1bc85ef6180eec8283139e3530c8ef5","modified":1703085668738},{"_id":"public/2021/02/07/hexo博客基础环境搭建/index.html","hash":"3745db4a4b5921c040d1cc6fefdbe957d2a2aeea","modified":1703085668738},{"_id":"public/2021/02/17/preparation/index.html","hash":"68f28de657a64abc6ecb1e2c89b9c38bc829fdd6","modified":1703085668738},{"_id":"public/2021/03/04/个人进化论01/index.html","hash":"93746a602fb980a12d54d757e0c05802e6b5d294","modified":1703085668738},{"_id":"public/2021/02/03/量化投资5/index.html","hash":"af4d759574d8495f51631595bd5521675d172171","modified":1703085668738},{"_id":"public/2021/02/01/量化投资4/index.html","hash":"36a1086aab13042669d19b99b1db565981989427","modified":1703085668738},{"_id":"public/archives/index.html","hash":"d1f309d2959bdbb69dc6286c7b97036a6c999555","modified":1703171850715},{"_id":"public/archives/2021/03/index.html","hash":"733f07ef2779586644e7ba4b569b8c8e5132eadb","modified":1703171850715},{"_id":"public/archives/2021/index.html","hash":"6edcbafec64e76f238c808037c7d912300f8a4ef","modified":1703171850715},{"_id":"public/archives/2021/02/index.html","hash":"54310fbdb97db3efc63cddc8f95273a81019c4d1","modified":1703171850715},{"_id":"public/archives/2022/index.html","hash":"0ff02a88e3b453e0b265573e768b85d7e43ac8eb","modified":1703171850715},{"_id":"public/archives/2022/07/index.html","hash":"10a52679903b5a2805f04ff9fb5c1788c5fcde13","modified":1703171850715},{"_id":"public/archives/2023/03/index.html","hash":"d46289ce6cf349b9b9fc8411cba57d0dad2c1051","modified":1703171850715},{"_id":"public/archives/2023/index.html","hash":"bd3dcc2780ab056b167e9aa25723149738f06521","modified":1703171850715},{"_id":"public/categories/历史/index.html","hash":"49568be91a0dec5555dbbe51feb6018b507646c9","modified":1703171850715},{"_id":"public/archives/2023/12/index.html","hash":"e213033d271398b660c64419708eb4b71538b110","modified":1703171850715},{"_id":"public/categories/财富/index.html","hash":"eb8e44bb6036e1e82efd80889b7690d59dfe5fe1","modified":1703171850715},{"_id":"public/categories/历史/中国史/index.html","hash":"bb2be6f04a87c16ac4bd387b602b666dbe83dca5","modified":1703171850715},{"_id":"public/categories/财富/量化投资/index.html","hash":"f516d335d0882e97b357d04654ddd1b5a20bf7e8","modified":1703171850715},{"_id":"public/categories/财富/量化投资/技术工具/index.html","hash":"f5b495f5f9b1416e16ada615d0d12e3ae80e3ae0","modified":1703171850715},{"_id":"public/categories/财富/量化投资/技术工具/基础/index.html","hash":"c3cb4f9653634f4a3c60e92e74abce47ca9fb1af","modified":1703171850715},{"_id":"public/categories/基础教程/index.html","hash":"8d8e2029349608dd29b8be8709fd716b9ba63c45","modified":1703171850715},{"_id":"public/categories/基础教程/环境搭建/index.html","hash":"98bafbb59ef9df6cf55a6623b74ad5d64aa59328","modified":1703171850715},{"_id":"public/categories/基础教程/量化投资/index.html","hash":"60ecedd8eb856b390901282fd4ab7effeda25f7d","modified":1703171850715},{"_id":"public/categories/总览/index.html","hash":"ea90f1120f0ebd75f8575fe4f216740083eaedcb","modified":1703171850715},{"_id":"public/categories/文学/index.html","hash":"364c1721259cc43bf4b0d3ef37f170697f67095b","modified":1703171850715},{"_id":"public/categories/个人进化/index.html","hash":"0e77109f920b68d21d6a3fbde88e555c808704c2","modified":1703171850715},{"_id":"public/categories/技术/index.html","hash":"555f14cb4d81e70efab1c48cc4fc879cdc5d8764","modified":1703171850715},{"_id":"public/categories/总览/目录/index.html","hash":"2d4671e8b95e0d2428d9bc0fb46a9106f7f70891","modified":1703171850715},{"_id":"public/categories/个人进化/心理学/index.html","hash":"df7c3bc3c6ffe96856f11580ae482e8c048f6d38","modified":1703171850715},{"_id":"public/categories/文学/书评/index.html","hash":"cd14e0025ec73f5d740c01e4c4138ad8a568054c","modified":1703171850715},{"_id":"public/categories/数据/index.html","hash":"1167f0bec392f6eb6f47860b9a2e6cc3b66a86bb","modified":1703171850715},{"_id":"public/categories/技术/实践/index.html","hash":"3e94f45126032e5ecd4e36c09992e933e563871c","modified":1703171850715},{"_id":"public/categories/技术/实践/python/index.html","hash":"9d53ee63299d579253f8e4072d1c7490b921eda5","modified":1703171850715},{"_id":"public/categories/品读经典/index.html","hash":"3272f6e8f31e12daa4206490023bc20f077f07fa","modified":1703171850715},{"_id":"public/categories/数据/数据要素/index.html","hash":"38a1a61a5f12ceaa372622199afda97e98c7e0d5","modified":1703171850715},{"_id":"public/categories/兴趣研究/index.html","hash":"f458198e03b0c500d15d6bf8c3d2426730cc7ca6","modified":1703171850715},{"_id":"public/categories/专业/index.html","hash":"788761225d9a4fa08cbfe9520e4e273f3bb64e13","modified":1703171850715},{"_id":"public/categories/兴趣研究/技术/index.html","hash":"4896ef45cf44412740c562ccb3252874440e2067","modified":1703171850715},{"_id":"public/categories/兴趣研究/技术/爬虫/index.html","hash":"56a3960ab82a744fc730ff0332a4e1a8aa470b86","modified":1703171850715},{"_id":"public/categories/数据/数据要素/行业洞察/index.html","hash":"dc7a5c261d781542f8ca62b812482a173c6e9d44","modified":1703171850715},{"_id":"public/categories/专业/技术/index.html","hash":"b4b11291884d0d28326e67e8bca2cabdbe16346f","modified":1703171850715},{"_id":"public/index.html","hash":"f5f45d3750c995e54472980e4a15222ecdad931c","modified":1703171850715},{"_id":"public/categories/品读经典/茅盾文学奖/index.html","hash":"734c81f015dc878844bda50f430d3f939ac6846c","modified":1703171850715},{"_id":"public/tags/量化投资/index.html","hash":"5af237c1bed57c887be55d1ba206f334c5933498","modified":1703171850715},{"_id":"public/tags/数据获取/index.html","hash":"4d30faacf103ad64e32c02a78c8bd7e7a2ac89d2","modified":1703171850715},{"_id":"public/tags/资治通鉴/index.html","hash":"a1a3ce2d80d030356019a3ca51baf821dfe6c075","modified":1703171850715},{"_id":"public/tags/python/index.html","hash":"bac14b2007bb2e3cb5617e6fbd0c401d2b8f4368","modified":1703171850715},{"_id":"public/tags/技术/index.html","hash":"5b5ff141a1197ebe6a1cf08de0ce3b6b8248b788","modified":1703171850715},{"_id":"public/tags/mysql/index.html","hash":"d3feba1d510b6fb77c6eddcade61024e4ede4edb","modified":1703171850715},{"_id":"public/tags/github/index.html","hash":"10820aacd02f82cf73fea53ae931bf9fb6133818","modified":1703171850715},{"_id":"public/tags/hexo/index.html","hash":"d1ec9f673fb20d1edaf0a797c849a7f175d04157","modified":1703171850715},{"_id":"public/tags/博客/index.html","hash":"3cb7bf90710bc2866a002a369964e8232d48204f","modified":1703171850715},{"_id":"public/tags/工程清单/index.html","hash":"3cf9350ac0a33940abd420a7dfa7d7a07d0c89a0","modified":1703171850715},{"_id":"public/tags/目录/index.html","hash":"44f4b775edc0727b6bb50bfafc543aa0b8fbbfc9","modified":1703171850715},{"_id":"public/tags/读后感/index.html","hash":"c4b22a0993558102b9d6d5fa9b4ca74ab0308ac9","modified":1703171850715},{"_id":"public/tags/文学/index.html","hash":"75bcc9c1413149826adc27d4720fb22be06f6043","modified":1703171850715},{"_id":"public/tags/矛盾文学奖/index.html","hash":"4ee3e2673a436cea1f637a7f317b28a83ac2b323","modified":1703171850715},{"_id":"public/tags/听陈海贤自我进化课/index.html","hash":"ad617d9a699750c37f1fddaba16c36d9853bdcf4","modified":1703171850715},{"_id":"public/tags/爬虫/index.html","hash":"2b7c5072e07ab0003a287de32dac26a755b06064","modified":1703171850715},{"_id":"public/tags/公众号/index.html","hash":"5b879d611077db9bf0064fbf40a82223270c76f5","modified":1703171850715},{"_id":"public/tags/数据要素/index.html","hash":"b295f8fa1361f69224cb68ce83d6d60d646e6014","modified":1703171850715},{"_id":"public/tags/教程/index.html","hash":"4d3e8cb739d4fabe75739d46d0eead01090fe73e","modified":1703171850715},{"_id":"public/tags/数字经济/index.html","hash":"9205022ab615abba40a3543bb6829104fe8b8d54","modified":1703171850715},{"_id":"public/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1703085094101},{"_id":"public/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1703085094101},{"_id":"public/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/github_new.png","hash":"366e48a6e4af743b2c3e518ea13a70e6c4c2eca3","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/github_pub_page.png","hash":"2c26ababd4df19a331331c625dd7dda114571dbd","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/github_setting.png","hash":"645d3c2b35234f71fa2a8f6c695cf21ceb0d27b7","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/git_ssh.png","hash":"84aee6f8ead70d9f45845a01c960b1b62e8ff9fb","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/ssh_suc.png","hash":"16bad37a61647396080cd2129b377ca4965c6244","modified":1703085094101},{"_id":"public/2023/03/08/额尔古纳河右岸读后感/主人公原型.jpg","hash":"eba919a356184ce725e7fa126646bf0ec9b7dffd","modified":1703085094101},{"_id":"public/2023/03/08/额尔古纳河右岸读后感/电影剧照.jpg","hash":"74cfc59824c9a5709da662e14b95a8693da86199","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/last_html.png.crdownload","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/last_pdf.png.crdownload","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/github_new_pub.png","hash":"4a1c0837303ce10f4def6a1d4aaead457e060660","modified":1703085094101},{"_id":"public/2021/02/03/量化投资5/ts_stock_basics.png","hash":"af9b03418693277c296be3691891a8beabe2dcd6","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/github_new_config.png","hash":"39b1d740a001bd1383ba8d31221b6bfdb08693d8","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/github_ssh_new.png","hash":"ac07ef80703c81532bd9a149305cb14cf275309d","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/github_ssh_newdetail.png","hash":"b26217df8cf6b860d24f759c873a4ef6c772e2a3","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/fiddle_raw_2.png","hash":"aac56b26c517af1baca0e4b1ecea865f1fb47259","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/fiddle_raw_4.png","hash":"2fa766c905912c16c14acb58dca9b289ebcd3230","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/fiddle_setup_1.png","hash":"e74437fa757d823f12d551b29dc34ae05376ca24","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/fiddle_raw_3.png","hash":"f3794e8ef8cf7aed2d020facd0e664941d25b6ab","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/fiddle_setup_2.png","hash":"8b200aded8b39a5528db890611fcb248787d1ff6","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/without_img.png","hash":"05acbc40069aa2a737cbb9bd22ad7a15d4193862","modified":1703085094101},{"_id":"public/css/index.css","hash":"d27882816e123577074b040e3140106c0d565e1a","modified":1703085094101},{"_id":"public/js/main.js","hash":"0dac585446445e0c419b86eec5580bc9b0657dc6","modified":1703085094101},{"_id":"public/js/search/algolia.js","hash":"108988d046da9a4716148df43b3975217c8ceaae","modified":1703085094101},{"_id":"public/css/var.css","hash":"da39a3ee5e6b4b0d3255bfef95601890afd80709","modified":1703085094101},{"_id":"public/js/search/local-search.js","hash":"e1f60ebac53a3f596fd0a4769b4f9275c48c6542","modified":1703085094101},{"_id":"public/js/tw_cn.js","hash":"f8d2e3f31468991a7f5171cbfdb157dfb86d3372","modified":1703085094101},{"_id":"public/js/utils.js","hash":"8e6b48d294e7aeaba8ff6348c43b2271cf865547","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/fiddle_filters.png","hash":"261dd8e8f08d9408bf371ed014aa57e200a2d17e","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/analyse_pkg_3.png","hash":"e8cb8a79f2d16b5b016644afad67163bfd65b9d1","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/fiddle_info_1.png","hash":"bf22a3dbe07f82e29cd7680dd4a6121865b0b78f","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/fiddle_raw_1.png","hash":"f1bdddc04d1fc1f68b08f65ddc23dfa0022394c6","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/fiddle_info_2.png","hash":"e71ea2789ddd3c797e6864f112a9e115d518a6da","modified":1703085094101},{"_id":"public/2021/02/01/量化投资4/sl_real_url_req.png","hash":"2f4130dc7f5c527316f727aec2ff2cb8a5870912","modified":1703085094101},{"_id":"public/2023/12/02/数据要素相关政策/国家数据局.jpg","hash":"60425aabf310a88a6a5303455e49aed9b2f1a979","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/github_ssh.png","hash":"75d75c870cdb4778980b9a1daecaeb9a77358e4a","modified":1703085094101},{"_id":"public/2021/02/01/量化投资4/get_sl_real_url.png","hash":"cd1968f998806a96c9c8fc3a1eb78906510b7198","modified":1703085094101},{"_id":"public/2021/02/01/量化投资4/stock_list_csv.png","hash":"eda65db62a8f2afa215062c3ba68d53647e093d7","modified":1703085094101},{"_id":"public/2021/02/01/量化投资4/sl_real_url_rsp.png","hash":"76e47825349fa450eac4519b4e7c8c4e99d3de7c","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/analyse_pkg_2.png","hash":"beeaca2090da8ebdc740c045b15fe0b92ab06c12","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/with_img.png","hash":"41fcc61d1cd6369849d7d48563c5778175c106bb","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/raw_info.png","hash":"ce978d8f38968fde0c6b710fc35b38a49295fb05","modified":1703085094101},{"_id":"public/2021/02/01/量化投资4/stock_info_csv.png","hash":"cd93d37c6f8fe73b297117bdade0c1b764bd5934","modified":1703085094101},{"_id":"public/2021/02/01/量化投资4/stock_list_web.png","hash":"cd99d49723a0c25e921794a2624a335ac7f66563","modified":1703085094101},{"_id":"public/2022/07/27/python批量下载公众号历史文章（一）/analyse_pkg_1.png","hash":"4d29d059baaa9cc6e756852c48c22b2e7ece7e6d","modified":1703085094101},{"_id":"public/2021/02/01/量化投资4/stock_info_web.png","hash":"b53eb2bc734db426578479edb6a95101fc7a32a9","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/hexo-hello.png","hash":"3469910d09b190b41bdd22d14ea56b251acd3843","modified":1703085094101},{"_id":"public/2021/02/07/hexo博客基础环境搭建/butterfly.png","hash":"b41a0d536df9ab507e376b5c70fdaa4f011033c3","modified":1703085094101},{"_id":"public/2021/03/04/个人进化论01/wo.png","hash":"538d157074263dd8a5069bd1e17cd13a95c8a2a3","modified":1703085094101},{"_id":"public/categories/专业/技术/教程/index.html","hash":"52820bcf0cf255427dbd90597cb984e087479c16","modified":1703171850715},{"_id":"source/_posts/2023-12-20-win11中安装copilot/win11安装程序.png","hash":"c60cf82317051f5a42fdac7d8b87d6113f60cd6e","modified":1703082619125},{"_id":"source/_posts/2023-12-20-win11中安装copilot/windows自动更新.png","hash":"c0ef161f5324a83e2ba39106abc660c2f7cae09f","modified":1703082554627},{"_id":"source/_posts/2023-12-20-win11中安装copilot/系统中安装.png","hash":"ec1754f4038be790687ba2b5134d9391b041638e","modified":1702908699776},{"_id":"source/_posts/2023-12-20-win11中安装copilot/选择保留内容.png","hash":"0e771e3d3dead614b954a048e97b9510f04aff15","modified":1702909002612},{"_id":"public/2023/12/20/win11中安装copilot/win11安装程序.png","hash":"c60cf82317051f5a42fdac7d8b87d6113f60cd6e","modified":1703171850715},{"_id":"public/2023/12/20/win11中安装copilot/windows自动更新.png","hash":"c0ef161f5324a83e2ba39106abc660c2f7cae09f","modified":1703171850715},{"_id":"public/2023/12/20/win11中安装copilot/系统中安装.png","hash":"ec1754f4038be790687ba2b5134d9391b041638e","modified":1703171850715},{"_id":"public/2023/12/20/win11中安装copilot/选择保留内容.png","hash":"0e771e3d3dead614b954a048e97b9510f04aff15","modified":1703171850715},{"_id":"node_modules/hexo-theme-butterfly/LICENSE","hash":"1128f8f91104ba9ef98d37eea6523a888dcfa5de","modified":1755187095062},{"_id":"node_modules/hexo-theme-butterfly/package.json","hash":"bcdc09fce64e02ea2972a8ed4b45e145e17d63cc","modified":1755187120943},{"_id":"node_modules/hexo-theme-butterfly/README.md","hash":"4e01b47448d9f3a02afc04eef644e2321253f6f4","modified":1755187121457},{"_id":"node_modules/hexo-theme-butterfly/README_CN.md","hash":"148da187d16033624ceccce8b8561835296f5a5a","modified":1755187121387},{"_id":"node_modules/hexo-theme-butterfly/_config.yml","hash":"421b77b99c85035f34183ff14cbfbc4dff1a3078","modified":1755187128885},{"_id":"node_modules/hexo-theme-butterfly/plugins.yml","hash":"3b3b5fa56c0211a52530a99a69137027245c21b0","modified":1755187128956},{"_id":"node_modules/hexo-theme-butterfly/languages/default.yml","hash":"90a6dc361de67532437d819a55ec64945ca5404b","modified":1755187128921},{"_id":"node_modules/hexo-theme-butterfly/languages/en.yml","hash":"af5603b1a888f167dc80be6d53a19437b5cf6bef","modified":1755187128933},{"_id":"node_modules/hexo-theme-butterfly/languages/zh-CN.yml","hash":"5004faee365139521f161babd66649a8107e4008","modified":1755187129005},{"_id":"node_modules/hexo-theme-butterfly/layout/archive.pug","hash":"bb32c9c476372de747dfa563b83f77d7a917a77d","modified":1755187122408},{"_id":"node_modules/hexo-theme-butterfly/languages/zh-TW.yml","hash":"03629d1d13a7be09d4933aa5dc0dcbe45e79140c","modified":1755187129017},{"_id":"node_modules/hexo-theme-butterfly/layout/category.pug","hash":"710708cfdb436bc875602abf096c919ccdf544db","modified":1755187124102},{"_id":"node_modules/hexo-theme-butterfly/layout/index.pug","hash":"e1c3146834c16e6077406180858add0a8183875a","modified":1755187125320},{"_id":"node_modules/hexo-theme-butterfly/layout/page.pug","hash":"baf469784aef227e4cc840550888554588e87a13","modified":1755187125824},{"_id":"node_modules/hexo-theme-butterfly/.github/ISSUE_TEMPLATE/config.yml","hash":"7b4831ae8f8f8c55dd1b856781210c517c63e6dd","modified":1755187128907},{"_id":"node_modules/hexo-theme-butterfly/layout/tag.pug","hash":"0440f42569df2676273c026a92384fa7729bc4e9","modified":1755187126593},{"_id":"node_modules/hexo-theme-butterfly/.github/ISSUE_TEMPLATE/bug_report.yml","hash":"6e34b565ea013812d5e363b6de5fa1f9078d4e12","modified":1755187128900},{"_id":"node_modules/hexo-theme-butterfly/layout/post.pug","hash":"fc9f45252d78fcd15e4a82bfd144401cba5b169a","modified":1755187126256},{"_id":"node_modules/hexo-theme-butterfly/.github/ISSUE_TEMPLATE/feature_request.yml","hash":"996640605ed1e8e35182f0fd9a60a88783b24b03","modified":1755187128945},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/404.pug","hash":"cb49f737aca272ccfeb62880bd651eccee72a129","modified":1755187121806},{"_id":"node_modules/hexo-theme-butterfly/.github/workflows/stale.yml","hash":"ac62b989b5550c756e1986fcc68f243170705383","modified":1755187128981},{"_id":"node_modules/hexo-theme-butterfly/.github/workflows/publish.yml","hash":"05857c2f265246d8de00e31037f2720709540c09","modified":1755187128971},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/additional-js.pug","hash":"aca0ec7ef69b21d1f242c62fed389468a0f0e1a2","modified":1755187122017},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head.pug","hash":"ecec62305aaa596bb1dfbb46c13d06fb5a9628cf","modified":1755187124959},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/footer.pug","hash":"02390a5b6ae1f57497b22ba2e6be9f13cfb7acac","modified":1755187124783},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/pagination.pug","hash":"4c85de4dea4dca4e5088097a79bd6d7009cbf8ef","modified":1755187125962},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/cdn.js","hash":"21fb5aabe043486d095c4c8cce361ed85ba88a26","modified":1755187114451},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/layout.pug","hash":"7fa9ae4b70b87fc97e992dde5944681f92b59bea","modified":1755187125370},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/sidebar.pug","hash":"9f0e9e039f304439007460fa0a7c8ac18e0ffd37","modified":1755187126530},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/404.js","hash":"83cd7f73225ccad123afbd526ce1834eb1eb6a6d","modified":1755187104348},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/merge_config.js","hash":"351df17e06bb5c5788cd36105ecaa849d43edcce","modified":1755187116940},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/init.js","hash":"428b94c7b9e83f7ea36227dee66bfe3c23aee4a8","modified":1755187115765},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/comment.js","hash":"5351e0bc09e6b5b3f6d30f333a2520626a28ca3a","modified":1755187114921},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/stylus.js","hash":"e196a99733d7f90899bceed5d12488e8234817d5","modified":1755187120412},{"_id":"node_modules/hexo-theme-butterfly/scripts/events/welcome.js","hash":"8ad9911b755cba13dde2cc055c3f857a6b0dd20e","modified":1755187120909},{"_id":"node_modules/hexo-theme-butterfly/scripts/filters/post_lazyload.js","hash":"860f967ecf3c6a6ea785b560a7aae4d0757cd18a","modified":1755187119256},{"_id":"node_modules/hexo-theme-butterfly/scripts/filters/random_cover.js","hash":"a8eef3f37428436554f58a2b6bac7c255fbdf38d","modified":1755187119423},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/findArchiveLength.js","hash":"7caf549810f971c34196fb9deac2d992545bdff9","modified":1755187115108},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/aside_categories.js","hash":"96f861151e3b889ef0ffe78821d489ad2625ee43","modified":1755187113453},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/aside_archives.js","hash":"2ec66513d5322f185d2071acc052978ba9415a8e","modified":1755187113076},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/inject_head_js.js","hash":"d5c7e61257b08a9648404f6f48ce4d471cd5fa55","modified":1755187116020},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/page.js","hash":"e2a8a09bfe47da26eab242a36f516e6c452c799a","modified":1755187118916},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/related_post.js","hash":"4677be4175da6800c0b3b8c1614e593f73df8831","modified":1755187119531},{"_id":"node_modules/hexo-theme-butterfly/scripts/helpers/series.js","hash":"821e973d41f7b3b64cde91e0e836ea49c43e3c06","modified":1755187119777},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/button.js","hash":"93229d44b35b9da92e647b89d6d3087085974a29","modified":1755187114129},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/rightside.pug","hash":"db275f7fbe4438b54cd813b695f4834e10aa234f","modified":1755187126484},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/flink.js","hash":"ab62919fa567b95fbe14889517abda649991b1ee","modified":1755187115321},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/gallery.js","hash":"418684993a3a3a2ac534257a2d9ecbcead6808c1","modified":1755187115470},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/hide.js","hash":"365db87ddfc582bf8c15cb440c48bed95106e4b1","modified":1755187115593},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/inlineImg.js","hash":"512c68a22ae4a58d6a6b24b368a0c00c2ccb4fcb","modified":1755187116196},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/label.js","hash":"19773218877281ccffed921431e87148413a7c20","modified":1755187116276},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/mermaid.js","hash":"5c2a07df5874b5377540884e4da14dd21489378f","modified":1755187118211},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/note.js","hash":"1acefc59ead75ebd8cafee36efc7da4fa426d088","modified":1755187118720},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/score.js","hash":"5cb273e95846874e3a58074074c501df23c5e912","modified":1755187119726},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/series.js","hash":"830b1d592278b9f676df0cf9a91b1eeda2456aec","modified":1755187119929},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/tabs.js","hash":"ffc62222f8d7b4d44c1c0726c8a08824a2201039","modified":1755187120524},{"_id":"node_modules/hexo-theme-butterfly/scripts/tag/timeline.js","hash":"4526c75e5bf84609d67e92b6af3524bcb278e852","modified":1755187120638},{"_id":"node_modules/hexo-theme-butterfly/source/css/index.styl","hash":"755490867fd8afe47d5cce24faea2ca172b0c4dd","modified":1755187128579},{"_id":"node_modules/hexo-theme-butterfly/source/img/favicon.png","hash":"3cf89864b4f6c9b532522a4d260a2e887971c92d","modified":1755187121624},{"_id":"node_modules/hexo-theme-butterfly/source/img/404.jpg","hash":"fb4489bc1d30c93d28f7332158c1c6c1416148de","modified":1755187102519},{"_id":"node_modules/hexo-theme-butterfly/source/css/var.styl","hash":"152b6bd4b6285165541a71f5a1c913f8ee6a602b","modified":1755187128871},{"_id":"node_modules/hexo-theme-butterfly/source/img/friend_404.gif","hash":"8d2d0ebef70a8eb07329f57e645889b0e420fa48","modified":1755187101126},{"_id":"node_modules/hexo-theme-butterfly/source/js/tw_cn.js","hash":"f8d2e3f31468991a7f5171cbfdb157dfb86d3372","modified":1755187120801},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/Open_Graph.pug","hash":"8aa8d799aedbfd811195b84a451bc4b6e2647c12","modified":1755187125714},{"_id":"node_modules/hexo-theme-butterfly/source/js/main.js","hash":"0dac585446445e0c419b86eec5580bc9b0657dc6","modified":1755187116587},{"_id":"node_modules/hexo-theme-butterfly/source/js/utils.js","hash":"8e6b48d294e7aeaba8ff6348c43b2271cf865547","modified":1755187120876},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/analytics.pug","hash":"67e1c3b48e4ca7ee0b2c76d3ca7476b9883cf105","modified":1755187122266},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/config_site.pug","hash":"7df90c8e432e33716517ab918b0a125bc284041b","modified":1755187124256},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/config.pug","hash":"63fed4548367a3663cdbaffa1df48167b0a2397b","modified":1755187124315},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/google_adsense.pug","hash":"95a37e92b39c44bcbea4be7e29ddb3921c5b8220","modified":1755187124934},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/site_verification.pug","hash":"e2e8d681f183f00ce5ee239c42d2e36b3744daad","modified":1755187126554},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/preconnect.pug","hash":"5208fe1e75d97a05fd9bdd6cc53c59d8b741b94b","modified":1755187126305},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/index.pug","hash":"944d6e9dd50df3395f3a2c7ad9db667d50dea4ed","modified":1755187124988},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/menu_item.pug","hash":"31346a210f4f9912c5b29f51d8f659913492f388","modified":1755187125601},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/head/pwa.pug","hash":"3d492cfe645d37c94d30512e0b230b0a09913148","modified":1755187126368},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/post-info.pug","hash":"a5c7d362ae63474c1a4e3eb5cd09804b3684e984","modified":1755187126172},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/nav.pug","hash":"f61659aa457d1a2d1baa3a13157996cfac4d6609","modified":1755187125693},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/header/social.pug","hash":"5de9a82032cdad1db3b868b797460921cd775fc2","modified":1755187126567},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/loading/index.pug","hash":"131f344d68b4c241d6e03849b243ee792fcd3cea","modified":1755187125009},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/loading/fullpage-loading.pug","hash":"9e8c5788602b29a527ef35fe8a20076a5fa969bd","modified":1755187124809},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/loading/pace.pug","hash":"6ab4e301c92586505d6cddce1b3ad23b7c79010d","modified":1755187125732},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/mixins/article-sort.pug","hash":"90554c2ca5ba946f4c02e1bc5fe2859cef1b1594","modified":1755187123590},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/mixins/post-ui.pug","hash":"50d1b08367f709e5416140043933e79cd8d77559","modified":1755187126217},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/categories.pug","hash":"5276a8d2835e05bd535fedc9f593a0ce8c3e8437","modified":1755187124073},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/flink.pug","hash":"f9ce83978b217a71a2eb8761dc14b09866faa3f4","modified":1755187124762},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/default-page.pug","hash":"12c65c174d26a41821df9bad26cdf1087ec5b0ca","modified":1755187124474},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/page/tags.pug","hash":"9621991359e22b14049346f1cf87bdedc94edf5a","modified":1755187126610},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/post/post-copyright.pug","hash":"5574804fdea5edf7fd52aad2caf030614d5e7f2f","modified":1755187126029},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/post/reward.pug","hash":"a096ff8eb6b2a22395be881f827ff2a686ba5596","modified":1755187126472},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/aplayer.pug","hash":"c7cfade2b160380432c47eef4cd62273b6508c58","modified":1755187122359},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/pangu.pug","hash":"0f024e36b8116118233e10118714bde304e01e12","modified":1755187125982},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/effect.pug","hash":"1d39670ee6225f85f5c53bf5c84f3fd6e19290e8","modified":1755187124680},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/prismjs.pug","hash":"ffb9ea15a2b54423cd4cd441e2d061b8233e9b58","modified":1755187126333},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/pjax.pug","hash":"12e57491e94fa00d953bbda9db0b6d6169e2358c","modified":1755187126006},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_ad.pug","hash":"60dc48a7b5d89c2a49123c3fc5893ab9c57dd225","modified":1755187123654},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_announcement.pug","hash":"ae392459ad401a083ca51ee0b27526b3c1e1faed","modified":1755187123686},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_archives.pug","hash":"86897010fe71503e239887fd8f6a4f5851737be9","modified":1755187123717},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/subtitle.pug","hash":"8044b9c18b34b019ffe26b7383e7e80356b5e4b5","modified":1755187126580},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_bottom_self.pug","hash":"13dc8ce922e2e2332fe6ad5856ebb5dbf9ea4444","modified":1755187123774},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_categories.pug","hash":"d1a416d0a8a7916d0b1a41d73adc66f8c811e493","modified":1755187123801},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_author.pug","hash":"03c6afabbf1ac729c7fb21c7ec06da0190b0fdc7","modified":1755187123743},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_newest_comment.pug","hash":"7834bf7c711e739fd33cfcd0b53d151013b3d449","modified":1755187123849},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_post_series.pug","hash":"3ec354778f6a4ac97fb64d5629c83b293ccceb5e","modified":1755187123894},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_post_toc.pug","hash":"3057a2f6f051355e35d3b205121af8735100eacf","modified":1755187123920},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_tags.pug","hash":"eceb4420a64c720f0d2741e89d6229bbb3d87353","modified":1755187123988},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_recent_post.pug","hash":"e5aac7b28ed4123d75797263c64e74ac547945bc","modified":1755187123963},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_webinfo.pug","hash":"35ce167c5a275211bfc1fa3d49adfde5b404d98f","modified":1755187124034},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/index.pug","hash":"66f7a8b0cebc05c575ec3cb70b08d6854029d87a","modified":1755187125305},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/widget/card_top_self.pug","hash":"ae67c6d4130a6c075058a9c1faea1648bcc6f83e","modified":1755187124012},{"_id":"node_modules/hexo-theme-butterfly/source/css/_global/function.styl","hash":"f19694a42dbe28eda4b39a1696e8fbcd277bc76c","modified":1755187127773},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/highlight.styl","hash":"4dcd468e4d11a0ac75406162678feffcd89fee00","modified":1755187128495},{"_id":"node_modules/hexo-theme-butterfly/source/css/_global/index.styl","hash":"c8ff6ddd5bfe1190b7b8056b68ce41114fd79dcb","modified":1755187128512},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/theme.styl","hash":"bcd384c8b2aa0390c9eb69ac1abbfd1240ce1da4","modified":1755187128832},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/aside.styl","hash":"fad650f88778b33a6358e38cf50dfafc0974d28f","modified":1755187127000},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/chat.styl","hash":"f9a5d3f1fc5ed0ed2ee4c1eaa58ed650d11ddebd","modified":1755187127069},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/footer.styl","hash":"83a7a70eb0532ea9c4267939fe484af915fca01e","modified":1755187127741},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/comments.styl","hash":"134811b2d696f9ed2c0cd578f3886f1c60770c0a","modified":1755187127364},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/head.styl","hash":"029eebbdcb3c682780d1de629fa06858cbe9782b","modified":1755187128117},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/loading.styl","hash":"ac2aeee9926f75b2a0098efe1c114126987430f2","modified":1755187128641},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/post.styl","hash":"ef0fd5e3fe04a50e4386bb3f22e2ccd9290c6653","modified":1755187128700},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/pagination.styl","hash":"fb9f78bfbb79579f1d752cb73fb6d25c8418e0fd","modified":1755187128683},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/relatedposts.styl","hash":"d53de408cb27a2e704aba7f7402b7caebe0410d8","modified":1755187128749},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/reward.styl","hash":"d6cf26ffb8a0343eda1cde65b6b73b0ddbe8fcfc","modified":1755187128768},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/rightside.styl","hash":"f845b9b4efdee750f70c023aab27432611f83059","modified":1755187128782},{"_id":"node_modules/hexo-theme-butterfly/source/css/_mode/readmode.styl","hash":"e549d24ad81a7d93326a509ff8dcfcc58c80729e","modified":1755187128716},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/sidebar.styl","hash":"b7a6a585dbc38d177c9aba75df3a467415d0488a","modified":1755187128793},{"_id":"node_modules/hexo-theme-butterfly/source/css/_mode/darkmode.styl","hash":"0db591a1f4ed5adcb8668a549bbee5c9d62682cf","modified":1755187127475},{"_id":"node_modules/hexo-theme-butterfly/source/css/_layout/third-party.styl","hash":"5556c9bf4f53a90cb9b4945cd76a8849bd67f3f3","modified":1755187128841},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/404.styl","hash":"50dbb9e6d98c71ffe16741b8c1b0c1b9771efd2b","modified":1755187126914},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/archives.styl","hash":"c9e98027f2dd730ce389c2047f62ebb748955fcf","modified":1755187126971},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/common.styl","hash":"4e320e16d49bc18085045937681f7331a1e243ca","modified":1755187127397},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/flink.styl","hash":"98d755b686ee833e9da10afaa40c4ec2bd66c19a","modified":1755187127727},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/categories.styl","hash":"f01ee74948cedb44e53cd3bb1ef36b7d2778ede7","modified":1755187127041},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/tags.styl","hash":"580feb7e8b0822a1be48ac380f8c5c53b1523321","modified":1755187128818},{"_id":"node_modules/hexo-theme-butterfly/source/css/_page/homepage.styl","hash":"d4ebc41b5c855dd75f47de7345d62f85ce7cf073","modified":1755187128505},{"_id":"node_modules/hexo-theme-butterfly/source/css/_search/algolia.styl","hash":"649a054e73278b6724bd4dd9b94724791ec5c928","modified":1755187126956},{"_id":"node_modules/hexo-theme-butterfly/source/css/_search/local-search.styl","hash":"961589da3c0a532c4709a4a4ea96bd579257f766","modified":1755187128651},{"_id":"node_modules/hexo-theme-butterfly/source/css/_search/index.styl","hash":"20a3134e1302b62bfc881f4ec43f398267111f22","modified":1755187128552},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/button.styl","hash":"45f0c32bdea117540f6b14ebac6450d7142bd710","modified":1755187127030},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/hexo.styl","hash":"d76c38adf1d9c1279ef4241835667789f5b736e0","modified":1755187128163},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/gallery.styl","hash":"5cddbb5f4eae695a26685e415d821b523e0f17bf","modified":1755187127782},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/hide.styl","hash":"ce489ca2e249e2a3cf71584e20d84bdb022e3475","modified":1755187128446},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/label.styl","hash":"66c59e193d794cdb02cca7bd1dc4aea5a19d7e84","modified":1755187128620},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/inlineImg.styl","hash":"df9d405c33a9a68946b530410f64096bcb72560c","modified":1755187128596},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/note.styl","hash":"909bb5079b26b6ee68177919f522566503654058","modified":1755187128666},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/tabs.styl","hash":"2d02e52b360f6e6cae47c293ae57ed78e2554663","modified":1755187128804},{"_id":"node_modules/hexo-theme-butterfly/source/css/_tags/timeline.styl","hash":"f071156d439556e7463ed4bc61ceee87170d5d08","modified":1755187128852},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/algolia.js","hash":"108988d046da9a4716148df43b3975217c8ceaae","modified":1755187106048},{"_id":"node_modules/hexo-theme-butterfly/source/css/_third-party/normalize.min.css","hash":"2c18a1c9604af475b4749def8f1959df88d8b276","modified":1755187097662},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/abcjs/abcjs.pug","hash":"f7299f9fef5bf94bb58c8cd3be8ee660ad2f9cd4","modified":1755187121982},{"_id":"node_modules/hexo-theme-butterfly/source/js/search/local-search.js","hash":"e1f60ebac53a3f596fd0a4769b4f9275c48c6542","modified":1755187116390},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/abcjs/index.pug","hash":"f58f1648d2d71311bafca4833f20b605bb5f18c8","modified":1755187125047},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/artalk.pug","hash":"5f86add36eeffbed61d11f08972a13697b4d9437","modified":1755187123240},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/disqus.pug","hash":"c5f7081ca29db8cc80f808dfc29e36d5fa22fd7e","modified":1755187124536},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/index.pug","hash":"b2d274db84ef22fbd6d5ea8f4404821898934209","modified":1755187125157},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/fb.pug","hash":"0344477a2cf38698318ead2681c63ac12f01586e","modified":1755187124733},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/remark42.pug","hash":"001e8be47854b891efe04013c240c38fed4185eb","modified":1755187126409},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/twikoo.pug","hash":"56c028ba0ea8fac19f0125114d765dfc56ce2b48","modified":1755187126690},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/waline.pug","hash":"3a5ccfc69bd8ccb4b8f3ce3502023f7914f2a022","modified":1755187126826},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/card-post-count/valine.pug","hash":"39427e107230a10790972349c9dd4c4f31d55eb7","modified":1755187126753},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/chatra.pug","hash":"ddce8352b371a1fb426bdb6c33f587eb37a69647","modified":1755187124228},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/crisp.pug","hash":"2fb098a7aa45010a8cd212dc0bd5308c6e7c63e3","modified":1755187124356},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/index.pug","hash":"618e1b7f9204049b07beb9e1363c844a78a9ace3","modified":1755187125181},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/daovoice.pug","hash":"9b57a8e13de8fc51a5f550854e47164fd8ac1be8","modified":1755187124386},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/messenger.pug","hash":"e39a9c37adf4cb15a2ba3b2cc65542ffea88650d","modified":1755187125677},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/chat/tidio.pug","hash":"dd61eca6e9a45f63e09bdefba89fe285a81ba096","modified":1755187126634},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/artalk.pug","hash":"5d5b73920843ce858df6e3b03325d5d1f43cdab3","modified":1755187123452},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/disqusjs.pug","hash":"3bc4c1b91568561f0491bdac65b75aa0bfd01f27","modified":1755187124634},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/disqus.pug","hash":"62f16a602e57e5f7f7c5249dd37b42d436dc032a","modified":1755187124614},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/gitalk.pug","hash":"0d378ee8a671982a46213a4bfb223b4f3409aea9","modified":1755187124860},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/facebook_comments.pug","hash":"46aec6466959baec1c3d71a5dbc510fbeb00c91d","modified":1755187124708},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/giscus.pug","hash":"2d7b0b09678adba09481e3152e0b32962677f650","modified":1755187124829},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/js.pug","hash":"00ed91c52939b9675b316137f854d13684c895a6","modified":1755187125338},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/index.pug","hash":"a9709905593d960954e2dd572f09f48a6c2b1ef7","modified":1755187125198},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/remark42.pug","hash":"f15699abb8c7a255aabad0222ae53eee387c66a3","modified":1755187126433},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/livere.pug","hash":"63cea2b5c8f7b59f5919379d61a2bb2ce8ed7623","modified":1755187125389},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/utterances.pug","hash":"1995a654ba7ad62775a0a6e2922209cd1a85f2e3","modified":1755187126737},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/valine.pug","hash":"46865e3f52096acb07d0212174b4e8751b123aea","modified":1755187126769},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/twikoo.pug","hash":"894bf60ff5170cf1e4f276a8cedaf8301bceb824","modified":1755187126715},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/comments/waline.pug","hash":"ad7f1ee2e67deee0706e0838b5724dd37fc30a34","modified":1755187126846},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/katex.pug","hash":"dfcbd9881be569ea420eff1a6b00e4f4dbe2138e","modified":1755187125353},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/index.pug","hash":"b8ae5fd7d74e1edcef21f5004fc96147e064d219","modified":1755187125223},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/mathjax.pug","hash":"fc072ac839401174b5d3cf9acd3b694246c23a55","modified":1755187125502},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/math/mermaid.pug","hash":"6b67982bb7a3713b5bffd6a23ba2810425c504d0","modified":1755187125640},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/artalk.pug","hash":"9a3617f5e90c4e4176aa2ee2e904c22466e9663b","modified":1755187123558},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/github-issues.pug","hash":"e434bcfb7fee59c7be2dac58a9b3a1989f21caa8","modified":1755187124911},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/disqus-comment.pug","hash":"2609bc2656aaaa9b59e8d575e711776512a62192","modified":1755187124507},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/index.pug","hash":"4ec0642f2d5444acfab570a6f8c7868e7ff43fde","modified":1755187125242},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/algolia.pug","hash":"9c3c109a12d2b6916e8b4965cca12f521510ead9","modified":1755187122174},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/remark42.pug","hash":"de2c4d02b520dd49a0a59fc0f33295e5bbb2c624","modified":1755187126451},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/valine.pug","hash":"1f9f51023e9e33081c2add2ca73643c0edc5e9d5","modified":1755187126808},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/docsearch.pug","hash":"b928be14d1b47a9fadb1bcc5f5072a7328752d4b","modified":1755187124654},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/index.pug","hash":"a99a41334387ee9a46c6f8e8212331a29a10d159","modified":1755187125267},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/twikoo-comment.pug","hash":"4104f96faa6040f111ebfb9a90eeb470857c3b86","modified":1755187126658},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/search/local-search.pug","hash":"3335024ba91f55ccf3858571b7898f46881c455c","modified":1755187125414},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/share/index.pug","hash":"3ba49cfe186e9ca05faf9f0d0113611ec47e9b38","modified":1755187125287},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/share/addtoany.pug","hash":"85c92f8a7e44d7cd1c86f089a05be438535e5362","modified":1755187122100},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/newest-comments/waline.pug","hash":"24804ab6da9727ed793655c1262fa3f1a9746f70","modified":1755187126878},{"_id":"node_modules/hexo-theme-butterfly/layout/includes/third-party/share/share-js.pug","hash":"c7dd2b2ae9b23aa0a60fffd7df9e9f76ef52033e","modified":1755187126499},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/highlight/diff.styl","hash":"cf1fae641c927621a4df1be5ca4a853b9b526e23","modified":1755187127643},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/prismjs/index.styl","hash":"5dc2e0bcae9a54bfb9bdcc82d02ae5a3cf1ca97d","modified":1755187128535},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/highlight/index.styl","hash":"18804c58239d95798fa86d0597f32d7f7dd30051","modified":1755187128523},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/prismjs/diff.styl","hash":"5972c61f5125068cbe0af279a0c93a54847fdc3b","modified":1755187127705},{"_id":"node_modules/hexo-theme-butterfly/source/css/_highlight/prismjs/line-number.styl","hash":"25914321762e30aacc610bc4dfb9de3e1cb556a3","modified":1755187128632}],"Category":[{"name":"历史","_id":"clqdww77d0005z4lte0hxdjb1"},{"name":"财富","_id":"clqdww77d0007z4ltblfrh04z"},{"name":"中国史","parent":"clqdww77d0005z4lte0hxdjb1","_id":"clqdww77e000az4lt31m2c1c0"},{"name":"量化投资","parent":"clqdww77d0007z4ltblfrh04z","_id":"clqdww77f000cz4lt6v66c99r"},{"name":"技术工具","parent":"clqdww77f000cz4lt6v66c99r","_id":"clqdww77f000fz4ltbfw4b4l3"},{"name":"基础","parent":"clqdww77f000fz4ltbfw4b4l3","_id":"clqdww77f000iz4ltejlr94jz"},{"name":"基础教程","_id":"clqdww77g000nz4lt06968z9h"},{"name":"量化投资","parent":"clqdww77g000nz4lt06968z9h","_id":"clqdww77g000pz4lte0ducpv2"},{"name":"环境搭建","parent":"clqdww77g000nz4lt06968z9h","_id":"clqdww77j0010z4lt6fqh7da4"},{"name":"总览","_id":"clqdww77k0014z4ltdtxy5hkz"},{"name":"个人进化","_id":"clqdww77m0019z4ltceoq4rou"},{"name":"文学","_id":"clqdww77n001gz4lt5cbk2u09"},{"name":"技术","_id":"clqdww77o001lz4ltejcq0d8c"},{"name":"目录","parent":"clqdww77k0014z4ltdtxy5hkz","_id":"clqdww77o001rz4ltf9k6hbdx"},{"name":"数据","_id":"clqdww77p001xz4lt7xeq5tk0"},{"name":"心理学","parent":"clqdww77m0019z4ltceoq4rou","_id":"clqdww77p0021z4ltbnv44s2n"},{"name":"书评","parent":"clqdww77n001gz4lt5cbk2u09","_id":"clqdww77p0025z4ltcwnu3avp"},{"name":"实践","parent":"clqdww77o001lz4ltejcq0d8c","_id":"clqdww77q0027z4lt17vm1foy"},{"name":"数据要素","parent":"clqdww77p001xz4lt7xeq5tk0","_id":"clqdww77q002dz4lt2nkvh35h"},{"name":"品读经典","_id":"clqdww77q002gz4lt5e9t6rbx"},{"name":"python","parent":"clqdww77q0027z4lt17vm1foy","_id":"clqdww77r002kz4ltb81ufbc4"},{"name":"行业洞察","parent":"clqdww77q002dz4lt2nkvh35h","_id":"clqdww77r002oz4ltcr2b80w1"},{"name":"茅盾文学奖","parent":"clqdww77q002gz4lt5e9t6rbx","_id":"clqdww77r002rz4lt31cp05nr"},{"name":"兴趣研究","_id":"clqdww77r002uz4lth9wi3jdb"},{"name":"专业","_id":"clqdww77r002vz4ltbbhve5ue"},{"name":"技术","parent":"clqdww77r002uz4lth9wi3jdb","_id":"clqdww77s002yz4lt7a4z964p"},{"name":"技术","parent":"clqdww77r002vz4ltbbhve5ue","_id":"clqdww77s0031z4lthrwd46j5"},{"name":"爬虫","parent":"clqdww77s002yz4lt7a4z964p","_id":"clqdww77s0032z4lt7753ckbz"},{"name":"教程","parent":"clqdww77s0031z4lthrwd46j5","_id":"clqdx8i860000mkltbh0fawc0"}],"Data":[],"Page":[{"type":"tags","layout":"tags","_content":"","source":"tags/index.md","raw":"---\ntype: tags\nlayout: tags\n---","date":"2022-08-12T06:44:49.318Z","updated":"2021-02-07T02:41:23.000Z","path":"tags/index.html","title":"","comments":1,"_id":"clqdww7740000z4ltfso2a7os","content":"","cover":false,"excerpt":"","more":""},{"type":"categories","layout":"categories","_content":"","source":"categories/index.md","raw":"---\ntype: \"categories\"\nlayout: \"categories\"\n---","date":"2022-08-12T06:44:49.303Z","updated":"2021-02-07T02:41:23.000Z","path":"categories/index.html","title":"","comments":1,"_id":"clqdww7790002z4ltep7u26um","content":"","cover":false,"excerpt":"","more":""}],"Post":[{"title":"兔子和大熊聊《资治通鉴》（导读）","date":"2021-02-17T12:56:43.000Z","_content":"\n### **创作背景**</p>\n春节期间，兔子在读《资治通鉴》，看到书里的语言，备受鼓舞，想着在互联网平台上和大家分享这本书里的新知。和大熊说罢，我们一拍即合，将把对《资治通鉴》的解读分为众多系列，以双人音频的方式放在喜马拉雅上。</p>\n以下为第一部分——导读。\n\n### **导读**</p>\n大熊/兔子：读史明智、鉴往知来。我是兔子/大熊。</p>\n大熊：欢迎大家来到兔子和大熊讲《资治通鉴》，以后的节目将由我们俩为大家解读《资治通鉴》这本书里的干货。</p>\n兔子：那大熊老师，我们今天和大家聊点什么呢？</p>\n大熊：由于今天是我们第一节课，那我们就从这本书的背景干货开始聊起。整本书，一共294卷，上可以追溯到战国初期韩赵魏三家分晋，下至宋太祖赵匡胤建国前夕，囊括了周秦两汉、魏晋南北朝、隋唐五代各朝的历史，整个时间跨度有1362年。</p>\n兔子：整本书的正文有三百多万字，司马光参考了三百多部著作，用了19年的时间才完成。</p>\n大熊：没错，那司马光为什么要写这本书呢？你觉得有哪些原因？</p>\n兔子：嗯，我们都知道“司马光砸缸”的故事，所以我想这么聪明的孩子，写书是他表达自己思想的一种途径，或者说是出于自身的喜好吧。</p>\n大熊：没错没错，我们都知道”砸缸“那个故事，其实司马光编撰这本书，一方面是出自自己的喜好和责任感，另一方面也和当时的政治环境有关。我们知道，北宋前期，提倡文治教化，鼓励大家多去总结历史经验和得失，所以在当时有很多学者都在做一件事，就是翻腾之前的史料，进行总结。</p>\n兔子：那这样说的话司马光写这本书，可以说是“奉敕”编撰的。所以在司马光和他的团队完成书稿，拿给皇帝看时，当时的皇帝宋神宗认为，这本书鉴于往事，有资于治道，故赐名《资治通鉴》。</p>\n大熊：没错，也正因为司马光的惊世情怀，才使得《资治通鉴》这本书得以经世致用。书里的内容是按照时间顺序编撰的，挑选了政治上和军事上的重要的人物、重要的事件。最精彩的地方是，在这每一部分之后，作者都有自己一段盖棺定论的评价，以提供给读者们借鉴。</p>\n兔子：所以这本书里可以看到故事、也可看到评述的语言，近代学者曾国藩在向众人推举这本书时，说这是经世治国最好的书。因为它不光讲道理，还通晓权利变更，还讲了如何操作，可谓是精彩纷呈。</p>\n大熊：没错，《资治通鉴》得到了后世学者和帝王的交口称誉，作为一本史书，它的价值可以从两方面去评价：一个是史料的价值，一个是史著的价值。作为历史材料，《资治通鉴》中隋唐五代的部分，是很难得的历史记载；同样，作为一部史学巨著，它也具有不可替代的阅读鉴赏价值。</p>\n兔子：司马光在编撰的时候参考了300多部著作，还特地又写了另外一本书，叫《考异》，记载从哪里搜罗来的史料，并进行考订。这才是学术研究的初心啊，讲求史料真实。</p>\n大熊：所以这本书，真的是非常值得我们仔细去品味。</p>\n兔子：大熊，你读《资治通鉴》，收获了哪些呢？</p>\n大熊：借用某先贤的一句话，读资治通鉴“可以自淑，可以诲人，可以知道而乐“。自淑就是提升自己，诲人就是可以和人分享，知道而乐就是知道为人之道、处世之道，感到很愉快，很快乐。我想，这也是我们大多数人读《资治通鉴》的宗旨吧。</p>\n兔子：没错，前段时间我有把《资治通鉴》的一些读后感发布到我的公众号上，有朋友和我留言说，古人就已想到了现代人遇到的问题的解决之路，真是智慧。所以我会感到，别人从我我分享的东西里获取新知，真是十分幸福的事情。</p>\n大熊：当然啦，历史是具体的，但道理是抽象的，所以对待很多历史事件和人物，不同人的看法也不同。也欢迎大家在以后的节目里可以发表自己的想法，我们可以一同讨论、共同进步。</p>\n兔子：大熊和兔子都是国学迷，也非常想通过分享对《资治通鉴》的个人解读，认识更多关注国学经典的你们。记得点击音频右方的“免费订阅”哦，我们下期节目见。</p>\n大熊：下期节目见。</p>  \n\n\n\n[导读音频-喜马拉雅主页](http://xima.tv/g4nS16?_sonic=0)\n\n\n","source":"_posts/2021-02-17-preparation.md","raw":"---\ntitle: 兔子和大熊聊《资治通鉴》（导读）\ndate: 2021-02-17 20:56:43\ncategories:\n- [历史,中国史]\n\ntags:\n- 资治通鉴\n\n---\n\n### **创作背景**</p>\n春节期间，兔子在读《资治通鉴》，看到书里的语言，备受鼓舞，想着在互联网平台上和大家分享这本书里的新知。和大熊说罢，我们一拍即合，将把对《资治通鉴》的解读分为众多系列，以双人音频的方式放在喜马拉雅上。</p>\n以下为第一部分——导读。\n\n### **导读**</p>\n大熊/兔子：读史明智、鉴往知来。我是兔子/大熊。</p>\n大熊：欢迎大家来到兔子和大熊讲《资治通鉴》，以后的节目将由我们俩为大家解读《资治通鉴》这本书里的干货。</p>\n兔子：那大熊老师，我们今天和大家聊点什么呢？</p>\n大熊：由于今天是我们第一节课，那我们就从这本书的背景干货开始聊起。整本书，一共294卷，上可以追溯到战国初期韩赵魏三家分晋，下至宋太祖赵匡胤建国前夕，囊括了周秦两汉、魏晋南北朝、隋唐五代各朝的历史，整个时间跨度有1362年。</p>\n兔子：整本书的正文有三百多万字，司马光参考了三百多部著作，用了19年的时间才完成。</p>\n大熊：没错，那司马光为什么要写这本书呢？你觉得有哪些原因？</p>\n兔子：嗯，我们都知道“司马光砸缸”的故事，所以我想这么聪明的孩子，写书是他表达自己思想的一种途径，或者说是出于自身的喜好吧。</p>\n大熊：没错没错，我们都知道”砸缸“那个故事，其实司马光编撰这本书，一方面是出自自己的喜好和责任感，另一方面也和当时的政治环境有关。我们知道，北宋前期，提倡文治教化，鼓励大家多去总结历史经验和得失，所以在当时有很多学者都在做一件事，就是翻腾之前的史料，进行总结。</p>\n兔子：那这样说的话司马光写这本书，可以说是“奉敕”编撰的。所以在司马光和他的团队完成书稿，拿给皇帝看时，当时的皇帝宋神宗认为，这本书鉴于往事，有资于治道，故赐名《资治通鉴》。</p>\n大熊：没错，也正因为司马光的惊世情怀，才使得《资治通鉴》这本书得以经世致用。书里的内容是按照时间顺序编撰的，挑选了政治上和军事上的重要的人物、重要的事件。最精彩的地方是，在这每一部分之后，作者都有自己一段盖棺定论的评价，以提供给读者们借鉴。</p>\n兔子：所以这本书里可以看到故事、也可看到评述的语言，近代学者曾国藩在向众人推举这本书时，说这是经世治国最好的书。因为它不光讲道理，还通晓权利变更，还讲了如何操作，可谓是精彩纷呈。</p>\n大熊：没错，《资治通鉴》得到了后世学者和帝王的交口称誉，作为一本史书，它的价值可以从两方面去评价：一个是史料的价值，一个是史著的价值。作为历史材料，《资治通鉴》中隋唐五代的部分，是很难得的历史记载；同样，作为一部史学巨著，它也具有不可替代的阅读鉴赏价值。</p>\n兔子：司马光在编撰的时候参考了300多部著作，还特地又写了另外一本书，叫《考异》，记载从哪里搜罗来的史料，并进行考订。这才是学术研究的初心啊，讲求史料真实。</p>\n大熊：所以这本书，真的是非常值得我们仔细去品味。</p>\n兔子：大熊，你读《资治通鉴》，收获了哪些呢？</p>\n大熊：借用某先贤的一句话，读资治通鉴“可以自淑，可以诲人，可以知道而乐“。自淑就是提升自己，诲人就是可以和人分享，知道而乐就是知道为人之道、处世之道，感到很愉快，很快乐。我想，这也是我们大多数人读《资治通鉴》的宗旨吧。</p>\n兔子：没错，前段时间我有把《资治通鉴》的一些读后感发布到我的公众号上，有朋友和我留言说，古人就已想到了现代人遇到的问题的解决之路，真是智慧。所以我会感到，别人从我我分享的东西里获取新知，真是十分幸福的事情。</p>\n大熊：当然啦，历史是具体的，但道理是抽象的，所以对待很多历史事件和人物，不同人的看法也不同。也欢迎大家在以后的节目里可以发表自己的想法，我们可以一同讨论、共同进步。</p>\n兔子：大熊和兔子都是国学迷，也非常想通过分享对《资治通鉴》的个人解读，认识更多关注国学经典的你们。记得点击音频右方的“免费订阅”哦，我们下期节目见。</p>\n大熊：下期节目见。</p>  \n\n\n\n[导读音频-喜马拉雅主页](http://xima.tv/g4nS16?_sonic=0)\n\n\n","slug":"preparation","published":1,"updated":"2021-02-17T13:31:32.000Z","comments":1,"layout":"post","photos":[],"_id":"clqdww7760001z4ltb1gq7jrv","content":"<h3 id=\"创作背景\"><a href=\"#创作背景\" class=\"headerlink\" title=\"创作背景\"></a><strong>创作背景</strong><p></p></h3><p>春节期间，兔子在读《资治通鉴》，看到书里的语言，备受鼓舞，想着在互联网平台上和大家分享这本书里的新知。和大熊说罢，我们一拍即合，将把对《资治通鉴》的解读分为众多系列，以双人音频的方式放在喜马拉雅上。</p><br>以下为第一部分——导读。<p></p>\n<h3 id=\"导读\"><a href=\"#导读\" class=\"headerlink\" title=\"导读\"></a><strong>导读</strong><p></p></h3><p>大熊&#x2F;兔子：读史明智、鉴往知来。我是兔子&#x2F;大熊。</p><br>大熊：欢迎大家来到兔子和大熊讲《资治通鉴》，以后的节目将由我们俩为大家解读《资治通鉴》这本书里的干货。<p></p><br>兔子：那大熊老师，我们今天和大家聊点什么呢？<p></p><br>大熊：由于今天是我们第一节课，那我们就从这本书的背景干货开始聊起。整本书，一共294卷，上可以追溯到战国初期韩赵魏三家分晋，下至宋太祖赵匡胤建国前夕，囊括了周秦两汉、魏晋南北朝、隋唐五代各朝的历史，整个时间跨度有1362年。<p></p><br>兔子：整本书的正文有三百多万字，司马光参考了三百多部著作，用了19年的时间才完成。<p></p><br>大熊：没错，那司马光为什么要写这本书呢？你觉得有哪些原因？<p></p><br>兔子：嗯，我们都知道“司马光砸缸”的故事，所以我想这么聪明的孩子，写书是他表达自己思想的一种途径，或者说是出于自身的喜好吧。<p></p><br>大熊：没错没错，我们都知道”砸缸“那个故事，其实司马光编撰这本书，一方面是出自自己的喜好和责任感，另一方面也和当时的政治环境有关。我们知道，北宋前期，提倡文治教化，鼓励大家多去总结历史经验和得失，所以在当时有很多学者都在做一件事，就是翻腾之前的史料，进行总结。<p></p><br>兔子：那这样说的话司马光写这本书，可以说是“奉敕”编撰的。所以在司马光和他的团队完成书稿，拿给皇帝看时，当时的皇帝宋神宗认为，这本书鉴于往事，有资于治道，故赐名《资治通鉴》。<p></p><br>大熊：没错，也正因为司马光的惊世情怀，才使得《资治通鉴》这本书得以经世致用。书里的内容是按照时间顺序编撰的，挑选了政治上和军事上的重要的人物、重要的事件。最精彩的地方是，在这每一部分之后，作者都有自己一段盖棺定论的评价，以提供给读者们借鉴。<p></p><br>兔子：所以这本书里可以看到故事、也可看到评述的语言，近代学者曾国藩在向众人推举这本书时，说这是经世治国最好的书。因为它不光讲道理，还通晓权利变更，还讲了如何操作，可谓是精彩纷呈。<p></p><br>大熊：没错，《资治通鉴》得到了后世学者和帝王的交口称誉，作为一本史书，它的价值可以从两方面去评价：一个是史料的价值，一个是史著的价值。作为历史材料，《资治通鉴》中隋唐五代的部分，是很难得的历史记载；同样，作为一部史学巨著，它也具有不可替代的阅读鉴赏价值。<p></p><br>兔子：司马光在编撰的时候参考了300多部著作，还特地又写了另外一本书，叫《考异》，记载从哪里搜罗来的史料，并进行考订。这才是学术研究的初心啊，讲求史料真实。<p></p><br>大熊：所以这本书，真的是非常值得我们仔细去品味。<p></p><br>兔子：大熊，你读《资治通鉴》，收获了哪些呢？<p></p><br>大熊：借用某先贤的一句话，读资治通鉴“可以自淑，可以诲人，可以知道而乐“。自淑就是提升自己，诲人就是可以和人分享，知道而乐就是知道为人之道、处世之道，感到很愉快，很快乐。我想，这也是我们大多数人读《资治通鉴》的宗旨吧。<p></p><br>兔子：没错，前段时间我有把《资治通鉴》的一些读后感发布到我的公众号上，有朋友和我留言说，古人就已想到了现代人遇到的问题的解决之路，真是智慧。所以我会感到，别人从我我分享的东西里获取新知，真是十分幸福的事情。<p></p><br>大熊：当然啦，历史是具体的，但道理是抽象的，所以对待很多历史事件和人物，不同人的看法也不同。也欢迎大家在以后的节目里可以发表自己的想法，我们可以一同讨论、共同进步。<p></p><br>兔子：大熊和兔子都是国学迷，也非常想通过分享对《资治通鉴》的个人解读，认识更多关注国学经典的你们。记得点击音频右方的“免费订阅”哦，我们下期节目见。<p></p><br>大熊：下期节目见。<p></p>  <p></p>\n<p><a href=\"http://xima.tv/g4nS16?_sonic=0\">导读音频-喜马拉雅主页</a></p>\n","cover":false,"excerpt":"","more":"<h3 id=\"创作背景\"><a href=\"#创作背景\" class=\"headerlink\" title=\"创作背景\"></a><strong>创作背景</strong><p></p></h3><p>春节期间，兔子在读《资治通鉴》，看到书里的语言，备受鼓舞，想着在互联网平台上和大家分享这本书里的新知。和大熊说罢，我们一拍即合，将把对《资治通鉴》的解读分为众多系列，以双人音频的方式放在喜马拉雅上。</p><br>以下为第一部分——导读。<p></p>\n<h3 id=\"导读\"><a href=\"#导读\" class=\"headerlink\" title=\"导读\"></a><strong>导读</strong><p></p></h3><p>大熊&#x2F;兔子：读史明智、鉴往知来。我是兔子&#x2F;大熊。</p><br>大熊：欢迎大家来到兔子和大熊讲《资治通鉴》，以后的节目将由我们俩为大家解读《资治通鉴》这本书里的干货。<p></p><br>兔子：那大熊老师，我们今天和大家聊点什么呢？<p></p><br>大熊：由于今天是我们第一节课，那我们就从这本书的背景干货开始聊起。整本书，一共294卷，上可以追溯到战国初期韩赵魏三家分晋，下至宋太祖赵匡胤建国前夕，囊括了周秦两汉、魏晋南北朝、隋唐五代各朝的历史，整个时间跨度有1362年。<p></p><br>兔子：整本书的正文有三百多万字，司马光参考了三百多部著作，用了19年的时间才完成。<p></p><br>大熊：没错，那司马光为什么要写这本书呢？你觉得有哪些原因？<p></p><br>兔子：嗯，我们都知道“司马光砸缸”的故事，所以我想这么聪明的孩子，写书是他表达自己思想的一种途径，或者说是出于自身的喜好吧。<p></p><br>大熊：没错没错，我们都知道”砸缸“那个故事，其实司马光编撰这本书，一方面是出自自己的喜好和责任感，另一方面也和当时的政治环境有关。我们知道，北宋前期，提倡文治教化，鼓励大家多去总结历史经验和得失，所以在当时有很多学者都在做一件事，就是翻腾之前的史料，进行总结。<p></p><br>兔子：那这样说的话司马光写这本书，可以说是“奉敕”编撰的。所以在司马光和他的团队完成书稿，拿给皇帝看时，当时的皇帝宋神宗认为，这本书鉴于往事，有资于治道，故赐名《资治通鉴》。<p></p><br>大熊：没错，也正因为司马光的惊世情怀，才使得《资治通鉴》这本书得以经世致用。书里的内容是按照时间顺序编撰的，挑选了政治上和军事上的重要的人物、重要的事件。最精彩的地方是，在这每一部分之后，作者都有自己一段盖棺定论的评价，以提供给读者们借鉴。<p></p><br>兔子：所以这本书里可以看到故事、也可看到评述的语言，近代学者曾国藩在向众人推举这本书时，说这是经世治国最好的书。因为它不光讲道理，还通晓权利变更，还讲了如何操作，可谓是精彩纷呈。<p></p><br>大熊：没错，《资治通鉴》得到了后世学者和帝王的交口称誉，作为一本史书，它的价值可以从两方面去评价：一个是史料的价值，一个是史著的价值。作为历史材料，《资治通鉴》中隋唐五代的部分，是很难得的历史记载；同样，作为一部史学巨著，它也具有不可替代的阅读鉴赏价值。<p></p><br>兔子：司马光在编撰的时候参考了300多部著作，还特地又写了另外一本书，叫《考异》，记载从哪里搜罗来的史料，并进行考订。这才是学术研究的初心啊，讲求史料真实。<p></p><br>大熊：所以这本书，真的是非常值得我们仔细去品味。<p></p><br>兔子：大熊，你读《资治通鉴》，收获了哪些呢？<p></p><br>大熊：借用某先贤的一句话，读资治通鉴“可以自淑，可以诲人，可以知道而乐“。自淑就是提升自己，诲人就是可以和人分享，知道而乐就是知道为人之道、处世之道，感到很愉快，很快乐。我想，这也是我们大多数人读《资治通鉴》的宗旨吧。<p></p><br>兔子：没错，前段时间我有把《资治通鉴》的一些读后感发布到我的公众号上，有朋友和我留言说，古人就已想到了现代人遇到的问题的解决之路，真是智慧。所以我会感到，别人从我我分享的东西里获取新知，真是十分幸福的事情。<p></p><br>大熊：当然啦，历史是具体的，但道理是抽象的，所以对待很多历史事件和人物，不同人的看法也不同。也欢迎大家在以后的节目里可以发表自己的想法，我们可以一同讨论、共同进步。<p></p><br>兔子：大熊和兔子都是国学迷，也非常想通过分享对《资治通鉴》的个人解读，认识更多关注国学经典的你们。记得点击音频右方的“免费订阅”哦，我们下期节目见。<p></p><br>大熊：下期节目见。<p></p>  <p></p>\n<p><a href=\"http://xima.tv/g4nS16?_sonic=0\">导读音频-喜马拉雅主页</a></p>\n"},{"title":"【量化投资】05.读取csv文件保存到mysql数据库","date":"2021-02-03T15:01:56.000Z","_content":"\n### **【老博客地址】**\n&emsp;&emsp;[【CSDN】博客主页](https://blog.csdn.net/MissYourKiss/)\n&emsp;&emsp;[【量化投资】00.资源篇——持续更新](https://blog.csdn.net/MissYourKiss/article/details/111321871)\n&emsp;&emsp;[【量化投资】01.基本概念](https://blog.csdn.net/MissYourKiss/article/details/111300459)\n&emsp;&emsp;[【量化投资】02.数据接口初探——excel读取新浪股票api数据](https://blog.csdn.net/MissYourKiss/article/details/111326137)\n&ensp;&ensp;&ensp;&ensp;[【量化投资】03.量化工程abu学习之量化基础（1/3）](https://blog.csdn.net/MissYourKiss/article/details/111472606)\n\n### **【目标】**\n&emsp;&emsp;接上文，将[【量化投资】04.使用python爬取股票基础数据](https://unclevicky.github.io/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/)中爬取的数据保存到mysql数据库中\n\n### **【最终效果】**\n{% asset_img ts_stock_basics.png 股票列表数据库Navicat截图 %}\n\n### **【准备工作】**\n+ 安装mysql数据库（本地或docker方式都可以）\n+ 安装python操作mysql所需要的包\n  + ```pip install pymysql```\n+ （选）安装Navicat客户端，用以查询数据库\n\n### **【创建mysql数据库表】**\n ```sql\nCREATE TABLE ts_stock_basics(code varchar(255) COMMENT '代码',name varchar(255) COMMENT '名称',industry varchar(255) COMMENT '所属行业',area varchar(255) COMMENT '地区',pe varchar(255) COMMENT '市盈率',outstanding varchar(255) COMMENT '流通股本(亿)',totals varchar(255) COMMENT '总股本(亿)',totalAssets varchar(255) COMMENT '总资产(万)',liquidAssets varchar(255) COMMENT '流动资产',fixedAssets varchar(255) COMMENT '固定资产',reserved varchar(255) COMMENT '公积金',reservedPerShare varchar(255) COMMENT '每股公积金',esp varchar(255) COMMENT '每股收益',bvps varchar(255) COMMENT '每股净资',pb varchar(255) COMMENT '市净率',timeToMarket varchar(255) COMMENT '上市日期',undp varchar(255) COMMENT '未分利润',perundp varchar(255) COMMENT '每股未分配',rev varchar(255) COMMENT '收入同比(%)',profit varchar(255) COMMENT '利润同比(%)',gpr varchar(255) COMMENT '毛利率(%)',npr varchar(255) COMMENT '净利润率(%)',holders varchar(255) COMMENT '股东人数',PRIMARY KEY (code) ) COMMENT='股票列表';\n```\n### **【完整代码：读取csv文件，并插入到数据库】**\n**【重要】需要更改自己的数据库地址、用户名和密码**\n```python\nimport pymysql\nimport csv\n\nMYSQL_HOST='127.0.0.1'\nMYSQL_USER='root'\nMYSQL_PWD='mariadb'\nMYSQL_DB='stock_data'\n\n# 建立数据连接\ndef conn():\n    db = pymysql.connect(MYSQL_HOST, MYSQL_USER, MYSQL_PWD, MYSQL_DB, port=3306, charset=\"utf8\")\n    return db\n\n# 插入数据\ndef insertTSB():\n   \n    # 读取csv文件\n    file = open('stock_info.csv',encoding='utf-8')\n    fileReader = csv.reader(file)\n    filedata = list(fileReader) \n    db = conn()\n    c = db.cursor()\n\n    # 有些为空的数据，csv自动变为-, 需要处理掉， 否则插入数据库会报错\n    for row in filedata:\n        for _ in range(len(row)):\n            if row[_] == '-':\n                row[_]='\\'\\''\n    \n    for i,val in enumerate(filedata):\n        if i==0: # 跳过文件头\n            continue\n        # 组装插入语句\n        # 股票代码 股票名称 行业 地区 pe 流通股本 总股本 总资产 流动资产 上市时间 每股未分配利润 利润同比 净利润率\n        sql = \"INSERT INTO ts_stock_basics(code, name, industry, area, pe, \\\n        outstanding, totals, totalAssets, liquidAssets, timeToMarket, perundp, profit, npr) \\\n       VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s )\" % \\\n       (str(val[0]).zfill(6), '\\''+val[1]+'\\'', '\\''+val[20]+'\\'',  '\\''+val[21]+'\\'', val[22], val[15], val[14], val[18], val[19], val[29], val[30], val[26], val[27])\n        \n        try:\n            # 执行语句\n            c.execute(sql)\n            # 提交\n            db.commit()\n        except:\n            # 如果出错，把错误语句打印出来，方便分析\n            print(sql)\n            # 如果出错需要回滚\n            db.rollback()\n    # 一定不要忘了关闭数据库连接\n    db.close()\n\n# 删除所有数据    \ndef deleteTSB():\n    db = conn()\n    # 使用cursor()方法获取操作游标 \n    cursor = db.cursor()\n\n    # SQL 删除语句\n    sql = \"DELETE FROM ts_stock_basics WHERE 1=1 \"\n    try:\n       # 执行SQL语句\n       cursor.execute(sql)\n       # 提交修改\n       db.commit()\n    except:\n       # 发生错误时回滚\n       db.rollback()\n\n    # 关闭连接\n    db.close()\n    \n#deleteTSB() # 如果需要重新插入，用此方法删除数据库表内容\ninsertTSB()\n```\n\n","source":"_posts/2021-02-03-量化投资5.md","raw":"---\ntitle: 【量化投资】05.读取csv文件保存到mysql数据库\ndate: 2021-02-03 23:01:56\ncategories:\n- [财富, 量化投资, 技术工具, 基础]\n- [基础教程, 量化投资]\ntags:\n- 量化投资\n- 数据获取\n- 技术\n- python\n- mysql\n---\n\n### **【老博客地址】**\n&emsp;&emsp;[【CSDN】博客主页](https://blog.csdn.net/MissYourKiss/)\n&emsp;&emsp;[【量化投资】00.资源篇——持续更新](https://blog.csdn.net/MissYourKiss/article/details/111321871)\n&emsp;&emsp;[【量化投资】01.基本概念](https://blog.csdn.net/MissYourKiss/article/details/111300459)\n&emsp;&emsp;[【量化投资】02.数据接口初探——excel读取新浪股票api数据](https://blog.csdn.net/MissYourKiss/article/details/111326137)\n&ensp;&ensp;&ensp;&ensp;[【量化投资】03.量化工程abu学习之量化基础（1/3）](https://blog.csdn.net/MissYourKiss/article/details/111472606)\n\n### **【目标】**\n&emsp;&emsp;接上文，将[【量化投资】04.使用python爬取股票基础数据](https://unclevicky.github.io/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/)中爬取的数据保存到mysql数据库中\n\n### **【最终效果】**\n{% asset_img ts_stock_basics.png 股票列表数据库Navicat截图 %}\n\n### **【准备工作】**\n+ 安装mysql数据库（本地或docker方式都可以）\n+ 安装python操作mysql所需要的包\n  + ```pip install pymysql```\n+ （选）安装Navicat客户端，用以查询数据库\n\n### **【创建mysql数据库表】**\n ```sql\nCREATE TABLE ts_stock_basics(code varchar(255) COMMENT '代码',name varchar(255) COMMENT '名称',industry varchar(255) COMMENT '所属行业',area varchar(255) COMMENT '地区',pe varchar(255) COMMENT '市盈率',outstanding varchar(255) COMMENT '流通股本(亿)',totals varchar(255) COMMENT '总股本(亿)',totalAssets varchar(255) COMMENT '总资产(万)',liquidAssets varchar(255) COMMENT '流动资产',fixedAssets varchar(255) COMMENT '固定资产',reserved varchar(255) COMMENT '公积金',reservedPerShare varchar(255) COMMENT '每股公积金',esp varchar(255) COMMENT '每股收益',bvps varchar(255) COMMENT '每股净资',pb varchar(255) COMMENT '市净率',timeToMarket varchar(255) COMMENT '上市日期',undp varchar(255) COMMENT '未分利润',perundp varchar(255) COMMENT '每股未分配',rev varchar(255) COMMENT '收入同比(%)',profit varchar(255) COMMENT '利润同比(%)',gpr varchar(255) COMMENT '毛利率(%)',npr varchar(255) COMMENT '净利润率(%)',holders varchar(255) COMMENT '股东人数',PRIMARY KEY (code) ) COMMENT='股票列表';\n```\n### **【完整代码：读取csv文件，并插入到数据库】**\n**【重要】需要更改自己的数据库地址、用户名和密码**\n```python\nimport pymysql\nimport csv\n\nMYSQL_HOST='127.0.0.1'\nMYSQL_USER='root'\nMYSQL_PWD='mariadb'\nMYSQL_DB='stock_data'\n\n# 建立数据连接\ndef conn():\n    db = pymysql.connect(MYSQL_HOST, MYSQL_USER, MYSQL_PWD, MYSQL_DB, port=3306, charset=\"utf8\")\n    return db\n\n# 插入数据\ndef insertTSB():\n   \n    # 读取csv文件\n    file = open('stock_info.csv',encoding='utf-8')\n    fileReader = csv.reader(file)\n    filedata = list(fileReader) \n    db = conn()\n    c = db.cursor()\n\n    # 有些为空的数据，csv自动变为-, 需要处理掉， 否则插入数据库会报错\n    for row in filedata:\n        for _ in range(len(row)):\n            if row[_] == '-':\n                row[_]='\\'\\''\n    \n    for i,val in enumerate(filedata):\n        if i==0: # 跳过文件头\n            continue\n        # 组装插入语句\n        # 股票代码 股票名称 行业 地区 pe 流通股本 总股本 总资产 流动资产 上市时间 每股未分配利润 利润同比 净利润率\n        sql = \"INSERT INTO ts_stock_basics(code, name, industry, area, pe, \\\n        outstanding, totals, totalAssets, liquidAssets, timeToMarket, perundp, profit, npr) \\\n       VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s )\" % \\\n       (str(val[0]).zfill(6), '\\''+val[1]+'\\'', '\\''+val[20]+'\\'',  '\\''+val[21]+'\\'', val[22], val[15], val[14], val[18], val[19], val[29], val[30], val[26], val[27])\n        \n        try:\n            # 执行语句\n            c.execute(sql)\n            # 提交\n            db.commit()\n        except:\n            # 如果出错，把错误语句打印出来，方便分析\n            print(sql)\n            # 如果出错需要回滚\n            db.rollback()\n    # 一定不要忘了关闭数据库连接\n    db.close()\n\n# 删除所有数据    \ndef deleteTSB():\n    db = conn()\n    # 使用cursor()方法获取操作游标 \n    cursor = db.cursor()\n\n    # SQL 删除语句\n    sql = \"DELETE FROM ts_stock_basics WHERE 1=1 \"\n    try:\n       # 执行SQL语句\n       cursor.execute(sql)\n       # 提交修改\n       db.commit()\n    except:\n       # 发生错误时回滚\n       db.rollback()\n\n    # 关闭连接\n    db.close()\n    \n#deleteTSB() # 如果需要重新插入，用此方法删除数据库表内容\ninsertTSB()\n```\n\n","slug":"量化投资5","published":1,"updated":"2021-02-07T02:41:23.000Z","comments":1,"layout":"post","photos":[],"_id":"clqdww77a0003z4ltc36n2wfy","content":"<h3 id=\"【老博客地址】\"><a href=\"#【老博客地址】\" class=\"headerlink\" title=\"【老博客地址】\"></a><strong>【老博客地址】</strong></h3><p>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/\">【CSDN】博客主页</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111321871\">【量化投资】00.资源篇——持续更新</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111300459\">【量化投资】01.基本概念</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111326137\">【量化投资】02.数据接口初探——excel读取新浪股票api数据</a><br>&ensp;&ensp;&ensp;&ensp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111472606\">【量化投资】03.量化工程abu学习之量化基础（1&#x2F;3）</a></p>\n<h3 id=\"【目标】\"><a href=\"#【目标】\" class=\"headerlink\" title=\"【目标】\"></a><strong>【目标】</strong></h3><p>&emsp;&emsp;接上文，将<a href=\"https://unclevicky.github.io/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/\">【量化投资】04.使用python爬取股票基础数据</a>中爬取的数据保存到mysql数据库中</p>\n<h3 id=\"【最终效果】\"><a href=\"#【最终效果】\" class=\"headerlink\" title=\"【最终效果】\"></a><strong>【最终效果】</strong></h3><img src=\"/rabbitBear/2021/02/03/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%845/ts_stock_basics.png\" class title=\"股票列表数据库Navicat截图\">\n\n<h3 id=\"【准备工作】\"><a href=\"#【准备工作】\" class=\"headerlink\" title=\"【准备工作】\"></a><strong>【准备工作】</strong></h3><ul>\n<li>安装mysql数据库（本地或docker方式都可以）</li>\n<li>安装python操作mysql所需要的包<ul>\n<li><code>pip install pymysql</code></li>\n</ul>\n</li>\n<li>（选）安装Navicat客户端，用以查询数据库</li>\n</ul>\n<h3 id=\"【创建mysql数据库表】\"><a href=\"#【创建mysql数据库表】\" class=\"headerlink\" title=\"【创建mysql数据库表】\"></a><strong>【创建mysql数据库表】</strong></h3> <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> ts_stock_basics(code <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;代码&#x27;</span>,name <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;名称&#x27;</span>,industry <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;所属行业&#x27;</span>,area <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;地区&#x27;</span>,pe <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;市盈率&#x27;</span>,outstanding <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;流通股本(亿)&#x27;</span>,totals <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;总股本(亿)&#x27;</span>,totalAssets <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;总资产(万)&#x27;</span>,liquidAssets <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;流动资产&#x27;</span>,fixedAssets <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;固定资产&#x27;</span>,reserved <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;公积金&#x27;</span>,reservedPerShare <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;每股公积金&#x27;</span>,esp <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;每股收益&#x27;</span>,bvps <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;每股净资&#x27;</span>,pb <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;市净率&#x27;</span>,timeToMarket <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;上市日期&#x27;</span>,undp <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;未分利润&#x27;</span>,perundp <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;每股未分配&#x27;</span>,rev <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;收入同比(%)&#x27;</span>,profit <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;利润同比(%)&#x27;</span>,gpr <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;毛利率(%)&#x27;</span>,npr <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;净利润率(%)&#x27;</span>,holders <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;股东人数&#x27;</span>,<span class=\"keyword\">PRIMARY</span> KEY (code) ) COMMENT<span class=\"operator\">=</span><span class=\"string\">&#x27;股票列表&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"【完整代码：读取csv文件，并插入到数据库】\"><a href=\"#【完整代码：读取csv文件，并插入到数据库】\" class=\"headerlink\" title=\"【完整代码：读取csv文件，并插入到数据库】\"></a><strong>【完整代码：读取csv文件，并插入到数据库】</strong></h3><p><strong>【重要】需要更改自己的数据库地址、用户名和密码</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pymysql</span><br><span class=\"line\"><span class=\"keyword\">import</span> csv</span><br><span class=\"line\"></span><br><span class=\"line\">MYSQL_HOST=<span class=\"string\">&#x27;127.0.0.1&#x27;</span></span><br><span class=\"line\">MYSQL_USER=<span class=\"string\">&#x27;root&#x27;</span></span><br><span class=\"line\">MYSQL_PWD=<span class=\"string\">&#x27;mariadb&#x27;</span></span><br><span class=\"line\">MYSQL_DB=<span class=\"string\">&#x27;stock_data&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 建立数据连接</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">conn</span>():</span><br><span class=\"line\">    db = pymysql.connect(MYSQL_HOST, MYSQL_USER, MYSQL_PWD, MYSQL_DB, port=<span class=\"number\">3306</span>, charset=<span class=\"string\">&quot;utf8&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> db</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 插入数据</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">insertTSB</span>():</span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\"># 读取csv文件</span></span><br><span class=\"line\">    file = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;stock_info.csv&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">    fileReader = csv.reader(file)</span><br><span class=\"line\">    filedata = <span class=\"built_in\">list</span>(fileReader) </span><br><span class=\"line\">    db = conn()</span><br><span class=\"line\">    c = db.cursor()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 有些为空的数据，csv自动变为-, 需要处理掉， 否则插入数据库会报错</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> filedata:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(row)):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> row[_] == <span class=\"string\">&#x27;-&#x27;</span>:</span><br><span class=\"line\">                row[_]=<span class=\"string\">&#x27;\\&#x27;\\&#x27;&#x27;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span> i,val <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(filedata):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> i==<span class=\"number\">0</span>: <span class=\"comment\"># 跳过文件头</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"comment\"># 组装插入语句</span></span><br><span class=\"line\">        <span class=\"comment\"># 股票代码 股票名称 行业 地区 pe 流通股本 总股本 总资产 流动资产 上市时间 每股未分配利润 利润同比 净利润率</span></span><br><span class=\"line\">        sql = <span class=\"string\">&quot;INSERT INTO ts_stock_basics(code, name, industry, area, pe, \\</span></span><br><span class=\"line\"><span class=\"string\">        outstanding, totals, totalAssets, liquidAssets, timeToMarket, perundp, profit, npr) \\</span></span><br><span class=\"line\"><span class=\"string\">       VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s )&quot;</span> % \\</span><br><span class=\"line\">       (<span class=\"built_in\">str</span>(val[<span class=\"number\">0</span>]).zfill(<span class=\"number\">6</span>), <span class=\"string\">&#x27;\\&#x27;&#x27;</span>+val[<span class=\"number\">1</span>]+<span class=\"string\">&#x27;\\&#x27;&#x27;</span>, <span class=\"string\">&#x27;\\&#x27;&#x27;</span>+val[<span class=\"number\">20</span>]+<span class=\"string\">&#x27;\\&#x27;&#x27;</span>,  <span class=\"string\">&#x27;\\&#x27;&#x27;</span>+val[<span class=\"number\">21</span>]+<span class=\"string\">&#x27;\\&#x27;&#x27;</span>, val[<span class=\"number\">22</span>], val[<span class=\"number\">15</span>], val[<span class=\"number\">14</span>], val[<span class=\"number\">18</span>], val[<span class=\"number\">19</span>], val[<span class=\"number\">29</span>], val[<span class=\"number\">30</span>], val[<span class=\"number\">26</span>], val[<span class=\"number\">27</span>])</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            <span class=\"comment\"># 执行语句</span></span><br><span class=\"line\">            c.execute(sql)</span><br><span class=\"line\">            <span class=\"comment\"># 提交</span></span><br><span class=\"line\">            db.commit()</span><br><span class=\"line\">        <span class=\"keyword\">except</span>:</span><br><span class=\"line\">            <span class=\"comment\"># 如果出错，把错误语句打印出来，方便分析</span></span><br><span class=\"line\">            <span class=\"built_in\">print</span>(sql)</span><br><span class=\"line\">            <span class=\"comment\"># 如果出错需要回滚</span></span><br><span class=\"line\">            db.rollback()</span><br><span class=\"line\">    <span class=\"comment\"># 一定不要忘了关闭数据库连接</span></span><br><span class=\"line\">    db.close()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除所有数据    </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">deleteTSB</span>():</span><br><span class=\"line\">    db = conn()</span><br><span class=\"line\">    <span class=\"comment\"># 使用cursor()方法获取操作游标 </span></span><br><span class=\"line\">    cursor = db.cursor()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># SQL 删除语句</span></span><br><span class=\"line\">    sql = <span class=\"string\">&quot;DELETE FROM ts_stock_basics WHERE 1=1 &quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">       <span class=\"comment\"># 执行SQL语句</span></span><br><span class=\"line\">       cursor.execute(sql)</span><br><span class=\"line\">       <span class=\"comment\"># 提交修改</span></span><br><span class=\"line\">       db.commit()</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">       <span class=\"comment\"># 发生错误时回滚</span></span><br><span class=\"line\">       db.rollback()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 关闭连接</span></span><br><span class=\"line\">    db.close()</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\">#deleteTSB() # 如果需要重新插入，用此方法删除数据库表内容</span></span><br><span class=\"line\">insertTSB()</span><br></pre></td></tr></table></figure>\n\n","cover":false,"excerpt":"","more":"<h3 id=\"【老博客地址】\"><a href=\"#【老博客地址】\" class=\"headerlink\" title=\"【老博客地址】\"></a><strong>【老博客地址】</strong></h3><p>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/\">【CSDN】博客主页</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111321871\">【量化投资】00.资源篇——持续更新</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111300459\">【量化投资】01.基本概念</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111326137\">【量化投资】02.数据接口初探——excel读取新浪股票api数据</a><br>&ensp;&ensp;&ensp;&ensp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111472606\">【量化投资】03.量化工程abu学习之量化基础（1&#x2F;3）</a></p>\n<h3 id=\"【目标】\"><a href=\"#【目标】\" class=\"headerlink\" title=\"【目标】\"></a><strong>【目标】</strong></h3><p>&emsp;&emsp;接上文，将<a href=\"https://unclevicky.github.io/rabbitBear/2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%84/\">【量化投资】04.使用python爬取股票基础数据</a>中爬取的数据保存到mysql数据库中</p>\n<h3 id=\"【最终效果】\"><a href=\"#【最终效果】\" class=\"headerlink\" title=\"【最终效果】\"></a><strong>【最终效果】</strong></h3><img src=\"/rabbitBear/2021/02/03/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%845/ts_stock_basics.png\" class title=\"股票列表数据库Navicat截图\">\n\n<h3 id=\"【准备工作】\"><a href=\"#【准备工作】\" class=\"headerlink\" title=\"【准备工作】\"></a><strong>【准备工作】</strong></h3><ul>\n<li>安装mysql数据库（本地或docker方式都可以）</li>\n<li>安装python操作mysql所需要的包<ul>\n<li><code>pip install pymysql</code></li>\n</ul>\n</li>\n<li>（选）安装Navicat客户端，用以查询数据库</li>\n</ul>\n<h3 id=\"【创建mysql数据库表】\"><a href=\"#【创建mysql数据库表】\" class=\"headerlink\" title=\"【创建mysql数据库表】\"></a><strong>【创建mysql数据库表】</strong></h3> <figure class=\"highlight sql\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">CREATE</span> <span class=\"keyword\">TABLE</span> ts_stock_basics(code <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;代码&#x27;</span>,name <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;名称&#x27;</span>,industry <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;所属行业&#x27;</span>,area <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;地区&#x27;</span>,pe <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;市盈率&#x27;</span>,outstanding <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;流通股本(亿)&#x27;</span>,totals <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;总股本(亿)&#x27;</span>,totalAssets <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;总资产(万)&#x27;</span>,liquidAssets <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;流动资产&#x27;</span>,fixedAssets <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;固定资产&#x27;</span>,reserved <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;公积金&#x27;</span>,reservedPerShare <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;每股公积金&#x27;</span>,esp <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;每股收益&#x27;</span>,bvps <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;每股净资&#x27;</span>,pb <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;市净率&#x27;</span>,timeToMarket <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;上市日期&#x27;</span>,undp <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;未分利润&#x27;</span>,perundp <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;每股未分配&#x27;</span>,rev <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;收入同比(%)&#x27;</span>,profit <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;利润同比(%)&#x27;</span>,gpr <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;毛利率(%)&#x27;</span>,npr <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;净利润率(%)&#x27;</span>,holders <span class=\"type\">varchar</span>(<span class=\"number\">255</span>) COMMENT <span class=\"string\">&#x27;股东人数&#x27;</span>,<span class=\"keyword\">PRIMARY</span> KEY (code) ) COMMENT<span class=\"operator\">=</span><span class=\"string\">&#x27;股票列表&#x27;</span>;</span><br></pre></td></tr></table></figure>\n<h3 id=\"【完整代码：读取csv文件，并插入到数据库】\"><a href=\"#【完整代码：读取csv文件，并插入到数据库】\" class=\"headerlink\" title=\"【完整代码：读取csv文件，并插入到数据库】\"></a><strong>【完整代码：读取csv文件，并插入到数据库】</strong></h3><p><strong>【重要】需要更改自己的数据库地址、用户名和密码</strong></p>\n<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> pymysql</span><br><span class=\"line\"><span class=\"keyword\">import</span> csv</span><br><span class=\"line\"></span><br><span class=\"line\">MYSQL_HOST=<span class=\"string\">&#x27;127.0.0.1&#x27;</span></span><br><span class=\"line\">MYSQL_USER=<span class=\"string\">&#x27;root&#x27;</span></span><br><span class=\"line\">MYSQL_PWD=<span class=\"string\">&#x27;mariadb&#x27;</span></span><br><span class=\"line\">MYSQL_DB=<span class=\"string\">&#x27;stock_data&#x27;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 建立数据连接</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">conn</span>():</span><br><span class=\"line\">    db = pymysql.connect(MYSQL_HOST, MYSQL_USER, MYSQL_PWD, MYSQL_DB, port=<span class=\"number\">3306</span>, charset=<span class=\"string\">&quot;utf8&quot;</span>)</span><br><span class=\"line\">    <span class=\"keyword\">return</span> db</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 插入数据</span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">insertTSB</span>():</span><br><span class=\"line\">   </span><br><span class=\"line\">    <span class=\"comment\"># 读取csv文件</span></span><br><span class=\"line\">    file = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;stock_info.csv&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">    fileReader = csv.reader(file)</span><br><span class=\"line\">    filedata = <span class=\"built_in\">list</span>(fileReader) </span><br><span class=\"line\">    db = conn()</span><br><span class=\"line\">    c = db.cursor()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 有些为空的数据，csv自动变为-, 需要处理掉， 否则插入数据库会报错</span></span><br><span class=\"line\">    <span class=\"keyword\">for</span> row <span class=\"keyword\">in</span> filedata:</span><br><span class=\"line\">        <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> <span class=\"built_in\">range</span>(<span class=\"built_in\">len</span>(row)):</span><br><span class=\"line\">            <span class=\"keyword\">if</span> row[_] == <span class=\"string\">&#x27;-&#x27;</span>:</span><br><span class=\"line\">                row[_]=<span class=\"string\">&#x27;\\&#x27;\\&#x27;&#x27;</span></span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">for</span> i,val <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(filedata):</span><br><span class=\"line\">        <span class=\"keyword\">if</span> i==<span class=\"number\">0</span>: <span class=\"comment\"># 跳过文件头</span></span><br><span class=\"line\">            <span class=\"keyword\">continue</span></span><br><span class=\"line\">        <span class=\"comment\"># 组装插入语句</span></span><br><span class=\"line\">        <span class=\"comment\"># 股票代码 股票名称 行业 地区 pe 流通股本 总股本 总资产 流动资产 上市时间 每股未分配利润 利润同比 净利润率</span></span><br><span class=\"line\">        sql = <span class=\"string\">&quot;INSERT INTO ts_stock_basics(code, name, industry, area, pe, \\</span></span><br><span class=\"line\"><span class=\"string\">        outstanding, totals, totalAssets, liquidAssets, timeToMarket, perundp, profit, npr) \\</span></span><br><span class=\"line\"><span class=\"string\">       VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s )&quot;</span> % \\</span><br><span class=\"line\">       (<span class=\"built_in\">str</span>(val[<span class=\"number\">0</span>]).zfill(<span class=\"number\">6</span>), <span class=\"string\">&#x27;\\&#x27;&#x27;</span>+val[<span class=\"number\">1</span>]+<span class=\"string\">&#x27;\\&#x27;&#x27;</span>, <span class=\"string\">&#x27;\\&#x27;&#x27;</span>+val[<span class=\"number\">20</span>]+<span class=\"string\">&#x27;\\&#x27;&#x27;</span>,  <span class=\"string\">&#x27;\\&#x27;&#x27;</span>+val[<span class=\"number\">21</span>]+<span class=\"string\">&#x27;\\&#x27;&#x27;</span>, val[<span class=\"number\">22</span>], val[<span class=\"number\">15</span>], val[<span class=\"number\">14</span>], val[<span class=\"number\">18</span>], val[<span class=\"number\">19</span>], val[<span class=\"number\">29</span>], val[<span class=\"number\">30</span>], val[<span class=\"number\">26</span>], val[<span class=\"number\">27</span>])</span><br><span class=\"line\">        </span><br><span class=\"line\">        <span class=\"keyword\">try</span>:</span><br><span class=\"line\">            <span class=\"comment\"># 执行语句</span></span><br><span class=\"line\">            c.execute(sql)</span><br><span class=\"line\">            <span class=\"comment\"># 提交</span></span><br><span class=\"line\">            db.commit()</span><br><span class=\"line\">        <span class=\"keyword\">except</span>:</span><br><span class=\"line\">            <span class=\"comment\"># 如果出错，把错误语句打印出来，方便分析</span></span><br><span class=\"line\">            <span class=\"built_in\">print</span>(sql)</span><br><span class=\"line\">            <span class=\"comment\"># 如果出错需要回滚</span></span><br><span class=\"line\">            db.rollback()</span><br><span class=\"line\">    <span class=\"comment\"># 一定不要忘了关闭数据库连接</span></span><br><span class=\"line\">    db.close()</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 删除所有数据    </span></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">deleteTSB</span>():</span><br><span class=\"line\">    db = conn()</span><br><span class=\"line\">    <span class=\"comment\"># 使用cursor()方法获取操作游标 </span></span><br><span class=\"line\">    cursor = db.cursor()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># SQL 删除语句</span></span><br><span class=\"line\">    sql = <span class=\"string\">&quot;DELETE FROM ts_stock_basics WHERE 1=1 &quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">try</span>:</span><br><span class=\"line\">       <span class=\"comment\"># 执行SQL语句</span></span><br><span class=\"line\">       cursor.execute(sql)</span><br><span class=\"line\">       <span class=\"comment\"># 提交修改</span></span><br><span class=\"line\">       db.commit()</span><br><span class=\"line\">    <span class=\"keyword\">except</span>:</span><br><span class=\"line\">       <span class=\"comment\"># 发生错误时回滚</span></span><br><span class=\"line\">       db.rollback()</span><br><span class=\"line\"></span><br><span class=\"line\">    <span class=\"comment\"># 关闭连接</span></span><br><span class=\"line\">    db.close()</span><br><span class=\"line\">    </span><br><span class=\"line\"><span class=\"comment\">#deleteTSB() # 如果需要重新插入，用此方法删除数据库表内容</span></span><br><span class=\"line\">insertTSB()</span><br></pre></td></tr></table></figure>\n\n"},{"title":"hexo博客基础环境搭建（非常详细）","date":"2021-02-07T02:36:33.000Z","_content":"\n## **【背景】**\n<p style=\"text-indent:2em\">\n我是一名学财务的文科生，没有任何计算机基础，但是喜欢写文章，之前都是在微信公众号上写，但是有诸多限制，于是萌生了想搭建一个自己的博客的念头。我把我的想法告诉了我的一个朋友（姑且称他为X君吧），X君帮我搭建了一个网站，并把过程写了一个简单的教程并讲给我听。我根据X君的教程和讲解，自己也把环境搭建起来了。在这里做一个记录。算是在新博客网站中的第一篇文章吧。\n</p>\n\n## **【目标】**\n1. 使用nodejs的hexo搭建本地博客系统\n2. 使用git进行版本管理（和小伙伴们协同工作的必备良兔（tool））\n3. 使用github进行代码托管（X君告诉我自己写的东西可以上传到这个网站，可以当作一个本地的备份，也可以随时随地工作，但是要注意隐私问题）\n4. 使用github Page作为博客网站的访问（X君说这是一个免费的个人网页托管服务器，不是很懂，反正就是能通过他自定义并在公网上访问自己的文章）\n\n## **【小白科普】**\n1. **运行环境**\n   + 任何软件的运行都需要环境，比如win10需要在笔记本电脑上运行，andriod需要在手机上运行；笔记本电脑和手机就是win10和android这俩软件的运行环境。\n   + 操作系统是一个特殊的软件，他们为其他软件的运行提供环境，比如QQ、微信都需要安装在win10、ios或android操作系统上才能运行，只不过他们要求的格式不一样，win10可以运行exe软件，ios可以运行dmg文件，andriod运行pkg文件等。\n   + 针对那些没有可视化交互界面的软件，操作系统会给他们提供一个特殊的运行环境。比如win10的cmd运行环境，mac的bash环境，androi也有只不过我们在手机上不常用。（不太好理解，但是可以类比win10需要笔记本电脑提供环境，QQ需要win10操作系统提供环境，python等没有界面的软件需要cmd提供环境一样类比着理解）。\n   + python、nodejs、mysql等这些都是没有可视化交互界面的软件，所以需要我们在cmd或者bash中运行（X君说python和nodejs也有图形交互界面，但是为了让我更好的理解这些概念，所以就不推荐我使用）。\n2. **环境变量**\n   + 上面提到了运行环境，但是我按X君的教程搭建环境的时候，经常**提示某某文件后文件夹找不见**，于是X君又给我普及了**环境变量**的概念。\n   + 当我们使用cmd或bash运行一个软件时，会以以下顺序执行：\n      * 首先会在**当前目录**中寻找是否有该软件（例如python.exe）；\n      * 如果没有则会在**当前用户的PATH环境变量指定的所有目录中按先后顺序循环寻找**，如果找到了就直接运行，不再往下找。这个PATH就是一个环境变量（可以理解为一个字符串），存放了一堆的文件夹目录，win10是以“;”隔开，mac是以“：”隔开，大概长下面这个样子。\n``` bash\n  /Users/abbywalker/opt/anaconda3/bin:/Users/abbywalker/opt/anaconda3/condabin:/Library/Frameworks/Python.framework/Versions/3.8/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/mysql/bin\n```\n      * 如果还没有则会继续在**系统的PATH环境变量指定的所有目录中按先后顺序循环寻找**\n      * 如果还是找不到，就会报错**提示某某文件后文件夹找不见**\n3. **运行软件的5个方法**\n   + 根据上面环境变量的介绍，运行软件可以有5种方法\n   + 直接到该软件的安装目录下运行 （对应于环境变量中的**当前目录**）\n   + 把该软件的安装目录加入到**该用户的PATH变量**中（具体方法后面讲）\n   + 在当前运行的cmd或bash中临时指定，而不影响其他的程序运行（X君建议使用这种方法，这样可以同一个电脑安装多版本的软件，比如同时安装python2.7和3.7，通过这种方法临时指定当前运行的环境而不影响其他程序）（具体方法后面讲）\n   + 把该软件的安装目录加入到**系统的PATH变量**中（具体方法后面讲）\n   + 直接指定该软件安装目录的绝对路径进行执行，例如:\n``` bash\n  >/usr/local/mysql/bin/python #mac的bash环境\n  >d:\\soft\\pytthon\\python.exe #win10的cmd环境\n```\n\n<p style=\"text-indent:2em\">\n<b>好了，小白科普到此结束，下面进入本文正题。</b>\n</p>\n\n## **【环境准备】**\n1. 安装git\n2. 安装nodejs\n3. 安装hexo\n4. github搭建源文件个人仓库\n5. **github设置多Page**（默认一个账户只能有一个主页Page）\n6. 生产SSH并添加到github\n7. 将hexo发布到github\n8. 页面访问（本地预览和公网访问）\n\n<p style=\"text-indent:2em\">\nPS：X君用的是windows，我用的是mac所以教程会写两份。\n</p>\n\n### **安装git**\n1. windows的比较简单，直接下载软件，一路下一步即可；\n2. mac上安装稍微复杂一点，安装过程记录以下；\n   + 百度搜索 mac git安装，会提示到 [git-scm](https://git-scm.com/download/mac)去安装\n   + 页面是英文的，按第一个教程，先安装**homebrew**,按照homebrew官网的提示，第一种方法直接安装,```/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"```需要翻墙 **【失败】**，按官网第二种方法，先下载下来，然后解压，会报错，好不容易解压出来了，运行依然会报错。**【失败】**。**建议大家不要按这个方法安装，当然有兴趣的可以自己尝试。**\n   + 鉴于**homebrew**的教训，所以**XCode**的方式，我也没有尝试。\n   + 直接使用第三种方式，**Binary installer**，下载sourceforge编译好的安装包，虽然不是最新版，但是不影响咱们的使用。**直接下载zip文件，解压出dmg文件，安装即可。**\n\n### **安装nodejs**\n1. windows和mac上都比较简单，直接下载软件，一路下一步即可；\n\n### **安装hexo**\n&ensp;&ensp;&ensp;&ensp;**windows和mac是一样的**\n\n1. **在nodejs环境中（cmd或者bash）安装hexo包**  \n``` bash\nnpm install -g hexo-cli\n```\n2. **测试hexo是否成功**\n   + 初始化\n``` bash\nhexo init myBlog\n```\n   + 安装基础环境包 \n``` bash\ncd myBlog\nnpm install\n```\n\n<p style=\"text-indent:2em\">\n执行成功后，myBlog文件夹的结构如下:\n</p>\n\n``` bash\nmyBlog\n├── _config.yml # 网站的配置信息，您可以在此配置大部分的参数。 \n├── package.json\n├── scaffolds # 模版文件夹\n├── source  # 资源文件夹，除 _posts 文件，其他以下划线_开头的文件或者文件夹不会被编译打包到public文件夹\n|   ├── _drafts # 草稿文件\n|   └── _posts # 文章Markdowm文件 \n└── themes  # 主题文件夹\n```\n   + 本地启动hexo服务器进行测试  \n``` bash\nhexo s\n```\n&ensp;&ensp;&ensp;&ensp;在浏览器中输入**http://localhost:4000**，如果看到如下效果，则证明hexo环境搭建成功:\n{% asset_img hexo-hello.png 初始化 %}\n\n### **github搭建个人源码仓库**\n<p style=\"text-indent:2em\">\n   <font color='red'>  \n   根据X君的建议，为了保证隐私安全和版权，自己写的博客的<b>源文件</b>单独保存在一个github仓库里，供自己使用；把hexo编译后的<b>发布版本</b>保存在另外一个github仓库里,通过github Page供大家访问。\n   </font>\n</p>\n\n1. 注册github（略）。\n2. 登录github（略）\n3. 新建个人仓库 **（建议私人库）**\n{% asset_img github_new.png 点击新建按钮 %}\n{% asset_img github_new_config.png 填入相关信息 %}\n4. 导出个人仓库\n``` bash\ngit clone https://github.com/unclevicky/myBlogSrc.git .\n```\n5. 把刚建立的**myBlog文件下的所有内容**放到刚导出的github目录，然后再提交\n``` bash\ngit commit -m \"第一次提交我的blog\"\ngit push\n```\n\n### **github设置多Page**\n1. <font color='red'>直接使用github个人主页</font>\n   \n   + 一个github主页只能有一个个人主页\n   + 新建一个**与账户同名的xxxx.github.io** (xxxx是你自己的账户名，X君的是unclevicky.github.io)\n   + **记录下这个特殊仓库的git地址供后面使用**,https://github.com/unclevicky/unclevicky.github.io.git\n2. <font color='red'><b>利用每个项目的GitHub Pages实现多主页访问</b></font>\n   + 新建一个仓库项目，方法同上\n{% asset_img github_new.png 点击新建按钮 %}\n   + 输入项目名称等信息(建议公开项目,不公开也行其实)，截图里用的名字是\"myBlogPub\"，写教程的时候已经改成了\"rabbitBear\"。可根据需要自己修改。\n{% asset_img github_new_pub.png 填入相关信息 %}\n   + 在github中配置页面，向下滚动<b>设置项目GitHub Pages信息</b>\n{% asset_img github_setting.png 设置GitHub Pages %}\n{% asset_img github_pub_page.png 设置GitHub Pages %}\n   + 记住两个地址\n      * **记住项目仓库的地址，后面配置hexo发布时使用**,https://github.com/unclevicky/rabbitBear.git\n      * **记住项目Github Page地址，后面访问博客时使用**,https://unclevicky.github.io/rabbitBear/\n\n### **生产SSH并添加到github**\n1. 配置一个SSH绑定到github，SSH一个是私钥，一个是公钥，私钥保存到个人本地（千万别泄露），公钥配置到github上。（不太懂，反正类似我党当年在小黑板上登一个报纸-公钥，每个人拿自己的暗号-私钥，去破解想要的信息一样。同一份报纸，每个人私钥不同，获取的情报也不同一样。姑且这理解吧）。\n2. 回到本地的git环境,设置github用户的全局用户和邮箱，如果已设置可以忽略。\n``` bash\n# 使用以下语句检测是否设置，如果返回为空，则证明未设置\ngit config user.name\ngit config user.email\n```\n``` bash\n# 如果没设置，则使用下面两句话设置即可\ngit config --global user.name \"yourname\"\ngit config --global user.email \"youremail\"\n```\n3. 然后创建SSH,使用以下语句，然后一路回车\n``` bash\n# windows的话使用cmd环境,xxxx是你的windows用户\ncd c:/users/xxxx/.ssh/ \n# mac的话使用bash环境,$HOME也是一个环境变量（参考上面），指向当前用户的home目录\n# cd $HOME/.ssh/\nssh-keygen -t rsa -C \"youremail\"\n```\n{% asset_img git_ssh.png SSH秘钥截图 %}\n\n4. 将SSH的公钥，绑定到github上。\n   + 打开上面的**id_rsa.pub**文件，把所有的内容拷贝下来\n   + 粘贴到github的SSH里面\n{% asset_img github_ssh.png 用户配置页面截图 %}\n{% asset_img github_ssh_new.png SSH配置页面截图 %}\n{% asset_img github_ssh_newdetail.png 新建配置截图 %}\n5. 在本地cmd或bash环境测试秘钥是否成功\n``` bash\n# windows的话使用cmd环境,xxxx是你的windows用户\ncd c:/users/xxxx/.ssh/ \n# mac的话使用bash环境,$HOME也是一个环境变量（参考上面），指向当前用户的home目录\n# cd $HOME/.ssh/\nssh -T git@github.com\n```\n如果，显示```Hi unclevicky! You've successfully authenticated, but GitHub does not provide shell access.```,说明成功了。\n{% asset_img ssh_suc.png SSH配置成功截图 %}\n1. **不成功的可能原因**\n   + 如果不成功，加入-v参数，则使用以下命令，查看失败原因\n``` bash\n ssh -T -v git@github.com \n```\n   + X君第一次也失败，使用-v查看调试信息之后发现，是找不到秘钥。这个问题，是绝对路径和相对路径造成的，所以在.ssh的目录下，新建一个**config**的文件，制定秘钥的绝对路径即可:\n{% asset_img git_ssh.png SSH秘钥截图 %}\n``` bash\nHost github.com\nUser xxxx@xx.com # 你的邮箱地址\nHostname ssh.github.com\nPreferredAuthentications publickey\nIdentityFile C:\\\\Users\\\\xxxx\\\\.ssh\\\\id_rsa # 你的私钥的保存路径和名字\nPort 443\n```\n\n\n### **将hexo发布到github**\n1. hexo本地环境测试【√】；github Page完成【√】；ssh配置完成【√】。剩下就是修改hexo的配置文件，然后发布到github page上，即可访问。\n2. 修改hexo博客目录的配置文件**_config.yml**,找到 **\"url:\"** 和 **\"deploy:\"**\n<p style=\"text-indent:2em\">\n   <font color='red'>\n   <b>\n\n   特殊说明：\n    + 如果github使用的“直接使用github个人主页”方法，根据上面让记住的连接，url和deploy的配置为：\n   </b>\n   </font>\n</p>\n\n``` bash\nurl: https://unclevicky.github.io\nroot: /\n...\n...\n\ndeploy:\n  type: git\n  repo: https://github.com/unclevicky/unclevicky.github.io.git\n\n```\n<p style=\"text-indent:2em\">\n   <font color='red'>\n   <b>\n\n   + 如果github使用的“项目的GitHub Pages实现多主页”方法，根据上面让记住的连接，url需要指定具体的项目名称，url和deploy的配置为：\n   </b>\n   </font>\n</p>\n\n``` bash\nurl: https://unclevicky.github.io/rabbitBear/\nroot: /rabbitBear\n...\n...\n\ndeploy:\n  type: git\n  repo: https://github.com/unclevicky/rabbitBear.git\n...\n...\n```\n\n**项目的GitHub Pages实现多主页的配置如下**\n\n``` bash\n# URL\n## If your site is put in a subdirectory, set url as 'http://example.com/child' and root as '/child/'\nurl: https://unclevicky.github.io/rabbitBear/\nroot: /rabbitBear\npermalink: :year/:month/:day/:title/\npermalink_defaults:\npretty_urls:\n  trailing_index: true # Set to false to remove trailing 'index.html' from permalinks\n  trailing_html: true # Set to false to remove trailing '.html' from permalinks\n```\n\n``` bash\n# URL\n## If your site is put in a subdirectory, set url as 'http://example.com/child' and root as '/child/'\n# Deployment\n## Docs: https://hexo.io/docs/one-command-deployment\ndeploy:\n  type: git\n  repo: https://github.com/unclevicky/rabbitBear.git\n  branch: main\n```\n\n3. 在本地执行hexo的编译和发布命令，则可成功发布到github上\n``` bash\nhexo clean # 删除以前的发布\nhexo g -d  # 重新编译生成，并按配置文件中的github信息，发布到对应的网站上\n```\n\n\n### **公网访问访问博客主页**\n1. <font color='red'><b>直接个人主页方式</b></font>\n   https://xxxx.github.io/，xxxx是你的github用户名\n   例如：https://unclevicky.github.io/\n2. <font color='red'><b>项目多主页方式</b></font>\n   https://xxxx.github.io/yyyy/，xxxx是你的github用户名,yyyy是你的项目名\n   例如：https://unclevicky.github.io/rabbitBear/\n\n\n## **修改博客样式**\n1. 默认的样式不是很好看，可以自己DIY样式和功能，比如统计访问量、设置分类、增加订阅、回复等功能，这也是为什么要搭建自己模块的原因。**DIY！**\n2. 当然也可以使用网上那些达人们已经diy好的样式，比如X君给我推荐的buterfly这款样式。\n   + 下载样式到博客的themes目录，在线安装和手工下载都可以。以butterfly为例\n``` bash\n# 在cmd或bash下执行\n# 下载并安装样式文件\nnpm i hexo-theme-butterfly\n# 下载并安装该样式需要的插件，每个样式需要的插件不一样，根据实际需要来，否则有些样式显示不出来\nnpm install hexo-renderer-pug hexo-renderer-stylus --save\n```\n3. hexo博客目录的配置文件**_config.yml**，找到\"theme\"，修改成刚下载的\"butterfly\"\n``` bash\n# Extensions\n## Plugins: https://hexo.io/plugins/\n## Themes: https://hexo.io/themes/\ntheme: butterfly\n```\n4. 最终效果如下\n{% asset_img butterfly.png butterfly样式效果 %}\n\n\n## **写新博客**\n1. 在**源文件**的根目录执行，```hexo new xxxx```,xxxx是博客名称，支持中文。例如:```hexo new 博客基础环境搭建（非常详细）```。\n2. 则在博客的\"source/_posts/\"目录下生产一个，同名的.md文件，例如\"hexo博客基础环境搭建（非常详细）.md\"，此文件就是我们的博客源文件，修改此文件，把博客内容写进去，然后使用前面提到的,```hexo clean``` ```hexo g -d```,即可完成编译和发布。\n3. **.md是markdown语言写的文件，非常简洁和灵活，至于如何使用.md文件写博客，将在后续的博客中陆续更新。本篇文章即是用此方法编写完成。对于我这个新手来说，入门还是比较简单的。**\n\n## The End！ Have Fun！","source":"_posts/2021-02-07-hexo博客基础环境搭建.md","raw":"---\ntitle: hexo博客基础环境搭建（非常详细）\ndate: 2021-02-07 10:36:33\ncategories:\n- [基础教程, 环境搭建]\ntags:\n- hexo\n- github\n- 博客\n---\n\n## **【背景】**\n<p style=\"text-indent:2em\">\n我是一名学财务的文科生，没有任何计算机基础，但是喜欢写文章，之前都是在微信公众号上写，但是有诸多限制，于是萌生了想搭建一个自己的博客的念头。我把我的想法告诉了我的一个朋友（姑且称他为X君吧），X君帮我搭建了一个网站，并把过程写了一个简单的教程并讲给我听。我根据X君的教程和讲解，自己也把环境搭建起来了。在这里做一个记录。算是在新博客网站中的第一篇文章吧。\n</p>\n\n## **【目标】**\n1. 使用nodejs的hexo搭建本地博客系统\n2. 使用git进行版本管理（和小伙伴们协同工作的必备良兔（tool））\n3. 使用github进行代码托管（X君告诉我自己写的东西可以上传到这个网站，可以当作一个本地的备份，也可以随时随地工作，但是要注意隐私问题）\n4. 使用github Page作为博客网站的访问（X君说这是一个免费的个人网页托管服务器，不是很懂，反正就是能通过他自定义并在公网上访问自己的文章）\n\n## **【小白科普】**\n1. **运行环境**\n   + 任何软件的运行都需要环境，比如win10需要在笔记本电脑上运行，andriod需要在手机上运行；笔记本电脑和手机就是win10和android这俩软件的运行环境。\n   + 操作系统是一个特殊的软件，他们为其他软件的运行提供环境，比如QQ、微信都需要安装在win10、ios或android操作系统上才能运行，只不过他们要求的格式不一样，win10可以运行exe软件，ios可以运行dmg文件，andriod运行pkg文件等。\n   + 针对那些没有可视化交互界面的软件，操作系统会给他们提供一个特殊的运行环境。比如win10的cmd运行环境，mac的bash环境，androi也有只不过我们在手机上不常用。（不太好理解，但是可以类比win10需要笔记本电脑提供环境，QQ需要win10操作系统提供环境，python等没有界面的软件需要cmd提供环境一样类比着理解）。\n   + python、nodejs、mysql等这些都是没有可视化交互界面的软件，所以需要我们在cmd或者bash中运行（X君说python和nodejs也有图形交互界面，但是为了让我更好的理解这些概念，所以就不推荐我使用）。\n2. **环境变量**\n   + 上面提到了运行环境，但是我按X君的教程搭建环境的时候，经常**提示某某文件后文件夹找不见**，于是X君又给我普及了**环境变量**的概念。\n   + 当我们使用cmd或bash运行一个软件时，会以以下顺序执行：\n      * 首先会在**当前目录**中寻找是否有该软件（例如python.exe）；\n      * 如果没有则会在**当前用户的PATH环境变量指定的所有目录中按先后顺序循环寻找**，如果找到了就直接运行，不再往下找。这个PATH就是一个环境变量（可以理解为一个字符串），存放了一堆的文件夹目录，win10是以“;”隔开，mac是以“：”隔开，大概长下面这个样子。\n``` bash\n  /Users/abbywalker/opt/anaconda3/bin:/Users/abbywalker/opt/anaconda3/condabin:/Library/Frameworks/Python.framework/Versions/3.8/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/mysql/bin\n```\n      * 如果还没有则会继续在**系统的PATH环境变量指定的所有目录中按先后顺序循环寻找**\n      * 如果还是找不到，就会报错**提示某某文件后文件夹找不见**\n3. **运行软件的5个方法**\n   + 根据上面环境变量的介绍，运行软件可以有5种方法\n   + 直接到该软件的安装目录下运行 （对应于环境变量中的**当前目录**）\n   + 把该软件的安装目录加入到**该用户的PATH变量**中（具体方法后面讲）\n   + 在当前运行的cmd或bash中临时指定，而不影响其他的程序运行（X君建议使用这种方法，这样可以同一个电脑安装多版本的软件，比如同时安装python2.7和3.7，通过这种方法临时指定当前运行的环境而不影响其他程序）（具体方法后面讲）\n   + 把该软件的安装目录加入到**系统的PATH变量**中（具体方法后面讲）\n   + 直接指定该软件安装目录的绝对路径进行执行，例如:\n``` bash\n  >/usr/local/mysql/bin/python #mac的bash环境\n  >d:\\soft\\pytthon\\python.exe #win10的cmd环境\n```\n\n<p style=\"text-indent:2em\">\n<b>好了，小白科普到此结束，下面进入本文正题。</b>\n</p>\n\n## **【环境准备】**\n1. 安装git\n2. 安装nodejs\n3. 安装hexo\n4. github搭建源文件个人仓库\n5. **github设置多Page**（默认一个账户只能有一个主页Page）\n6. 生产SSH并添加到github\n7. 将hexo发布到github\n8. 页面访问（本地预览和公网访问）\n\n<p style=\"text-indent:2em\">\nPS：X君用的是windows，我用的是mac所以教程会写两份。\n</p>\n\n### **安装git**\n1. windows的比较简单，直接下载软件，一路下一步即可；\n2. mac上安装稍微复杂一点，安装过程记录以下；\n   + 百度搜索 mac git安装，会提示到 [git-scm](https://git-scm.com/download/mac)去安装\n   + 页面是英文的，按第一个教程，先安装**homebrew**,按照homebrew官网的提示，第一种方法直接安装,```/bin/bash -c \"$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)\"```需要翻墙 **【失败】**，按官网第二种方法，先下载下来，然后解压，会报错，好不容易解压出来了，运行依然会报错。**【失败】**。**建议大家不要按这个方法安装，当然有兴趣的可以自己尝试。**\n   + 鉴于**homebrew**的教训，所以**XCode**的方式，我也没有尝试。\n   + 直接使用第三种方式，**Binary installer**，下载sourceforge编译好的安装包，虽然不是最新版，但是不影响咱们的使用。**直接下载zip文件，解压出dmg文件，安装即可。**\n\n### **安装nodejs**\n1. windows和mac上都比较简单，直接下载软件，一路下一步即可；\n\n### **安装hexo**\n&ensp;&ensp;&ensp;&ensp;**windows和mac是一样的**\n\n1. **在nodejs环境中（cmd或者bash）安装hexo包**  \n``` bash\nnpm install -g hexo-cli\n```\n2. **测试hexo是否成功**\n   + 初始化\n``` bash\nhexo init myBlog\n```\n   + 安装基础环境包 \n``` bash\ncd myBlog\nnpm install\n```\n\n<p style=\"text-indent:2em\">\n执行成功后，myBlog文件夹的结构如下:\n</p>\n\n``` bash\nmyBlog\n├── _config.yml # 网站的配置信息，您可以在此配置大部分的参数。 \n├── package.json\n├── scaffolds # 模版文件夹\n├── source  # 资源文件夹，除 _posts 文件，其他以下划线_开头的文件或者文件夹不会被编译打包到public文件夹\n|   ├── _drafts # 草稿文件\n|   └── _posts # 文章Markdowm文件 \n└── themes  # 主题文件夹\n```\n   + 本地启动hexo服务器进行测试  \n``` bash\nhexo s\n```\n&ensp;&ensp;&ensp;&ensp;在浏览器中输入**http://localhost:4000**，如果看到如下效果，则证明hexo环境搭建成功:\n{% asset_img hexo-hello.png 初始化 %}\n\n### **github搭建个人源码仓库**\n<p style=\"text-indent:2em\">\n   <font color='red'>  \n   根据X君的建议，为了保证隐私安全和版权，自己写的博客的<b>源文件</b>单独保存在一个github仓库里，供自己使用；把hexo编译后的<b>发布版本</b>保存在另外一个github仓库里,通过github Page供大家访问。\n   </font>\n</p>\n\n1. 注册github（略）。\n2. 登录github（略）\n3. 新建个人仓库 **（建议私人库）**\n{% asset_img github_new.png 点击新建按钮 %}\n{% asset_img github_new_config.png 填入相关信息 %}\n4. 导出个人仓库\n``` bash\ngit clone https://github.com/unclevicky/myBlogSrc.git .\n```\n5. 把刚建立的**myBlog文件下的所有内容**放到刚导出的github目录，然后再提交\n``` bash\ngit commit -m \"第一次提交我的blog\"\ngit push\n```\n\n### **github设置多Page**\n1. <font color='red'>直接使用github个人主页</font>\n   \n   + 一个github主页只能有一个个人主页\n   + 新建一个**与账户同名的xxxx.github.io** (xxxx是你自己的账户名，X君的是unclevicky.github.io)\n   + **记录下这个特殊仓库的git地址供后面使用**,https://github.com/unclevicky/unclevicky.github.io.git\n2. <font color='red'><b>利用每个项目的GitHub Pages实现多主页访问</b></font>\n   + 新建一个仓库项目，方法同上\n{% asset_img github_new.png 点击新建按钮 %}\n   + 输入项目名称等信息(建议公开项目,不公开也行其实)，截图里用的名字是\"myBlogPub\"，写教程的时候已经改成了\"rabbitBear\"。可根据需要自己修改。\n{% asset_img github_new_pub.png 填入相关信息 %}\n   + 在github中配置页面，向下滚动<b>设置项目GitHub Pages信息</b>\n{% asset_img github_setting.png 设置GitHub Pages %}\n{% asset_img github_pub_page.png 设置GitHub Pages %}\n   + 记住两个地址\n      * **记住项目仓库的地址，后面配置hexo发布时使用**,https://github.com/unclevicky/rabbitBear.git\n      * **记住项目Github Page地址，后面访问博客时使用**,https://unclevicky.github.io/rabbitBear/\n\n### **生产SSH并添加到github**\n1. 配置一个SSH绑定到github，SSH一个是私钥，一个是公钥，私钥保存到个人本地（千万别泄露），公钥配置到github上。（不太懂，反正类似我党当年在小黑板上登一个报纸-公钥，每个人拿自己的暗号-私钥，去破解想要的信息一样。同一份报纸，每个人私钥不同，获取的情报也不同一样。姑且这理解吧）。\n2. 回到本地的git环境,设置github用户的全局用户和邮箱，如果已设置可以忽略。\n``` bash\n# 使用以下语句检测是否设置，如果返回为空，则证明未设置\ngit config user.name\ngit config user.email\n```\n``` bash\n# 如果没设置，则使用下面两句话设置即可\ngit config --global user.name \"yourname\"\ngit config --global user.email \"youremail\"\n```\n3. 然后创建SSH,使用以下语句，然后一路回车\n``` bash\n# windows的话使用cmd环境,xxxx是你的windows用户\ncd c:/users/xxxx/.ssh/ \n# mac的话使用bash环境,$HOME也是一个环境变量（参考上面），指向当前用户的home目录\n# cd $HOME/.ssh/\nssh-keygen -t rsa -C \"youremail\"\n```\n{% asset_img git_ssh.png SSH秘钥截图 %}\n\n4. 将SSH的公钥，绑定到github上。\n   + 打开上面的**id_rsa.pub**文件，把所有的内容拷贝下来\n   + 粘贴到github的SSH里面\n{% asset_img github_ssh.png 用户配置页面截图 %}\n{% asset_img github_ssh_new.png SSH配置页面截图 %}\n{% asset_img github_ssh_newdetail.png 新建配置截图 %}\n5. 在本地cmd或bash环境测试秘钥是否成功\n``` bash\n# windows的话使用cmd环境,xxxx是你的windows用户\ncd c:/users/xxxx/.ssh/ \n# mac的话使用bash环境,$HOME也是一个环境变量（参考上面），指向当前用户的home目录\n# cd $HOME/.ssh/\nssh -T git@github.com\n```\n如果，显示```Hi unclevicky! You've successfully authenticated, but GitHub does not provide shell access.```,说明成功了。\n{% asset_img ssh_suc.png SSH配置成功截图 %}\n1. **不成功的可能原因**\n   + 如果不成功，加入-v参数，则使用以下命令，查看失败原因\n``` bash\n ssh -T -v git@github.com \n```\n   + X君第一次也失败，使用-v查看调试信息之后发现，是找不到秘钥。这个问题，是绝对路径和相对路径造成的，所以在.ssh的目录下，新建一个**config**的文件，制定秘钥的绝对路径即可:\n{% asset_img git_ssh.png SSH秘钥截图 %}\n``` bash\nHost github.com\nUser xxxx@xx.com # 你的邮箱地址\nHostname ssh.github.com\nPreferredAuthentications publickey\nIdentityFile C:\\\\Users\\\\xxxx\\\\.ssh\\\\id_rsa # 你的私钥的保存路径和名字\nPort 443\n```\n\n\n### **将hexo发布到github**\n1. hexo本地环境测试【√】；github Page完成【√】；ssh配置完成【√】。剩下就是修改hexo的配置文件，然后发布到github page上，即可访问。\n2. 修改hexo博客目录的配置文件**_config.yml**,找到 **\"url:\"** 和 **\"deploy:\"**\n<p style=\"text-indent:2em\">\n   <font color='red'>\n   <b>\n\n   特殊说明：\n    + 如果github使用的“直接使用github个人主页”方法，根据上面让记住的连接，url和deploy的配置为：\n   </b>\n   </font>\n</p>\n\n``` bash\nurl: https://unclevicky.github.io\nroot: /\n...\n...\n\ndeploy:\n  type: git\n  repo: https://github.com/unclevicky/unclevicky.github.io.git\n\n```\n<p style=\"text-indent:2em\">\n   <font color='red'>\n   <b>\n\n   + 如果github使用的“项目的GitHub Pages实现多主页”方法，根据上面让记住的连接，url需要指定具体的项目名称，url和deploy的配置为：\n   </b>\n   </font>\n</p>\n\n``` bash\nurl: https://unclevicky.github.io/rabbitBear/\nroot: /rabbitBear\n...\n...\n\ndeploy:\n  type: git\n  repo: https://github.com/unclevicky/rabbitBear.git\n...\n...\n```\n\n**项目的GitHub Pages实现多主页的配置如下**\n\n``` bash\n# URL\n## If your site is put in a subdirectory, set url as 'http://example.com/child' and root as '/child/'\nurl: https://unclevicky.github.io/rabbitBear/\nroot: /rabbitBear\npermalink: :year/:month/:day/:title/\npermalink_defaults:\npretty_urls:\n  trailing_index: true # Set to false to remove trailing 'index.html' from permalinks\n  trailing_html: true # Set to false to remove trailing '.html' from permalinks\n```\n\n``` bash\n# URL\n## If your site is put in a subdirectory, set url as 'http://example.com/child' and root as '/child/'\n# Deployment\n## Docs: https://hexo.io/docs/one-command-deployment\ndeploy:\n  type: git\n  repo: https://github.com/unclevicky/rabbitBear.git\n  branch: main\n```\n\n3. 在本地执行hexo的编译和发布命令，则可成功发布到github上\n``` bash\nhexo clean # 删除以前的发布\nhexo g -d  # 重新编译生成，并按配置文件中的github信息，发布到对应的网站上\n```\n\n\n### **公网访问访问博客主页**\n1. <font color='red'><b>直接个人主页方式</b></font>\n   https://xxxx.github.io/，xxxx是你的github用户名\n   例如：https://unclevicky.github.io/\n2. <font color='red'><b>项目多主页方式</b></font>\n   https://xxxx.github.io/yyyy/，xxxx是你的github用户名,yyyy是你的项目名\n   例如：https://unclevicky.github.io/rabbitBear/\n\n\n## **修改博客样式**\n1. 默认的样式不是很好看，可以自己DIY样式和功能，比如统计访问量、设置分类、增加订阅、回复等功能，这也是为什么要搭建自己模块的原因。**DIY！**\n2. 当然也可以使用网上那些达人们已经diy好的样式，比如X君给我推荐的buterfly这款样式。\n   + 下载样式到博客的themes目录，在线安装和手工下载都可以。以butterfly为例\n``` bash\n# 在cmd或bash下执行\n# 下载并安装样式文件\nnpm i hexo-theme-butterfly\n# 下载并安装该样式需要的插件，每个样式需要的插件不一样，根据实际需要来，否则有些样式显示不出来\nnpm install hexo-renderer-pug hexo-renderer-stylus --save\n```\n3. hexo博客目录的配置文件**_config.yml**，找到\"theme\"，修改成刚下载的\"butterfly\"\n``` bash\n# Extensions\n## Plugins: https://hexo.io/plugins/\n## Themes: https://hexo.io/themes/\ntheme: butterfly\n```\n4. 最终效果如下\n{% asset_img butterfly.png butterfly样式效果 %}\n\n\n## **写新博客**\n1. 在**源文件**的根目录执行，```hexo new xxxx```,xxxx是博客名称，支持中文。例如:```hexo new 博客基础环境搭建（非常详细）```。\n2. 则在博客的\"source/_posts/\"目录下生产一个，同名的.md文件，例如\"hexo博客基础环境搭建（非常详细）.md\"，此文件就是我们的博客源文件，修改此文件，把博客内容写进去，然后使用前面提到的,```hexo clean``` ```hexo g -d```,即可完成编译和发布。\n3. **.md是markdown语言写的文件，非常简洁和灵活，至于如何使用.md文件写博客，将在后续的博客中陆续更新。本篇文章即是用此方法编写完成。对于我这个新手来说，入门还是比较简单的。**\n\n## The End！ Have Fun！","slug":"hexo博客基础环境搭建","published":1,"updated":"2021-02-07T09:42:06.000Z","comments":1,"layout":"post","photos":[],"_id":"clqdww77h000wz4ltdsf93xpi","content":"<h2 id=\"【背景】\"><a href=\"#【背景】\" class=\"headerlink\" title=\"【背景】\"></a><strong>【背景】</strong></h2><p style=\"text-indent:2em\">\n我是一名学财务的文科生，没有任何计算机基础，但是喜欢写文章，之前都是在微信公众号上写，但是有诸多限制，于是萌生了想搭建一个自己的博客的念头。我把我的想法告诉了我的一个朋友（姑且称他为X君吧），X君帮我搭建了一个网站，并把过程写了一个简单的教程并讲给我听。我根据X君的教程和讲解，自己也把环境搭建起来了。在这里做一个记录。算是在新博客网站中的第一篇文章吧。\n</p>\n\n<h2 id=\"【目标】\"><a href=\"#【目标】\" class=\"headerlink\" title=\"【目标】\"></a><strong>【目标】</strong></h2><ol>\n<li>使用nodejs的hexo搭建本地博客系统</li>\n<li>使用git进行版本管理（和小伙伴们协同工作的必备良兔（tool））</li>\n<li>使用github进行代码托管（X君告诉我自己写的东西可以上传到这个网站，可以当作一个本地的备份，也可以随时随地工作，但是要注意隐私问题）</li>\n<li>使用github Page作为博客网站的访问（X君说这是一个免费的个人网页托管服务器，不是很懂，反正就是能通过他自定义并在公网上访问自己的文章）</li>\n</ol>\n<h2 id=\"【小白科普】\"><a href=\"#【小白科普】\" class=\"headerlink\" title=\"【小白科普】\"></a><strong>【小白科普】</strong></h2><ol>\n<li><strong>运行环境</strong><ul>\n<li>任何软件的运行都需要环境，比如win10需要在笔记本电脑上运行，andriod需要在手机上运行；笔记本电脑和手机就是win10和android这俩软件的运行环境。</li>\n<li>操作系统是一个特殊的软件，他们为其他软件的运行提供环境，比如QQ、微信都需要安装在win10、ios或android操作系统上才能运行，只不过他们要求的格式不一样，win10可以运行exe软件，ios可以运行dmg文件，andriod运行pkg文件等。</li>\n<li>针对那些没有可视化交互界面的软件，操作系统会给他们提供一个特殊的运行环境。比如win10的cmd运行环境，mac的bash环境，androi也有只不过我们在手机上不常用。（不太好理解，但是可以类比win10需要笔记本电脑提供环境，QQ需要win10操作系统提供环境，python等没有界面的软件需要cmd提供环境一样类比着理解）。</li>\n<li>python、nodejs、mysql等这些都是没有可视化交互界面的软件，所以需要我们在cmd或者bash中运行（X君说python和nodejs也有图形交互界面，但是为了让我更好的理解这些概念，所以就不推荐我使用）。</li>\n</ul>\n</li>\n<li><strong>环境变量</strong><ul>\n<li>上面提到了运行环境，但是我按X君的教程搭建环境的时候，经常<strong>提示某某文件后文件夹找不见</strong>，于是X君又给我普及了<strong>环境变量</strong>的概念。</li>\n<li>当我们使用cmd或bash运行一个软件时，会以以下顺序执行：<ul>\n<li>首先会在<strong>当前目录</strong>中寻找是否有该软件（例如python.exe）；</li>\n<li>如果没有则会在<strong>当前用户的PATH环境变量指定的所有目录中按先后顺序循环寻找</strong>，如果找到了就直接运行，不再往下找。这个PATH就是一个环境变量（可以理解为一个字符串），存放了一堆的文件夹目录，win10是以“;”隔开，mac是以“：”隔开，大概长下面这个样子。<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/Users/abbywalker/opt/anaconda3/bin:/Users/abbywalker/opt/anaconda3/condabin:/Library/Frameworks/Python.framework/Versions/3.8/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/mysql/bin</span><br></pre></td></tr></table></figure></li>\n<li>如果还没有则会继续在<strong>系统的PATH环境变量指定的所有目录中按先后顺序循环寻找</strong></li>\n<li>如果还是找不到，就会报错<strong>提示某某文件后文件夹找不见</strong></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>运行软件的5个方法</strong><ul>\n<li>根据上面环境变量的介绍，运行软件可以有5种方法</li>\n<li>直接到该软件的安装目录下运行 （对应于环境变量中的<strong>当前目录</strong>）</li>\n<li>把该软件的安装目录加入到<strong>该用户的PATH变量</strong>中（具体方法后面讲）</li>\n<li>在当前运行的cmd或bash中临时指定，而不影响其他的程序运行（X君建议使用这种方法，这样可以同一个电脑安装多版本的软件，比如同时安装python2.7和3.7，通过这种方法临时指定当前运行的环境而不影响其他程序）（具体方法后面讲）</li>\n<li>把该软件的安装目录加入到<strong>系统的PATH变量</strong>中（具体方法后面讲）</li>\n<li>直接指定该软件安装目录的绝对路径进行执行，例如:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;/usr/local/mysql/bin/python <span class=\"comment\">#mac的bash环境</span></span><br><span class=\"line\">&gt;d:\\soft\\pytthon\\python.exe <span class=\"comment\">#win10的cmd环境</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n<p style=\"text-indent:2em\">\n<b>好了，小白科普到此结束，下面进入本文正题。</b>\n</p>\n\n<h2 id=\"【环境准备】\"><a href=\"#【环境准备】\" class=\"headerlink\" title=\"【环境准备】\"></a><strong>【环境准备】</strong></h2><ol>\n<li>安装git</li>\n<li>安装nodejs</li>\n<li>安装hexo</li>\n<li>github搭建源文件个人仓库</li>\n<li><strong>github设置多Page</strong>（默认一个账户只能有一个主页Page）</li>\n<li>生产SSH并添加到github</li>\n<li>将hexo发布到github</li>\n<li>页面访问（本地预览和公网访问）</li>\n</ol>\n<p style=\"text-indent:2em\">\nPS：X君用的是windows，我用的是mac所以教程会写两份。\n</p>\n\n<h3 id=\"安装git\"><a href=\"#安装git\" class=\"headerlink\" title=\"安装git\"></a><strong>安装git</strong></h3><ol>\n<li>windows的比较简单，直接下载软件，一路下一步即可；</li>\n<li>mac上安装稍微复杂一点，安装过程记录以下；<ul>\n<li>百度搜索 mac git安装，会提示到 <a href=\"https://git-scm.com/download/mac\">git-scm</a>去安装</li>\n<li>页面是英文的，按第一个教程，先安装<strong>homebrew</strong>,按照homebrew官网的提示，第一种方法直接安装,<code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;</code>需要翻墙 <strong>【失败】</strong>，按官网第二种方法，先下载下来，然后解压，会报错，好不容易解压出来了，运行依然会报错。<strong>【失败】</strong>。<strong>建议大家不要按这个方法安装，当然有兴趣的可以自己尝试。</strong></li>\n<li>鉴于<strong>homebrew</strong>的教训，所以<strong>XCode</strong>的方式，我也没有尝试。</li>\n<li>直接使用第三种方式，<strong>Binary installer</strong>，下载sourceforge编译好的安装包，虽然不是最新版，但是不影响咱们的使用。<strong>直接下载zip文件，解压出dmg文件，安装即可。</strong></li>\n</ul>\n</li>\n</ol>\n<h3 id=\"安装nodejs\"><a href=\"#安装nodejs\" class=\"headerlink\" title=\"安装nodejs\"></a><strong>安装nodejs</strong></h3><ol>\n<li>windows和mac上都比较简单，直接下载软件，一路下一步即可；</li>\n</ol>\n<h3 id=\"安装hexo\"><a href=\"#安装hexo\" class=\"headerlink\" title=\"安装hexo\"></a><strong>安装hexo</strong></h3><p>&ensp;&ensp;&ensp;&ensp;<strong>windows和mac是一样的</strong></p>\n<ol>\n<li><strong>在nodejs环境中（cmd或者bash）安装hexo包</strong>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></li>\n<li><strong>测试hexo是否成功</strong><ul>\n<li>初始化<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo init myBlog</span><br></pre></td></tr></table></figure></li>\n<li>安装基础环境包 <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> myBlog</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n<p style=\"text-indent:2em\">\n执行成功后，myBlog文件夹的结构如下:\n</p>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">myBlog</span><br><span class=\"line\">├── _config.yml <span class=\"comment\"># 网站的配置信息，您可以在此配置大部分的参数。 </span></span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── scaffolds <span class=\"comment\"># 模版文件夹</span></span><br><span class=\"line\">├── <span class=\"built_in\">source</span>  <span class=\"comment\"># 资源文件夹，除 _posts 文件，其他以下划线_开头的文件或者文件夹不会被编译打包到public文件夹</span></span><br><span class=\"line\">|   ├── _drafts <span class=\"comment\"># 草稿文件</span></span><br><span class=\"line\">|   └── _posts <span class=\"comment\"># 文章Markdowm文件 </span></span><br><span class=\"line\">└── themes  <span class=\"comment\"># 主题文件夹</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>本地启动hexo服务器进行测试  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo s</span><br></pre></td></tr></table></figure>\n&ensp;&ensp;&ensp;&ensp;在浏览器中输入<strong><a href=\"http://localhost:4000/\">http://localhost:4000</a></strong>，如果看到如下效果，则证明hexo环境搭建成功:<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/hexo-hello.png\" class title=\"初始化\"></li>\n</ul>\n<h3 id=\"github搭建个人源码仓库\"><a href=\"#github搭建个人源码仓库\" class=\"headerlink\" title=\"github搭建个人源码仓库\"></a><strong>github搭建个人源码仓库</strong></h3><p style=\"text-indent:2em\">\n   <font color=\"red\">  \n   根据X君的建议，为了保证隐私安全和版权，自己写的博客的<b>源文件</b>单独保存在一个github仓库里，供自己使用；把hexo编译后的<b>发布版本</b>保存在另外一个github仓库里,通过github Page供大家访问。\n   </font>\n</p>\n\n<ol>\n<li>注册github（略）。</li>\n<li>登录github（略）</li>\n<li>新建个人仓库 <strong>（建议私人库）</strong><img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new.png\" class title=\"点击新建按钮\">\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new_config.png\" class title=\"填入相关信息\"></li>\n<li>导出个人仓库<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/unclevicky/myBlogSrc.git .</span><br></pre></td></tr></table></figure></li>\n<li>把刚建立的<strong>myBlog文件下的所有内容</strong>放到刚导出的github目录，然后再提交<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit -m <span class=\"string\">&quot;第一次提交我的blog&quot;</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"github设置多Page\"><a href=\"#github设置多Page\" class=\"headerlink\" title=\"github设置多Page\"></a><strong>github设置多Page</strong></h3><ol>\n<li><p><font color=\"red\">直接使用github个人主页</font></p>\n<ul>\n<li>一个github主页只能有一个个人主页</li>\n<li>新建一个<strong>与账户同名的xxxx.github.io</strong> (xxxx是你自己的账户名，X君的是unclevicky.github.io)</li>\n<li><strong>记录下这个特殊仓库的git地址供后面使用</strong>,<a href=\"https://github.com/unclevicky/unclevicky.github.io.git\">https://github.com/unclevicky/unclevicky.github.io.git</a></li>\n</ul>\n</li>\n<li><p><font color=\"red\"><b>利用每个项目的GitHub Pages实现多主页访问</b></font></p>\n<ul>\n<li>新建一个仓库项目，方法同上<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new.png\" class title=\"点击新建按钮\"></li>\n<li>输入项目名称等信息(建议公开项目,不公开也行其实)，截图里用的名字是”myBlogPub”，写教程的时候已经改成了”rabbitBear”。可根据需要自己修改。<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new_pub.png\" class title=\"填入相关信息\"></li>\n<li>在github中配置页面，向下滚动<b>设置项目GitHub Pages信息</b><img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_setting.png\" class title=\"设置GitHub Pages\">\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_pub_page.png\" class title=\"设置GitHub Pages\"></li>\n<li>记住两个地址<ul>\n<li><strong>记住项目仓库的地址，后面配置hexo发布时使用</strong>,<a href=\"https://github.com/unclevicky/rabbitBear.git\">https://github.com/unclevicky/rabbitBear.git</a></li>\n<li><strong>记住项目Github Page地址，后面访问博客时使用</strong>,<a href=\"https://unclevicky.github.io/rabbitBear/\">https://unclevicky.github.io/rabbitBear/</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"生产SSH并添加到github\"><a href=\"#生产SSH并添加到github\" class=\"headerlink\" title=\"生产SSH并添加到github\"></a><strong>生产SSH并添加到github</strong></h3><ol>\n<li><p>配置一个SSH绑定到github，SSH一个是私钥，一个是公钥，私钥保存到个人本地（千万别泄露），公钥配置到github上。（不太懂，反正类似我党当年在小黑板上登一个报纸-公钥，每个人拿自己的暗号-私钥，去破解想要的信息一样。同一份报纸，每个人私钥不同，获取的情报也不同一样。姑且这理解吧）。</p>\n</li>\n<li><p>回到本地的git环境,设置github用户的全局用户和邮箱，如果已设置可以忽略。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 使用以下语句检测是否设置，如果返回为空，则证明未设置</span></span><br><span class=\"line\">git config user.name</span><br><span class=\"line\">git config user.email</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 如果没设置，则使用下面两句话设置即可</span></span><br><span class=\"line\">git config --global user.name <span class=\"string\">&quot;yourname&quot;</span></span><br><span class=\"line\">git config --global user.email <span class=\"string\">&quot;youremail&quot;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>然后创建SSH,使用以下语句，然后一路回车</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># windows的话使用cmd环境,xxxx是你的windows用户</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> c:/users/xxxx/.ssh/ </span><br><span class=\"line\"><span class=\"comment\"># mac的话使用bash环境,$HOME也是一个环境变量（参考上面），指向当前用户的home目录</span></span><br><span class=\"line\"><span class=\"comment\"># cd $HOME/.ssh/</span></span><br><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">&quot;youremail&quot;</span></span><br></pre></td></tr></table></figure>\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/git_ssh.png\" class title=\"SSH秘钥截图\">\n</li>\n<li><p>将SSH的公钥，绑定到github上。</p>\n<ul>\n<li>打开上面的<strong>id_rsa.pub</strong>文件，把所有的内容拷贝下来</li>\n<li>粘贴到github的SSH里面<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_ssh.png\" class title=\"用户配置页面截图\">\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_ssh_new.png\" class title=\"SSH配置页面截图\">\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_ssh_newdetail.png\" class title=\"新建配置截图\"></li>\n</ul>\n</li>\n<li><p>在本地cmd或bash环境测试秘钥是否成功</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># windows的话使用cmd环境,xxxx是你的windows用户</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> c:/users/xxxx/.ssh/ </span><br><span class=\"line\"><span class=\"comment\"># mac的话使用bash环境,$HOME也是一个环境变量（参考上面），指向当前用户的home目录</span></span><br><span class=\"line\"><span class=\"comment\"># cd $HOME/.ssh/</span></span><br><span class=\"line\">ssh -T git@github.com</span><br></pre></td></tr></table></figure>\n<p>如果，显示<code>Hi unclevicky! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code>,说明成功了。</p>\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/ssh_suc.png\" class title=\"SSH配置成功截图\"></li>\n<li><p><strong>不成功的可能原因</strong></p>\n<ul>\n<li>如果不成功，加入-v参数，则使用以下命令，查看失败原因<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -T -v git@github.com </span><br></pre></td></tr></table></figure></li>\n<li>X君第一次也失败，使用-v查看调试信息之后发现，是找不到秘钥。这个问题，是绝对路径和相对路径造成的，所以在.ssh的目录下，新建一个<strong>config</strong>的文件，制定秘钥的绝对路径即可:<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/git_ssh.png\" class title=\"SSH秘钥截图\">\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Host github.com</span><br><span class=\"line\">User xxxx@xx.com <span class=\"comment\"># 你的邮箱地址</span></span><br><span class=\"line\">Hostname ssh.github.com</span><br><span class=\"line\">PreferredAuthentications publickey</span><br><span class=\"line\">IdentityFile C:\\\\Users\\\\xxxx\\\\.ssh\\\\id_rsa <span class=\"comment\"># 你的私钥的保存路径和名字</span></span><br><span class=\"line\">Port 443</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n<h3 id=\"将hexo发布到github\"><a href=\"#将hexo发布到github\" class=\"headerlink\" title=\"将hexo发布到github\"></a><strong>将hexo发布到github</strong></h3><ol>\n<li>hexo本地环境测试【√】；github Page完成【√】；ssh配置完成【√】。剩下就是修改hexo的配置文件，然后发布到github page上，即可访问。</li>\n<li>修改hexo博客目录的配置文件**_config.yml**,找到 <strong>“url:”</strong> 和 <strong>“deploy:”</strong><p style=\"text-indent:2em\">\n<font color=\"red\">\n<b>\n\n特殊说明：<ul>\n<li>如果github使用的“直接使用github个人主页”方法，根据上面让记住的连接，url和deploy的配置为：</li></ul></b>\n</font></p></li>\n\n\n</ol>\n<p></p>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url: https://unclevicky.github.io</span><br><span class=\"line\">root: /</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  <span class=\"built_in\">type</span>: git</span><br><span class=\"line\">  repo: https://github.com/unclevicky/unclevicky.github.io.git</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p style=\"text-indent:2em\">\n   <font color=\"red\">\n   <b>\n\n<ul>\n<li>如果github使用的“项目的GitHub Pages实现多主页”方法，根据上面让记住的连接，url需要指定具体的项目名称，url和deploy的配置为：   </li></ul></b>\n   </font>\n</p>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url: https://unclevicky.github.io/rabbitBear/</span><br><span class=\"line\">root: /rabbitBear</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  <span class=\"built_in\">type</span>: git</span><br><span class=\"line\">  repo: https://github.com/unclevicky/rabbitBear.git</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>项目的GitHub Pages实现多主页的配置如下</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># URL</span></span><br><span class=\"line\"><span class=\"comment\">## If your site is put in a subdirectory, set url as &#x27;http://example.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class=\"line\">url: https://unclevicky.github.io/rabbitBear/</span><br><span class=\"line\">root: /rabbitBear</span><br><span class=\"line\">permalink: :year/:month/:day/:title/</span><br><span class=\"line\">permalink_defaults:</span><br><span class=\"line\">pretty_urls:</span><br><span class=\"line\">  trailing_index: <span class=\"literal\">true</span> <span class=\"comment\"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class=\"line\">  trailing_html: <span class=\"literal\">true</span> <span class=\"comment\"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># URL</span></span><br><span class=\"line\"><span class=\"comment\">## If your site is put in a subdirectory, set url as &#x27;http://example.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># Deployment</span></span><br><span class=\"line\"><span class=\"comment\">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  <span class=\"built_in\">type</span>: git</span><br><span class=\"line\">  repo: https://github.com/unclevicky/rabbitBear.git</span><br><span class=\"line\">  branch: main</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>在本地执行hexo的编译和发布命令，则可成功发布到github上<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean <span class=\"comment\"># 删除以前的发布</span></span><br><span class=\"line\">hexo g -d  <span class=\"comment\"># 重新编译生成，并按配置文件中的github信息，发布到对应的网站上</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"公网访问访问博客主页\"><a href=\"#公网访问访问博客主页\" class=\"headerlink\" title=\"公网访问访问博客主页\"></a><strong>公网访问访问博客主页</strong></h3><ol>\n<li><font color=\"red\"><b>直接个人主页方式</b></font><br><a href=\"https://xxxx.github.io/%EF%BC%8Cxxxx%E6%98%AF%E4%BD%A0%E7%9A%84github%E7%94%A8%E6%88%B7%E5%90%8D\">https://xxxx.github.io/，xxxx是你的github用户名</a><br>例如：<a href=\"https://unclevicky.github.io/\">https://unclevicky.github.io/</a></li>\n<li><font color=\"red\"><b>项目多主页方式</b></font><br><a href=\"https://xxxx.github.io/yyyy/%EF%BC%8Cxxxx%E6%98%AF%E4%BD%A0%E7%9A%84github%E7%94%A8%E6%88%B7%E5%90%8D,yyyy%E6%98%AF%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%90%8D\">https://xxxx.github.io/yyyy/，xxxx是你的github用户名,yyyy是你的项目名</a><br>例如：<a href=\"https://unclevicky.github.io/rabbitBear/\">https://unclevicky.github.io/rabbitBear/</a></li>\n</ol>\n<h2 id=\"修改博客样式\"><a href=\"#修改博客样式\" class=\"headerlink\" title=\"修改博客样式\"></a><strong>修改博客样式</strong></h2><ol>\n<li>默认的样式不是很好看，可以自己DIY样式和功能，比如统计访问量、设置分类、增加订阅、回复等功能，这也是为什么要搭建自己模块的原因。<strong>DIY！</strong></li>\n<li>当然也可以使用网上那些达人们已经diy好的样式，比如X君给我推荐的buterfly这款样式。<ul>\n<li>下载样式到博客的themes目录，在线安装和手工下载都可以。以butterfly为例<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在cmd或bash下执行</span></span><br><span class=\"line\"><span class=\"comment\"># 下载并安装样式文件</span></span><br><span class=\"line\">npm i hexo-theme-butterfly</span><br><span class=\"line\"><span class=\"comment\"># 下载并安装该样式需要的插件，每个样式需要的插件不一样，根据实际需要来，否则有些样式显示不出来</span></span><br><span class=\"line\">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>hexo博客目录的配置文件**_config.yml**，找到”theme”，修改成刚下载的”butterfly”<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Extensions</span></span><br><span class=\"line\"><span class=\"comment\">## Plugins: https://hexo.io/plugins/</span></span><br><span class=\"line\"><span class=\"comment\">## Themes: https://hexo.io/themes/</span></span><br><span class=\"line\">theme: butterfly</span><br></pre></td></tr></table></figure></li>\n<li>最终效果如下<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/butterfly.png\" class title=\"butterfly样式效果\"></li>\n</ol>\n<h2 id=\"写新博客\"><a href=\"#写新博客\" class=\"headerlink\" title=\"写新博客\"></a><strong>写新博客</strong></h2><ol>\n<li>在<strong>源文件</strong>的根目录执行，<code>hexo new xxxx</code>,xxxx是博客名称，支持中文。例如:<code>hexo new 博客基础环境搭建（非常详细）</code>。</li>\n<li>则在博客的”source&#x2F;_posts&#x2F;“目录下生产一个，同名的.md文件，例如”hexo博客基础环境搭建（非常详细）.md”，此文件就是我们的博客源文件，修改此文件，把博客内容写进去，然后使用前面提到的,<code>hexo clean</code> <code>hexo g -d</code>,即可完成编译和发布。</li>\n<li><strong>.md是markdown语言写的文件，非常简洁和灵活，至于如何使用.md文件写博客，将在后续的博客中陆续更新。本篇文章即是用此方法编写完成。对于我这个新手来说，入门还是比较简单的。</strong></li>\n</ol>\n<h2 id=\"The-End！-Have-Fun！\"><a href=\"#The-End！-Have-Fun！\" class=\"headerlink\" title=\"The End！ Have Fun！\"></a>The End！ Have Fun！</h2>","cover":false,"excerpt":"","more":"<h2 id=\"【背景】\"><a href=\"#【背景】\" class=\"headerlink\" title=\"【背景】\"></a><strong>【背景】</strong></h2><p style=\"text-indent:2em\">\n我是一名学财务的文科生，没有任何计算机基础，但是喜欢写文章，之前都是在微信公众号上写，但是有诸多限制，于是萌生了想搭建一个自己的博客的念头。我把我的想法告诉了我的一个朋友（姑且称他为X君吧），X君帮我搭建了一个网站，并把过程写了一个简单的教程并讲给我听。我根据X君的教程和讲解，自己也把环境搭建起来了。在这里做一个记录。算是在新博客网站中的第一篇文章吧。\n</p>\n\n<h2 id=\"【目标】\"><a href=\"#【目标】\" class=\"headerlink\" title=\"【目标】\"></a><strong>【目标】</strong></h2><ol>\n<li>使用nodejs的hexo搭建本地博客系统</li>\n<li>使用git进行版本管理（和小伙伴们协同工作的必备良兔（tool））</li>\n<li>使用github进行代码托管（X君告诉我自己写的东西可以上传到这个网站，可以当作一个本地的备份，也可以随时随地工作，但是要注意隐私问题）</li>\n<li>使用github Page作为博客网站的访问（X君说这是一个免费的个人网页托管服务器，不是很懂，反正就是能通过他自定义并在公网上访问自己的文章）</li>\n</ol>\n<h2 id=\"【小白科普】\"><a href=\"#【小白科普】\" class=\"headerlink\" title=\"【小白科普】\"></a><strong>【小白科普】</strong></h2><ol>\n<li><strong>运行环境</strong><ul>\n<li>任何软件的运行都需要环境，比如win10需要在笔记本电脑上运行，andriod需要在手机上运行；笔记本电脑和手机就是win10和android这俩软件的运行环境。</li>\n<li>操作系统是一个特殊的软件，他们为其他软件的运行提供环境，比如QQ、微信都需要安装在win10、ios或android操作系统上才能运行，只不过他们要求的格式不一样，win10可以运行exe软件，ios可以运行dmg文件，andriod运行pkg文件等。</li>\n<li>针对那些没有可视化交互界面的软件，操作系统会给他们提供一个特殊的运行环境。比如win10的cmd运行环境，mac的bash环境，androi也有只不过我们在手机上不常用。（不太好理解，但是可以类比win10需要笔记本电脑提供环境，QQ需要win10操作系统提供环境，python等没有界面的软件需要cmd提供环境一样类比着理解）。</li>\n<li>python、nodejs、mysql等这些都是没有可视化交互界面的软件，所以需要我们在cmd或者bash中运行（X君说python和nodejs也有图形交互界面，但是为了让我更好的理解这些概念，所以就不推荐我使用）。</li>\n</ul>\n</li>\n<li><strong>环境变量</strong><ul>\n<li>上面提到了运行环境，但是我按X君的教程搭建环境的时候，经常<strong>提示某某文件后文件夹找不见</strong>，于是X君又给我普及了<strong>环境变量</strong>的概念。</li>\n<li>当我们使用cmd或bash运行一个软件时，会以以下顺序执行：<ul>\n<li>首先会在<strong>当前目录</strong>中寻找是否有该软件（例如python.exe）；</li>\n<li>如果没有则会在<strong>当前用户的PATH环境变量指定的所有目录中按先后顺序循环寻找</strong>，如果找到了就直接运行，不再往下找。这个PATH就是一个环境变量（可以理解为一个字符串），存放了一堆的文件夹目录，win10是以“;”隔开，mac是以“：”隔开，大概长下面这个样子。<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">/Users/abbywalker/opt/anaconda3/bin:/Users/abbywalker/opt/anaconda3/condabin:/Library/Frameworks/Python.framework/Versions/3.8/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/mysql/bin</span><br></pre></td></tr></table></figure></li>\n<li>如果还没有则会继续在<strong>系统的PATH环境变量指定的所有目录中按先后顺序循环寻找</strong></li>\n<li>如果还是找不到，就会报错<strong>提示某某文件后文件夹找不见</strong></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>运行软件的5个方法</strong><ul>\n<li>根据上面环境变量的介绍，运行软件可以有5种方法</li>\n<li>直接到该软件的安装目录下运行 （对应于环境变量中的<strong>当前目录</strong>）</li>\n<li>把该软件的安装目录加入到<strong>该用户的PATH变量</strong>中（具体方法后面讲）</li>\n<li>在当前运行的cmd或bash中临时指定，而不影响其他的程序运行（X君建议使用这种方法，这样可以同一个电脑安装多版本的软件，比如同时安装python2.7和3.7，通过这种方法临时指定当前运行的环境而不影响其他程序）（具体方法后面讲）</li>\n<li>把该软件的安装目录加入到<strong>系统的PATH变量</strong>中（具体方法后面讲）</li>\n<li>直接指定该软件安装目录的绝对路径进行执行，例如:<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&gt;/usr/local/mysql/bin/python <span class=\"comment\">#mac的bash环境</span></span><br><span class=\"line\">&gt;d:\\soft\\pytthon\\python.exe <span class=\"comment\">#win10的cmd环境</span></span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n<p style=\"text-indent:2em\">\n<b>好了，小白科普到此结束，下面进入本文正题。</b>\n</p>\n\n<h2 id=\"【环境准备】\"><a href=\"#【环境准备】\" class=\"headerlink\" title=\"【环境准备】\"></a><strong>【环境准备】</strong></h2><ol>\n<li>安装git</li>\n<li>安装nodejs</li>\n<li>安装hexo</li>\n<li>github搭建源文件个人仓库</li>\n<li><strong>github设置多Page</strong>（默认一个账户只能有一个主页Page）</li>\n<li>生产SSH并添加到github</li>\n<li>将hexo发布到github</li>\n<li>页面访问（本地预览和公网访问）</li>\n</ol>\n<p style=\"text-indent:2em\">\nPS：X君用的是windows，我用的是mac所以教程会写两份。\n</p>\n\n<h3 id=\"安装git\"><a href=\"#安装git\" class=\"headerlink\" title=\"安装git\"></a><strong>安装git</strong></h3><ol>\n<li>windows的比较简单，直接下载软件，一路下一步即可；</li>\n<li>mac上安装稍微复杂一点，安装过程记录以下；<ul>\n<li>百度搜索 mac git安装，会提示到 <a href=\"https://git-scm.com/download/mac\">git-scm</a>去安装</li>\n<li>页面是英文的，按第一个教程，先安装<strong>homebrew</strong>,按照homebrew官网的提示，第一种方法直接安装,<code>/bin/bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)&quot;</code>需要翻墙 <strong>【失败】</strong>，按官网第二种方法，先下载下来，然后解压，会报错，好不容易解压出来了，运行依然会报错。<strong>【失败】</strong>。<strong>建议大家不要按这个方法安装，当然有兴趣的可以自己尝试。</strong></li>\n<li>鉴于<strong>homebrew</strong>的教训，所以<strong>XCode</strong>的方式，我也没有尝试。</li>\n<li>直接使用第三种方式，<strong>Binary installer</strong>，下载sourceforge编译好的安装包，虽然不是最新版，但是不影响咱们的使用。<strong>直接下载zip文件，解压出dmg文件，安装即可。</strong></li>\n</ul>\n</li>\n</ol>\n<h3 id=\"安装nodejs\"><a href=\"#安装nodejs\" class=\"headerlink\" title=\"安装nodejs\"></a><strong>安装nodejs</strong></h3><ol>\n<li>windows和mac上都比较简单，直接下载软件，一路下一步即可；</li>\n</ol>\n<h3 id=\"安装hexo\"><a href=\"#安装hexo\" class=\"headerlink\" title=\"安装hexo\"></a><strong>安装hexo</strong></h3><p>&ensp;&ensp;&ensp;&ensp;<strong>windows和mac是一样的</strong></p>\n<ol>\n<li><strong>在nodejs环境中（cmd或者bash）安装hexo包</strong>  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">npm install -g hexo-cli</span><br></pre></td></tr></table></figure></li>\n<li><strong>测试hexo是否成功</strong><ul>\n<li>初始化<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo init myBlog</span><br></pre></td></tr></table></figure></li>\n<li>安装基础环境包 <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"built_in\">cd</span> myBlog</span><br><span class=\"line\">npm install</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n<p style=\"text-indent:2em\">\n执行成功后，myBlog文件夹的结构如下:\n</p>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">myBlog</span><br><span class=\"line\">├── _config.yml <span class=\"comment\"># 网站的配置信息，您可以在此配置大部分的参数。 </span></span><br><span class=\"line\">├── package.json</span><br><span class=\"line\">├── scaffolds <span class=\"comment\"># 模版文件夹</span></span><br><span class=\"line\">├── <span class=\"built_in\">source</span>  <span class=\"comment\"># 资源文件夹，除 _posts 文件，其他以下划线_开头的文件或者文件夹不会被编译打包到public文件夹</span></span><br><span class=\"line\">|   ├── _drafts <span class=\"comment\"># 草稿文件</span></span><br><span class=\"line\">|   └── _posts <span class=\"comment\"># 文章Markdowm文件 </span></span><br><span class=\"line\">└── themes  <span class=\"comment\"># 主题文件夹</span></span><br></pre></td></tr></table></figure>\n<ul>\n<li>本地启动hexo服务器进行测试  <figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo s</span><br></pre></td></tr></table></figure>\n&ensp;&ensp;&ensp;&ensp;在浏览器中输入<strong><a href=\"http://localhost:4000/\">http://localhost:4000</a></strong>，如果看到如下效果，则证明hexo环境搭建成功:<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/hexo-hello.png\" class title=\"初始化\"></li>\n</ul>\n<h3 id=\"github搭建个人源码仓库\"><a href=\"#github搭建个人源码仓库\" class=\"headerlink\" title=\"github搭建个人源码仓库\"></a><strong>github搭建个人源码仓库</strong></h3><p style=\"text-indent:2em\">\n   <font color=\"red\">  \n   根据X君的建议，为了保证隐私安全和版权，自己写的博客的<b>源文件</b>单独保存在一个github仓库里，供自己使用；把hexo编译后的<b>发布版本</b>保存在另外一个github仓库里,通过github Page供大家访问。\n   </font>\n</p>\n\n<ol>\n<li>注册github（略）。</li>\n<li>登录github（略）</li>\n<li>新建个人仓库 <strong>（建议私人库）</strong><img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new.png\" class title=\"点击新建按钮\">\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new_config.png\" class title=\"填入相关信息\"></li>\n<li>导出个人仓库<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> https://github.com/unclevicky/myBlogSrc.git .</span><br></pre></td></tr></table></figure></li>\n<li>把刚建立的<strong>myBlog文件下的所有内容</strong>放到刚导出的github目录，然后再提交<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git commit -m <span class=\"string\">&quot;第一次提交我的blog&quot;</span></span><br><span class=\"line\">git push</span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"github设置多Page\"><a href=\"#github设置多Page\" class=\"headerlink\" title=\"github设置多Page\"></a><strong>github设置多Page</strong></h3><ol>\n<li><p><font color=\"red\">直接使用github个人主页</font></p>\n<ul>\n<li>一个github主页只能有一个个人主页</li>\n<li>新建一个<strong>与账户同名的xxxx.github.io</strong> (xxxx是你自己的账户名，X君的是unclevicky.github.io)</li>\n<li><strong>记录下这个特殊仓库的git地址供后面使用</strong>,<a href=\"https://github.com/unclevicky/unclevicky.github.io.git\">https://github.com/unclevicky/unclevicky.github.io.git</a></li>\n</ul>\n</li>\n<li><p><font color=\"red\"><b>利用每个项目的GitHub Pages实现多主页访问</b></font></p>\n<ul>\n<li>新建一个仓库项目，方法同上<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new.png\" class title=\"点击新建按钮\"></li>\n<li>输入项目名称等信息(建议公开项目,不公开也行其实)，截图里用的名字是”myBlogPub”，写教程的时候已经改成了”rabbitBear”。可根据需要自己修改。<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_new_pub.png\" class title=\"填入相关信息\"></li>\n<li>在github中配置页面，向下滚动<b>设置项目GitHub Pages信息</b><img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_setting.png\" class title=\"设置GitHub Pages\">\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_pub_page.png\" class title=\"设置GitHub Pages\"></li>\n<li>记住两个地址<ul>\n<li><strong>记住项目仓库的地址，后面配置hexo发布时使用</strong>,<a href=\"https://github.com/unclevicky/rabbitBear.git\">https://github.com/unclevicky/rabbitBear.git</a></li>\n<li><strong>记住项目Github Page地址，后面访问博客时使用</strong>,<a href=\"https://unclevicky.github.io/rabbitBear/\">https://unclevicky.github.io/rabbitBear/</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n<h3 id=\"生产SSH并添加到github\"><a href=\"#生产SSH并添加到github\" class=\"headerlink\" title=\"生产SSH并添加到github\"></a><strong>生产SSH并添加到github</strong></h3><ol>\n<li><p>配置一个SSH绑定到github，SSH一个是私钥，一个是公钥，私钥保存到个人本地（千万别泄露），公钥配置到github上。（不太懂，反正类似我党当年在小黑板上登一个报纸-公钥，每个人拿自己的暗号-私钥，去破解想要的信息一样。同一份报纸，每个人私钥不同，获取的情报也不同一样。姑且这理解吧）。</p>\n</li>\n<li><p>回到本地的git环境,设置github用户的全局用户和邮箱，如果已设置可以忽略。</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 使用以下语句检测是否设置，如果返回为空，则证明未设置</span></span><br><span class=\"line\">git config user.name</span><br><span class=\"line\">git config user.email</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 如果没设置，则使用下面两句话设置即可</span></span><br><span class=\"line\">git config --global user.name <span class=\"string\">&quot;yourname&quot;</span></span><br><span class=\"line\">git config --global user.email <span class=\"string\">&quot;youremail&quot;</span></span><br></pre></td></tr></table></figure></li>\n<li><p>然后创建SSH,使用以下语句，然后一路回车</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># windows的话使用cmd环境,xxxx是你的windows用户</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> c:/users/xxxx/.ssh/ </span><br><span class=\"line\"><span class=\"comment\"># mac的话使用bash环境,$HOME也是一个环境变量（参考上面），指向当前用户的home目录</span></span><br><span class=\"line\"><span class=\"comment\"># cd $HOME/.ssh/</span></span><br><span class=\"line\">ssh-keygen -t rsa -C <span class=\"string\">&quot;youremail&quot;</span></span><br></pre></td></tr></table></figure>\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/git_ssh.png\" class title=\"SSH秘钥截图\">\n</li>\n<li><p>将SSH的公钥，绑定到github上。</p>\n<ul>\n<li>打开上面的<strong>id_rsa.pub</strong>文件，把所有的内容拷贝下来</li>\n<li>粘贴到github的SSH里面<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_ssh.png\" class title=\"用户配置页面截图\">\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_ssh_new.png\" class title=\"SSH配置页面截图\">\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/github_ssh_newdetail.png\" class title=\"新建配置截图\"></li>\n</ul>\n</li>\n<li><p>在本地cmd或bash环境测试秘钥是否成功</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># windows的话使用cmd环境,xxxx是你的windows用户</span></span><br><span class=\"line\"><span class=\"built_in\">cd</span> c:/users/xxxx/.ssh/ </span><br><span class=\"line\"><span class=\"comment\"># mac的话使用bash环境,$HOME也是一个环境变量（参考上面），指向当前用户的home目录</span></span><br><span class=\"line\"><span class=\"comment\"># cd $HOME/.ssh/</span></span><br><span class=\"line\">ssh -T git@github.com</span><br></pre></td></tr></table></figure>\n<p>如果，显示<code>Hi unclevicky! You&#39;ve successfully authenticated, but GitHub does not provide shell access.</code>,说明成功了。</p>\n<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/ssh_suc.png\" class title=\"SSH配置成功截图\"></li>\n<li><p><strong>不成功的可能原因</strong></p>\n<ul>\n<li>如果不成功，加入-v参数，则使用以下命令，查看失败原因<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">ssh -T -v git@github.com </span><br></pre></td></tr></table></figure></li>\n<li>X君第一次也失败，使用-v查看调试信息之后发现，是找不到秘钥。这个问题，是绝对路径和相对路径造成的，所以在.ssh的目录下，新建一个<strong>config</strong>的文件，制定秘钥的绝对路径即可:<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/git_ssh.png\" class title=\"SSH秘钥截图\">\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Host github.com</span><br><span class=\"line\">User xxxx@xx.com <span class=\"comment\"># 你的邮箱地址</span></span><br><span class=\"line\">Hostname ssh.github.com</span><br><span class=\"line\">PreferredAuthentications publickey</span><br><span class=\"line\">IdentityFile C:\\\\Users\\\\xxxx\\\\.ssh\\\\id_rsa <span class=\"comment\"># 你的私钥的保存路径和名字</span></span><br><span class=\"line\">Port 443</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n</ol>\n<h3 id=\"将hexo发布到github\"><a href=\"#将hexo发布到github\" class=\"headerlink\" title=\"将hexo发布到github\"></a><strong>将hexo发布到github</strong></h3><ol>\n<li>hexo本地环境测试【√】；github Page完成【√】；ssh配置完成【√】。剩下就是修改hexo的配置文件，然后发布到github page上，即可访问。</li>\n<li>修改hexo博客目录的配置文件**_config.yml**,找到 <strong>“url:”</strong> 和 <strong>“deploy:”</strong><p style=\"text-indent:2em\">\n<font color=\"red\">\n<b>\n\n特殊说明：<ul>\n<li>如果github使用的“直接使用github个人主页”方法，根据上面让记住的连接，url和deploy的配置为：</li></ul></b>\n</font></p></li>\n\n\n</ol>\n<p></p>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url: https://unclevicky.github.io</span><br><span class=\"line\">root: /</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  <span class=\"built_in\">type</span>: git</span><br><span class=\"line\">  repo: https://github.com/unclevicky/unclevicky.github.io.git</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p style=\"text-indent:2em\">\n   <font color=\"red\">\n   <b>\n\n<ul>\n<li>如果github使用的“项目的GitHub Pages实现多主页”方法，根据上面让记住的连接，url需要指定具体的项目名称，url和deploy的配置为：   </li></ul></b>\n   </font>\n</p>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url: https://unclevicky.github.io/rabbitBear/</span><br><span class=\"line\">root: /rabbitBear</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br><span class=\"line\"></span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  <span class=\"built_in\">type</span>: git</span><br><span class=\"line\">  repo: https://github.com/unclevicky/rabbitBear.git</span><br><span class=\"line\">...</span><br><span class=\"line\">...</span><br></pre></td></tr></table></figure>\n\n<p><strong>项目的GitHub Pages实现多主页的配置如下</strong></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># URL</span></span><br><span class=\"line\"><span class=\"comment\">## If your site is put in a subdirectory, set url as &#x27;http://example.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class=\"line\">url: https://unclevicky.github.io/rabbitBear/</span><br><span class=\"line\">root: /rabbitBear</span><br><span class=\"line\">permalink: :year/:month/:day/:title/</span><br><span class=\"line\">permalink_defaults:</span><br><span class=\"line\">pretty_urls:</span><br><span class=\"line\">  trailing_index: <span class=\"literal\">true</span> <span class=\"comment\"># Set to false to remove trailing &#x27;index.html&#x27; from permalinks</span></span><br><span class=\"line\">  trailing_html: <span class=\"literal\">true</span> <span class=\"comment\"># Set to false to remove trailing &#x27;.html&#x27; from permalinks</span></span><br></pre></td></tr></table></figure>\n\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># URL</span></span><br><span class=\"line\"><span class=\"comment\">## If your site is put in a subdirectory, set url as &#x27;http://example.com/child&#x27; and root as &#x27;/child/&#x27;</span></span><br><span class=\"line\"><span class=\"comment\"># Deployment</span></span><br><span class=\"line\"><span class=\"comment\">## Docs: https://hexo.io/docs/one-command-deployment</span></span><br><span class=\"line\">deploy:</span><br><span class=\"line\">  <span class=\"built_in\">type</span>: git</span><br><span class=\"line\">  repo: https://github.com/unclevicky/rabbitBear.git</span><br><span class=\"line\">  branch: main</span><br></pre></td></tr></table></figure>\n\n<ol start=\"3\">\n<li>在本地执行hexo的编译和发布命令，则可成功发布到github上<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">hexo clean <span class=\"comment\"># 删除以前的发布</span></span><br><span class=\"line\">hexo g -d  <span class=\"comment\"># 重新编译生成，并按配置文件中的github信息，发布到对应的网站上</span></span><br></pre></td></tr></table></figure></li>\n</ol>\n<h3 id=\"公网访问访问博客主页\"><a href=\"#公网访问访问博客主页\" class=\"headerlink\" title=\"公网访问访问博客主页\"></a><strong>公网访问访问博客主页</strong></h3><ol>\n<li><font color=\"red\"><b>直接个人主页方式</b></font><br><a href=\"https://xxxx.github.io/%EF%BC%8Cxxxx%E6%98%AF%E4%BD%A0%E7%9A%84github%E7%94%A8%E6%88%B7%E5%90%8D\">https://xxxx.github.io/，xxxx是你的github用户名</a><br>例如：<a href=\"https://unclevicky.github.io/\">https://unclevicky.github.io/</a></li>\n<li><font color=\"red\"><b>项目多主页方式</b></font><br><a href=\"https://xxxx.github.io/yyyy/%EF%BC%8Cxxxx%E6%98%AF%E4%BD%A0%E7%9A%84github%E7%94%A8%E6%88%B7%E5%90%8D,yyyy%E6%98%AF%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E5%90%8D\">https://xxxx.github.io/yyyy/，xxxx是你的github用户名,yyyy是你的项目名</a><br>例如：<a href=\"https://unclevicky.github.io/rabbitBear/\">https://unclevicky.github.io/rabbitBear/</a></li>\n</ol>\n<h2 id=\"修改博客样式\"><a href=\"#修改博客样式\" class=\"headerlink\" title=\"修改博客样式\"></a><strong>修改博客样式</strong></h2><ol>\n<li>默认的样式不是很好看，可以自己DIY样式和功能，比如统计访问量、设置分类、增加订阅、回复等功能，这也是为什么要搭建自己模块的原因。<strong>DIY！</strong></li>\n<li>当然也可以使用网上那些达人们已经diy好的样式，比如X君给我推荐的buterfly这款样式。<ul>\n<li>下载样式到博客的themes目录，在线安装和手工下载都可以。以butterfly为例<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># 在cmd或bash下执行</span></span><br><span class=\"line\"><span class=\"comment\"># 下载并安装样式文件</span></span><br><span class=\"line\">npm i hexo-theme-butterfly</span><br><span class=\"line\"><span class=\"comment\"># 下载并安装该样式需要的插件，每个样式需要的插件不一样，根据实际需要来，否则有些样式显示不出来</span></span><br><span class=\"line\">npm install hexo-renderer-pug hexo-renderer-stylus --save</span><br></pre></td></tr></table></figure></li>\n</ul>\n</li>\n<li>hexo博客目录的配置文件**_config.yml**，找到”theme”，修改成刚下载的”butterfly”<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"comment\"># Extensions</span></span><br><span class=\"line\"><span class=\"comment\">## Plugins: https://hexo.io/plugins/</span></span><br><span class=\"line\"><span class=\"comment\">## Themes: https://hexo.io/themes/</span></span><br><span class=\"line\">theme: butterfly</span><br></pre></td></tr></table></figure></li>\n<li>最终效果如下<img src=\"/rabbitBear/2021/02/07/hexo%E5%8D%9A%E5%AE%A2%E5%9F%BA%E7%A1%80%E7%8E%AF%E5%A2%83%E6%90%AD%E5%BB%BA/butterfly.png\" class title=\"butterfly样式效果\"></li>\n</ol>\n<h2 id=\"写新博客\"><a href=\"#写新博客\" class=\"headerlink\" title=\"写新博客\"></a><strong>写新博客</strong></h2><ol>\n<li>在<strong>源文件</strong>的根目录执行，<code>hexo new xxxx</code>,xxxx是博客名称，支持中文。例如:<code>hexo new 博客基础环境搭建（非常详细）</code>。</li>\n<li>则在博客的”source&#x2F;_posts&#x2F;“目录下生产一个，同名的.md文件，例如”hexo博客基础环境搭建（非常详细）.md”，此文件就是我们的博客源文件，修改此文件，把博客内容写进去，然后使用前面提到的,<code>hexo clean</code> <code>hexo g -d</code>,即可完成编译和发布。</li>\n<li><strong>.md是markdown语言写的文件，非常简洁和灵活，至于如何使用.md文件写博客，将在后续的博客中陆续更新。本篇文章即是用此方法编写完成。对于我这个新手来说，入门还是比较简单的。</strong></li>\n</ol>\n<h2 id=\"The-End！-Have-Fun！\"><a href=\"#The-End！-Have-Fun！\" class=\"headerlink\" title=\"The End！ Have Fun！\"></a>The End！ Have Fun！</h2>"},{"title":"工程清单（持续更新）","date":"2022-07-07T10:49:35.000Z","_content":"\n## **【背景】**\n<p style=\"text-indent:2em\">\n从小就兴趣广泛，妄想什么都会。诗词歌赋、琴棋书画、天文地理、博古通今……从很多年前开始，就开始给自己挖坑了，但都是懒散的片段，经过这么多年的积累，期待自己把这些整理成册，系统性的总结和沉淀……\n</p>\n\n### **工程清单**</p>\n0. 文艺创作\n\t- 文学\n\t- \n\n1. 博古通今\n\t- 历史\n\t\t- 中国历史\n\t\t- 世界通史\n\t- 周易\n\t\t- 术数学\n\t\n2. 业务\n\t- 整体\n\t\t- 金融体系\n\t\t- 全面风险管理\n\t- 资管\n\t\t- 投研\n\t\t-\n\t- 银行\n\t\t- 信贷\n\t\n3. 方案和架构\n\t- 架构\n\t\t- 业务架构\n\t\t- 技术架构\n\t\t- 数据架构\n\t- 资管方案\n\t\t- 整体蓝图\n\t\t- 数据中台\n\t\t- 投研\n\t\t\t- FOF\n\t\t\t- 投前研究\n\t\t\t- 投后管理\n\t\t\t- 风险控制\n\t\t\t\n4. 方法论\n\t- 咨询\n\t- 管理\n\n5. 兴趣研究\n\t- 量化投资\n\t\t- abu\n\t- 爬虫\n\t- 人工智能\n\t- 机器学习\n\t- 操作系统DIY\n\t- 三国杀\n\t\t- noname\n\t\t- 太阳神\n\n6. 笔记\n\t- 书籍\n\t- 影评\n\t- 教程\n\t- 科普\n\n7. 感悟\n\t- ","source":"_posts/2022-07-07-工程清单（持续更新）.md","raw":"---\ntitle: 工程清单（持续更新）\ndate: 2022-07-07 18:49:35\ncategories:\n- [总览, 目录]\ntags:\n- 工程清单\n- 目录\n---\n\n## **【背景】**\n<p style=\"text-indent:2em\">\n从小就兴趣广泛，妄想什么都会。诗词歌赋、琴棋书画、天文地理、博古通今……从很多年前开始，就开始给自己挖坑了，但都是懒散的片段，经过这么多年的积累，期待自己把这些整理成册，系统性的总结和沉淀……\n</p>\n\n### **工程清单**</p>\n0. 文艺创作\n\t- 文学\n\t- \n\n1. 博古通今\n\t- 历史\n\t\t- 中国历史\n\t\t- 世界通史\n\t- 周易\n\t\t- 术数学\n\t\n2. 业务\n\t- 整体\n\t\t- 金融体系\n\t\t- 全面风险管理\n\t- 资管\n\t\t- 投研\n\t\t-\n\t- 银行\n\t\t- 信贷\n\t\n3. 方案和架构\n\t- 架构\n\t\t- 业务架构\n\t\t- 技术架构\n\t\t- 数据架构\n\t- 资管方案\n\t\t- 整体蓝图\n\t\t- 数据中台\n\t\t- 投研\n\t\t\t- FOF\n\t\t\t- 投前研究\n\t\t\t- 投后管理\n\t\t\t- 风险控制\n\t\t\t\n4. 方法论\n\t- 咨询\n\t- 管理\n\n5. 兴趣研究\n\t- 量化投资\n\t\t- abu\n\t- 爬虫\n\t- 人工智能\n\t- 机器学习\n\t- 操作系统DIY\n\t- 三国杀\n\t\t- noname\n\t\t- 太阳神\n\n6. 笔记\n\t- 书籍\n\t- 影评\n\t- 教程\n\t- 科普\n\n7. 感悟\n\t- ","slug":"工程清单（持续更新）","published":1,"updated":"2025-08-13T23:42:20.736Z","_id":"clqdww77i000xz4lthdkn1ao0","comments":1,"layout":"post","photos":[],"content":"<h2 id=\"【背景】\"><a href=\"#【背景】\" class=\"headerlink\" title=\"【背景】\"></a><strong>【背景】</strong></h2><p style=\"text-indent:2em\">\n从小就兴趣广泛，妄想什么都会。诗词歌赋、琴棋书画、天文地理、博古通今……从很多年前开始，就开始给自己挖坑了，但都是懒散的片段，经过这么多年的积累，期待自己把这些整理成册，系统性的总结和沉淀……\n</p>\n\n<h3 id=\"工程清单\"><a href=\"#工程清单\" class=\"headerlink\" title=\"工程清单\"></a><strong>工程清单</strong><p></p></h3><ol start=\"0\">\n<li><h2 id=\"文艺创作-文学\"><a href=\"#文艺创作-文学\" class=\"headerlink\" title=\"文艺创作 - 文学\"></a>文艺创作<br> - 文学</h2></li>\n<li><p>博古通今</p>\n<ul>\n<li>历史<ul>\n<li>中国历史</li>\n<li>世界通史</li>\n</ul>\n</li>\n<li>周易<ul>\n<li>术数学</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>业务</p>\n<ul>\n<li>整体<ul>\n<li>金融体系</li>\n<li>全面风险管理</li>\n</ul>\n</li>\n<li><h2 id=\"资管-投研\"><a href=\"#资管-投研\" class=\"headerlink\" title=\"资管  - 投研\"></a>资管<br>  - 投研</h2></li>\n<li>银行<ul>\n<li>信贷</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>方案和架构</p>\n<ul>\n<li>架构<ul>\n<li>业务架构</li>\n<li>技术架构</li>\n<li>数据架构</li>\n</ul>\n</li>\n<li>资管方案<ul>\n<li>整体蓝图</li>\n<li>数据中台</li>\n<li>投研<ul>\n<li>FOF</li>\n<li>投前研究</li>\n<li>投后管理</li>\n<li>风险控制</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>方法论</p>\n<ul>\n<li>咨询</li>\n<li>管理</li>\n</ul>\n</li>\n<li><p>兴趣研究</p>\n<ul>\n<li>量化投资<ul>\n<li>abu</li>\n</ul>\n</li>\n<li>爬虫</li>\n<li>人工智能</li>\n<li>机器学习</li>\n<li>操作系统DIY</li>\n<li>三国杀<ul>\n<li>noname</li>\n<li>太阳神</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>笔记</p>\n<ul>\n<li>书籍</li>\n<li>影评</li>\n<li>教程</li>\n<li>科普</li>\n</ul>\n</li>\n<li><h2 id=\"感悟\"><a href=\"#感悟\" class=\"headerlink\" title=\"感悟\"></a>感悟</h2></li>\n</ol>\n","cover":false,"excerpt":"","more":"<h2 id=\"【背景】\"><a href=\"#【背景】\" class=\"headerlink\" title=\"【背景】\"></a><strong>【背景】</strong></h2><p style=\"text-indent:2em\">\n从小就兴趣广泛，妄想什么都会。诗词歌赋、琴棋书画、天文地理、博古通今……从很多年前开始，就开始给自己挖坑了，但都是懒散的片段，经过这么多年的积累，期待自己把这些整理成册，系统性的总结和沉淀……\n</p>\n\n<h3 id=\"工程清单\"><a href=\"#工程清单\" class=\"headerlink\" title=\"工程清单\"></a><strong>工程清单</strong><p></p></h3><ol start=\"0\">\n<li><h2 id=\"文艺创作-文学\"><a href=\"#文艺创作-文学\" class=\"headerlink\" title=\"文艺创作 - 文学\"></a>文艺创作<br> - 文学</h2></li>\n<li><p>博古通今</p>\n<ul>\n<li>历史<ul>\n<li>中国历史</li>\n<li>世界通史</li>\n</ul>\n</li>\n<li>周易<ul>\n<li>术数学</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>业务</p>\n<ul>\n<li>整体<ul>\n<li>金融体系</li>\n<li>全面风险管理</li>\n</ul>\n</li>\n<li><h2 id=\"资管-投研\"><a href=\"#资管-投研\" class=\"headerlink\" title=\"资管  - 投研\"></a>资管<br>  - 投研</h2></li>\n<li>银行<ul>\n<li>信贷</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>方案和架构</p>\n<ul>\n<li>架构<ul>\n<li>业务架构</li>\n<li>技术架构</li>\n<li>数据架构</li>\n</ul>\n</li>\n<li>资管方案<ul>\n<li>整体蓝图</li>\n<li>数据中台</li>\n<li>投研<ul>\n<li>FOF</li>\n<li>投前研究</li>\n<li>投后管理</li>\n<li>风险控制</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>方法论</p>\n<ul>\n<li>咨询</li>\n<li>管理</li>\n</ul>\n</li>\n<li><p>兴趣研究</p>\n<ul>\n<li>量化投资<ul>\n<li>abu</li>\n</ul>\n</li>\n<li>爬虫</li>\n<li>人工智能</li>\n<li>机器学习</li>\n<li>操作系统DIY</li>\n<li>三国杀<ul>\n<li>noname</li>\n<li>太阳神</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>笔记</p>\n<ul>\n<li>书籍</li>\n<li>影评</li>\n<li>教程</li>\n<li>科普</li>\n</ul>\n</li>\n<li><h2 id=\"感悟\"><a href=\"#感悟\" class=\"headerlink\" title=\"感悟\"></a>感悟</h2></li>\n</ol>\n"},{"title":"【自我进化1到2】01.关系中的自我","date":"2021-03-03T16:00:00.000Z","_content":"\n<font color='grey'><font size=2>*这一系列是基于陈海贤老师的自我进化课，用以自我剖析* </b></font>\n\n兔子曾经引以为傲的，是自己的时间管理方法———按分钟计算的，每30min看一下学习状态并及时调整，它帮助兔子一年内一次性7分过雅思，过CPA和CPV考试，写过实证，到过实习，玩过比赛。  \n\n凭借这种打满鸡血的精神状态，我度过了充实圆满的2018、19和20年的大部分时间，直到2020年下半叶，遇到大熊，我的精神节奏被打乱了。  \n\n自控力越来越差，开始频繁发脾气，出问题总想躲避，逃避沟通，对认识新朋友也失去了积极性。  \n\n和大熊认识起初，我拥有独立自由的生活，除了爸妈，我无需向任何人汇报。但随着亲密关系的建立，情感依赖迅速膨胀，我惧怕了。<u>**除了抢占我的时间、空间，它把脆弱年少不完整的自我真实地暴露出来，在我和他面前彰显无遗。望着镜子中的自己，我已记不清对他说了多少次，“这不是我。”** </u> \n\n我用了很久分析原因，一方面是客观因素，工作不稳定，另一方面也是我苦苦想寻求解决的——**并未建立稳定的自我**。  \n\n<u>**没有建立对自我身份的认同，当那些脆弱的部分通过亲密关系，被强行整合进自我概念里，我变得异常排斥，很难接纳自己，“这不是我”。** </u> \n\n所以，我试图探索，“我到底是怎样的”。\n\n开篇说一个词，“关系“。  \n\n\n#### <center>一、自我处在关系中</center>\n\n人无时无刻不处在关系中。\n\n在每一段关系里面，自我是不同的。\n\n大熊说，刚认识我的时候，我每天都笑的很阳光，但后来感觉就没那么积极了。所以我曾质疑，自己是不是变了。\n\n陈海贤老师讲了个故事，在孩子没做完作业的时候，妈妈会大声责备说，你怎么这么不听话！突然电话铃响了，妈妈接起电话，满脸笑容说，“哦，是老师啊，您说来家访，好啊好啊......\"。\n\n曾经，我会把故事理解为“真实自我”和“虚假自我”的差异，但不是的。**从关系的视角来看，它反映的是妈妈在“亲近”和“疏远”这两种不同关系中的差异，妈妈的行为都是真实的自我。所以说，并非个性，而是所处的关系，决定了你的想法和行为。**\n\n从关系的视角思考，会让很多看似无解的问题有了答案。比如说，我对坚持学法语有拖延症，我就进行了如下的剖析。  \n\n<font color='grey'><b>R：学法语有拖延症，怎么办？  \nA：为什么这么想  \nR：在学法语法语的时候，觉得记单词很难，经常不想去学。  \nA：难在哪里呢？如果学的不好，谁会评价你呢？  \nR：是我爷爷Peter。我担心Peter听到我退步的法语，会感到失望。</b></font>\n\n\n到这里，从关系的视角，拖延症就不只是我个人的问题了，而是我和爷爷关系的产物。\n\n\n#### <center>二、关系的视角拓展改变的空间</center>\n\n**妨碍改变的，是头脑中那个顽固的“自我概念”。**\n\n大熊在和我对话过程中发现，我习惯性使用过多“你应该......“。我给自己贴上类似“自信”“努力”的个性标签，同时指责别人为什么会有这样那样古怪的个性。  \n\n**在与人的交往中，我抽象出“自我”，也就是头脑中根深蒂固的那个模样，它不会变，始终积极向上。这些条条框框帮助我增加了人生控制感，但也塑造了僵固型思维，即**\n\n<u>**“我不能暴露我的脆弱，给那个夸奖我的人，以免让他失望。”**</u>\n\n现在想来，每段关系中的自我都是不一样的，如果喜欢探索和改变的人，为何不选择在不同的关系中发现不一样的自己呢。不再给自己贴上标签，而是去审视具体是什么样的关系，导致了现在的行为。也不指责别人的性格，而是理解什么样的关系，让他表现出这样的行为。\n\n比如，上文说到，我和爷爷的关系导致了我对法语学习缺乏积极性。在这段关系里，既然并非我个性问题，那可以寻求可以让自己表现更好的关系，发现不一样的自己，比如说，认识学法语的新朋友们。\n\n摆脱根深蒂固，把每个自我放到具体的关系中，从每一段关系，看自我的表现，会成长很多。\n\n  #### <center>尾</center>\n\n  \n从个体视角到关系视角，只要做出转变，便不再是那个贴着永久标签的自己。而亲密感的建立，是自我发展的路上一个重要里程碑。\n\n所以，有时感觉很幸运。论朋友，某种程度上，我和大熊志同道合，心中有所想，定有所为。也愿这种深层次的照顾，可以深化双方的自我身份认同，帮助彼此更能接纳自己，变得更完整。\n","source":"_posts/2021-03-04-个人进化论01.md","raw":"---\ntitle: 【自我进化1到2】01.关系中的自我\ndate: 2021-03-04 \ncategories:\n- [个人进化, 心理学]\n\ntags:\n- 听陈海贤自我进化课\n\n\n---\n\n<font color='grey'><font size=2>*这一系列是基于陈海贤老师的自我进化课，用以自我剖析* </b></font>\n\n兔子曾经引以为傲的，是自己的时间管理方法———按分钟计算的，每30min看一下学习状态并及时调整，它帮助兔子一年内一次性7分过雅思，过CPA和CPV考试，写过实证，到过实习，玩过比赛。  \n\n凭借这种打满鸡血的精神状态，我度过了充实圆满的2018、19和20年的大部分时间，直到2020年下半叶，遇到大熊，我的精神节奏被打乱了。  \n\n自控力越来越差，开始频繁发脾气，出问题总想躲避，逃避沟通，对认识新朋友也失去了积极性。  \n\n和大熊认识起初，我拥有独立自由的生活，除了爸妈，我无需向任何人汇报。但随着亲密关系的建立，情感依赖迅速膨胀，我惧怕了。<u>**除了抢占我的时间、空间，它把脆弱年少不完整的自我真实地暴露出来，在我和他面前彰显无遗。望着镜子中的自己，我已记不清对他说了多少次，“这不是我。”** </u> \n\n我用了很久分析原因，一方面是客观因素，工作不稳定，另一方面也是我苦苦想寻求解决的——**并未建立稳定的自我**。  \n\n<u>**没有建立对自我身份的认同，当那些脆弱的部分通过亲密关系，被强行整合进自我概念里，我变得异常排斥，很难接纳自己，“这不是我”。** </u> \n\n所以，我试图探索，“我到底是怎样的”。\n\n开篇说一个词，“关系“。  \n\n\n#### <center>一、自我处在关系中</center>\n\n人无时无刻不处在关系中。\n\n在每一段关系里面，自我是不同的。\n\n大熊说，刚认识我的时候，我每天都笑的很阳光，但后来感觉就没那么积极了。所以我曾质疑，自己是不是变了。\n\n陈海贤老师讲了个故事，在孩子没做完作业的时候，妈妈会大声责备说，你怎么这么不听话！突然电话铃响了，妈妈接起电话，满脸笑容说，“哦，是老师啊，您说来家访，好啊好啊......\"。\n\n曾经，我会把故事理解为“真实自我”和“虚假自我”的差异，但不是的。**从关系的视角来看，它反映的是妈妈在“亲近”和“疏远”这两种不同关系中的差异，妈妈的行为都是真实的自我。所以说，并非个性，而是所处的关系，决定了你的想法和行为。**\n\n从关系的视角思考，会让很多看似无解的问题有了答案。比如说，我对坚持学法语有拖延症，我就进行了如下的剖析。  \n\n<font color='grey'><b>R：学法语有拖延症，怎么办？  \nA：为什么这么想  \nR：在学法语法语的时候，觉得记单词很难，经常不想去学。  \nA：难在哪里呢？如果学的不好，谁会评价你呢？  \nR：是我爷爷Peter。我担心Peter听到我退步的法语，会感到失望。</b></font>\n\n\n到这里，从关系的视角，拖延症就不只是我个人的问题了，而是我和爷爷关系的产物。\n\n\n#### <center>二、关系的视角拓展改变的空间</center>\n\n**妨碍改变的，是头脑中那个顽固的“自我概念”。**\n\n大熊在和我对话过程中发现，我习惯性使用过多“你应该......“。我给自己贴上类似“自信”“努力”的个性标签，同时指责别人为什么会有这样那样古怪的个性。  \n\n**在与人的交往中，我抽象出“自我”，也就是头脑中根深蒂固的那个模样，它不会变，始终积极向上。这些条条框框帮助我增加了人生控制感，但也塑造了僵固型思维，即**\n\n<u>**“我不能暴露我的脆弱，给那个夸奖我的人，以免让他失望。”**</u>\n\n现在想来，每段关系中的自我都是不一样的，如果喜欢探索和改变的人，为何不选择在不同的关系中发现不一样的自己呢。不再给自己贴上标签，而是去审视具体是什么样的关系，导致了现在的行为。也不指责别人的性格，而是理解什么样的关系，让他表现出这样的行为。\n\n比如，上文说到，我和爷爷的关系导致了我对法语学习缺乏积极性。在这段关系里，既然并非我个性问题，那可以寻求可以让自己表现更好的关系，发现不一样的自己，比如说，认识学法语的新朋友们。\n\n摆脱根深蒂固，把每个自我放到具体的关系中，从每一段关系，看自我的表现，会成长很多。\n\n  #### <center>尾</center>\n\n  \n从个体视角到关系视角，只要做出转变，便不再是那个贴着永久标签的自己。而亲密感的建立，是自我发展的路上一个重要里程碑。\n\n所以，有时感觉很幸运。论朋友，某种程度上，我和大熊志同道合，心中有所想，定有所为。也愿这种深层次的照顾，可以深化双方的自我身份认同，帮助彼此更能接纳自己，变得更完整。\n","slug":"个人进化论01","published":1,"updated":"2021-03-05T03:02:26.000Z","comments":1,"layout":"post","photos":[],"_id":"clqdww77i000zz4ltcw455lu1","content":"<p><font color=\"grey\"><font size=\"2\"><em>这一系列是基于陈海贤老师的自我进化课，用以自我剖析</em> </font></font></p>\n<p>兔子曾经引以为傲的，是自己的时间管理方法———按分钟计算的，每30min看一下学习状态并及时调整，它帮助兔子一年内一次性7分过雅思，过CPA和CPV考试，写过实证，到过实习，玩过比赛。  </p>\n<p>凭借这种打满鸡血的精神状态，我度过了充实圆满的2018、19和20年的大部分时间，直到2020年下半叶，遇到大熊，我的精神节奏被打乱了。  </p>\n<p>自控力越来越差，开始频繁发脾气，出问题总想躲避，逃避沟通，对认识新朋友也失去了积极性。  </p>\n<p>和大熊认识起初，我拥有独立自由的生活，除了爸妈，我无需向任何人汇报。但随着亲密关系的建立，情感依赖迅速膨胀，我惧怕了。<u><strong>除了抢占我的时间、空间，它把脆弱年少不完整的自我真实地暴露出来，在我和他面前彰显无遗。望着镜子中的自己，我已记不清对他说了多少次，“这不是我。”</strong> </u> </p>\n<p>我用了很久分析原因，一方面是客观因素，工作不稳定，另一方面也是我苦苦想寻求解决的——<strong>并未建立稳定的自我</strong>。  </p>\n<p><u><strong>没有建立对自我身份的认同，当那些脆弱的部分通过亲密关系，被强行整合进自我概念里，我变得异常排斥，很难接纳自己，“这不是我”。</strong> </u> </p>\n<p>所以，我试图探索，“我到底是怎样的”。</p>\n<p>开篇说一个词，“关系“。  </p>\n<h4 id=\"一、自我处在关系中\"><a href=\"#一、自我处在关系中\" class=\"headerlink\" title=\"一、自我处在关系中\"></a><center>一、自我处在关系中</center></h4><p>人无时无刻不处在关系中。</p>\n<p>在每一段关系里面，自我是不同的。</p>\n<p>大熊说，刚认识我的时候，我每天都笑的很阳光，但后来感觉就没那么积极了。所以我曾质疑，自己是不是变了。</p>\n<p>陈海贤老师讲了个故事，在孩子没做完作业的时候，妈妈会大声责备说，你怎么这么不听话！突然电话铃响了，妈妈接起电话，满脸笑容说，“哦，是老师啊，您说来家访，好啊好啊……”。</p>\n<p>曾经，我会把故事理解为“真实自我”和“虚假自我”的差异，但不是的。<strong>从关系的视角来看，它反映的是妈妈在“亲近”和“疏远”这两种不同关系中的差异，妈妈的行为都是真实的自我。所以说，并非个性，而是所处的关系，决定了你的想法和行为。</strong></p>\n<p>从关系的视角思考，会让很多看似无解的问题有了答案。比如说，我对坚持学法语有拖延症，我就进行了如下的剖析。  </p>\n<p><font color=\"grey\"><b>R：学法语有拖延症，怎么办？<br>A：为什么这么想<br>R：在学法语法语的时候，觉得记单词很难，经常不想去学。<br>A：难在哪里呢？如果学的不好，谁会评价你呢？<br>R：是我爷爷Peter。我担心Peter听到我退步的法语，会感到失望。</b></font></p>\n<p>到这里，从关系的视角，拖延症就不只是我个人的问题了，而是我和爷爷关系的产物。</p>\n<h4 id=\"二、关系的视角拓展改变的空间\"><a href=\"#二、关系的视角拓展改变的空间\" class=\"headerlink\" title=\"二、关系的视角拓展改变的空间\"></a><center>二、关系的视角拓展改变的空间</center></h4><p><strong>妨碍改变的，是头脑中那个顽固的“自我概念”。</strong></p>\n<p>大熊在和我对话过程中发现，我习惯性使用过多“你应该……“。我给自己贴上类似“自信”“努力”的个性标签，同时指责别人为什么会有这样那样古怪的个性。  </p>\n<p><strong>在与人的交往中，我抽象出“自我”，也就是头脑中根深蒂固的那个模样，它不会变，始终积极向上。这些条条框框帮助我增加了人生控制感，但也塑造了僵固型思维，即</strong></p>\n<p><u><strong>“我不能暴露我的脆弱，给那个夸奖我的人，以免让他失望。”</strong></u></p>\n<p>现在想来，每段关系中的自我都是不一样的，如果喜欢探索和改变的人，为何不选择在不同的关系中发现不一样的自己呢。不再给自己贴上标签，而是去审视具体是什么样的关系，导致了现在的行为。也不指责别人的性格，而是理解什么样的关系，让他表现出这样的行为。</p>\n<p>比如，上文说到，我和爷爷的关系导致了我对法语学习缺乏积极性。在这段关系里，既然并非我个性问题，那可以寻求可以让自己表现更好的关系，发现不一样的自己，比如说，认识学法语的新朋友们。</p>\n<p>摆脱根深蒂固，把每个自我放到具体的关系中，从每一段关系，看自我的表现，会成长很多。</p>\n<h4 id=\"尾\"><a href=\"#尾\" class=\"headerlink\" title=\"尾\"></a><center>尾</center></h4><p>从个体视角到关系视角，只要做出转变，便不再是那个贴着永久标签的自己。而亲密感的建立，是自我发展的路上一个重要里程碑。</p>\n<p>所以，有时感觉很幸运。论朋友，某种程度上，我和大熊志同道合，心中有所想，定有所为。也愿这种深层次的照顾，可以深化双方的自我身份认同，帮助彼此更能接纳自己，变得更完整。</p>\n","cover":false,"excerpt":"","more":"<p><font color=\"grey\"><font size=\"2\"><em>这一系列是基于陈海贤老师的自我进化课，用以自我剖析</em> </font></font></p>\n<p>兔子曾经引以为傲的，是自己的时间管理方法———按分钟计算的，每30min看一下学习状态并及时调整，它帮助兔子一年内一次性7分过雅思，过CPA和CPV考试，写过实证，到过实习，玩过比赛。  </p>\n<p>凭借这种打满鸡血的精神状态，我度过了充实圆满的2018、19和20年的大部分时间，直到2020年下半叶，遇到大熊，我的精神节奏被打乱了。  </p>\n<p>自控力越来越差，开始频繁发脾气，出问题总想躲避，逃避沟通，对认识新朋友也失去了积极性。  </p>\n<p>和大熊认识起初，我拥有独立自由的生活，除了爸妈，我无需向任何人汇报。但随着亲密关系的建立，情感依赖迅速膨胀，我惧怕了。<u><strong>除了抢占我的时间、空间，它把脆弱年少不完整的自我真实地暴露出来，在我和他面前彰显无遗。望着镜子中的自己，我已记不清对他说了多少次，“这不是我。”</strong> </u> </p>\n<p>我用了很久分析原因，一方面是客观因素，工作不稳定，另一方面也是我苦苦想寻求解决的——<strong>并未建立稳定的自我</strong>。  </p>\n<p><u><strong>没有建立对自我身份的认同，当那些脆弱的部分通过亲密关系，被强行整合进自我概念里，我变得异常排斥，很难接纳自己，“这不是我”。</strong> </u> </p>\n<p>所以，我试图探索，“我到底是怎样的”。</p>\n<p>开篇说一个词，“关系“。  </p>\n<h4 id=\"一、自我处在关系中\"><a href=\"#一、自我处在关系中\" class=\"headerlink\" title=\"一、自我处在关系中\"></a><center>一、自我处在关系中</center></h4><p>人无时无刻不处在关系中。</p>\n<p>在每一段关系里面，自我是不同的。</p>\n<p>大熊说，刚认识我的时候，我每天都笑的很阳光，但后来感觉就没那么积极了。所以我曾质疑，自己是不是变了。</p>\n<p>陈海贤老师讲了个故事，在孩子没做完作业的时候，妈妈会大声责备说，你怎么这么不听话！突然电话铃响了，妈妈接起电话，满脸笑容说，“哦，是老师啊，您说来家访，好啊好啊……”。</p>\n<p>曾经，我会把故事理解为“真实自我”和“虚假自我”的差异，但不是的。<strong>从关系的视角来看，它反映的是妈妈在“亲近”和“疏远”这两种不同关系中的差异，妈妈的行为都是真实的自我。所以说，并非个性，而是所处的关系，决定了你的想法和行为。</strong></p>\n<p>从关系的视角思考，会让很多看似无解的问题有了答案。比如说，我对坚持学法语有拖延症，我就进行了如下的剖析。  </p>\n<p><font color=\"grey\"><b>R：学法语有拖延症，怎么办？<br>A：为什么这么想<br>R：在学法语法语的时候，觉得记单词很难，经常不想去学。<br>A：难在哪里呢？如果学的不好，谁会评价你呢？<br>R：是我爷爷Peter。我担心Peter听到我退步的法语，会感到失望。</b></font></p>\n<p>到这里，从关系的视角，拖延症就不只是我个人的问题了，而是我和爷爷关系的产物。</p>\n<h4 id=\"二、关系的视角拓展改变的空间\"><a href=\"#二、关系的视角拓展改变的空间\" class=\"headerlink\" title=\"二、关系的视角拓展改变的空间\"></a><center>二、关系的视角拓展改变的空间</center></h4><p><strong>妨碍改变的，是头脑中那个顽固的“自我概念”。</strong></p>\n<p>大熊在和我对话过程中发现，我习惯性使用过多“你应该……“。我给自己贴上类似“自信”“努力”的个性标签，同时指责别人为什么会有这样那样古怪的个性。  </p>\n<p><strong>在与人的交往中，我抽象出“自我”，也就是头脑中根深蒂固的那个模样，它不会变，始终积极向上。这些条条框框帮助我增加了人生控制感，但也塑造了僵固型思维，即</strong></p>\n<p><u><strong>“我不能暴露我的脆弱，给那个夸奖我的人，以免让他失望。”</strong></u></p>\n<p>现在想来，每段关系中的自我都是不一样的，如果喜欢探索和改变的人，为何不选择在不同的关系中发现不一样的自己呢。不再给自己贴上标签，而是去审视具体是什么样的关系，导致了现在的行为。也不指责别人的性格，而是理解什么样的关系，让他表现出这样的行为。</p>\n<p>比如，上文说到，我和爷爷的关系导致了我对法语学习缺乏积极性。在这段关系里，既然并非我个性问题，那可以寻求可以让自己表现更好的关系，发现不一样的自己，比如说，认识学法语的新朋友们。</p>\n<p>摆脱根深蒂固，把每个自我放到具体的关系中，从每一段关系，看自我的表现，会成长很多。</p>\n<h4 id=\"尾\"><a href=\"#尾\" class=\"headerlink\" title=\"尾\"></a><center>尾</center></h4><p>从个体视角到关系视角，只要做出转变，便不再是那个贴着永久标签的自己。而亲密感的建立，是自我发展的路上一个重要里程碑。</p>\n<p>所以，有时感觉很幸运。论朋友，某种程度上，我和大熊志同道合，心中有所想，定有所为。也愿这种深层次的照顾，可以深化双方的自我身份认同，帮助彼此更能接纳自己，变得更完整。</p>\n"},{"title":"额尔古纳河右岸读后感","date":"2023-03-08T02:02:25.000Z","top_img":"https://unclevicky.github.io/rabbitBear/2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/%E7%94%B5%E5%BD%B1%E5%89%A7%E7%85%A7.jpg","cover":"https://unclevicky.github.io/rabbitBear/2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/%E4%B8%BB%E4%BA%BA%E5%85%AC%E5%8E%9F%E5%9E%8B.jpg","_content":"\n## 写在前面\n<p style=\"text-indent:2em\"> \n春节前，也就是在放开疫情政策之后，在外地出差的我，也感染了新冠。也就是在这个时候，我从同事那里借来了一本书《额尔古纳河的右岸》。起先是被这个名字所吸引，翻开看了两页，起初的文字，显得很沧桑又很唯美，还有一些看不懂的名词。同时，疫情并不能阻碍我们工作的步伐，虽然发烧咳嗽隔离在宾馆，但还是要坚持工作，也没有时间拿起这边书，直到春节回家，读完了这本书，久久不能平静。\n</p>\n<p style=\"text-indent:2em\"> \n这是一个忧伤的故事，这是一个唯美的故事，这是一个真实的故事。\n</p>\n<p style=\"text-indent:2em\"> \n一直想写点什么，过去几个月了，一直没有动笔。直到最近发生了很多事情，又触发了我内心深处的那份情感\n</p>\n<p style=\"text-indent:2em\"> \n“我是雨和雪的老熟人了，我有九十岁了。雨雪看老了我，我也把它们给看老了。”\n</p>\n<p style=\"text-indent:2em\"> \n西班、安草儿、玛克辛姆、尼都萨满……乌力楞、驯鹿……\n</p>\n<p style=\"text-indent:2em\"> \n“我不愿意睡在看不到星星的屋子里，我这辈子是伴着星星度过黑夜的。如果午夜梦醒时我望见的是漆黑的屋顶，我的眼睛会瞎的；我的驯鹿没有犯罪，我也不想看到它们蹲进“监狱”。听不到那流水一样的鹿铃声，我一定会耳聋的；我的腿脚习惯了坑坑洼洼的山路，如果让我每天走在城镇平坦的小路上，它们一定会疲软得再也负载不起我的身躯，使我成为一个瘫子；我一直呼吸着山野清新的空气，如果让我去闻布苏的汽车放出的那些“臭屁”，我一定就不会喘气了。我的身体是神灵给予的，我要在山里，把它还给神灵。”    \n    </p>\n<p style=\"text-indent:2em\"> \n开头就注定了结局悲剧和无奈……\n</p>\n</br>\n{% asset_img 主人公原型.jpg 主人公原型 %}\n</br>\n{% asset_img 电影剧照.jpg 电影剧照 %}","source":"_posts/2023-03-08-额尔古纳河右岸读后感.md","raw":"---\ntitle: 额尔古纳河右岸读后感\ndate: 2023-03-08 10:02:25\ntop_img: https://unclevicky.github.io/rabbitBear/2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/%E7%94%B5%E5%BD%B1%E5%89%A7%E7%85%A7.jpg\ncover: https://unclevicky.github.io/rabbitBear/2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/%E4%B8%BB%E4%BA%BA%E5%85%AC%E5%8E%9F%E5%9E%8B.jpg\ntags:\n  - 读后感\n  - 文学\n  - 矛盾文学奖\ncategories: \n- [文学, 书评]\n- [品读经典, 茅盾文学奖]\n---\n\n## 写在前面\n<p style=\"text-indent:2em\"> \n春节前，也就是在放开疫情政策之后，在外地出差的我，也感染了新冠。也就是在这个时候，我从同事那里借来了一本书《额尔古纳河的右岸》。起先是被这个名字所吸引，翻开看了两页，起初的文字，显得很沧桑又很唯美，还有一些看不懂的名词。同时，疫情并不能阻碍我们工作的步伐，虽然发烧咳嗽隔离在宾馆，但还是要坚持工作，也没有时间拿起这边书，直到春节回家，读完了这本书，久久不能平静。\n</p>\n<p style=\"text-indent:2em\"> \n这是一个忧伤的故事，这是一个唯美的故事，这是一个真实的故事。\n</p>\n<p style=\"text-indent:2em\"> \n一直想写点什么，过去几个月了，一直没有动笔。直到最近发生了很多事情，又触发了我内心深处的那份情感\n</p>\n<p style=\"text-indent:2em\"> \n“我是雨和雪的老熟人了，我有九十岁了。雨雪看老了我，我也把它们给看老了。”\n</p>\n<p style=\"text-indent:2em\"> \n西班、安草儿、玛克辛姆、尼都萨满……乌力楞、驯鹿……\n</p>\n<p style=\"text-indent:2em\"> \n“我不愿意睡在看不到星星的屋子里，我这辈子是伴着星星度过黑夜的。如果午夜梦醒时我望见的是漆黑的屋顶，我的眼睛会瞎的；我的驯鹿没有犯罪，我也不想看到它们蹲进“监狱”。听不到那流水一样的鹿铃声，我一定会耳聋的；我的腿脚习惯了坑坑洼洼的山路，如果让我每天走在城镇平坦的小路上，它们一定会疲软得再也负载不起我的身躯，使我成为一个瘫子；我一直呼吸着山野清新的空气，如果让我去闻布苏的汽车放出的那些“臭屁”，我一定就不会喘气了。我的身体是神灵给予的，我要在山里，把它还给神灵。”    \n    </p>\n<p style=\"text-indent:2em\"> \n开头就注定了结局悲剧和无奈……\n</p>\n</br>\n{% asset_img 主人公原型.jpg 主人公原型 %}\n</br>\n{% asset_img 电影剧照.jpg 电影剧照 %}","slug":"额尔古纳河右岸读后感","published":1,"updated":"2025-08-14T14:24:20.444Z","_id":"clqdww77j0011z4lterc845em","comments":1,"layout":"post","photos":[],"content":"<h2 id=\"写在前面\"><a href=\"#写在前面\" class=\"headerlink\" title=\"写在前面\"></a>写在前面</h2><p style=\"text-indent:2em\"> \n春节前，也就是在放开疫情政策之后，在外地出差的我，也感染了新冠。也就是在这个时候，我从同事那里借来了一本书《额尔古纳河的右岸》。起先是被这个名字所吸引，翻开看了两页，起初的文字，显得很沧桑又很唯美，还有一些看不懂的名词。同时，疫情并不能阻碍我们工作的步伐，虽然发烧咳嗽隔离在宾馆，但还是要坚持工作，也没有时间拿起这边书，直到春节回家，读完了这本书，久久不能平静。\n</p>\n<p style=\"text-indent:2em\"> \n这是一个忧伤的故事，这是一个唯美的故事，这是一个真实的故事。\n</p>\n<p style=\"text-indent:2em\"> \n一直想写点什么，过去几个月了，一直没有动笔。直到最近发生了很多事情，又触发了我内心深处的那份情感\n</p>\n<p style=\"text-indent:2em\"> \n“我是雨和雪的老熟人了，我有九十岁了。雨雪看老了我，我也把它们给看老了。”\n</p>\n<p style=\"text-indent:2em\"> \n西班、安草儿、玛克辛姆、尼都萨满……乌力楞、驯鹿……\n</p>\n<p style=\"text-indent:2em\"> \n“我不愿意睡在看不到星星的屋子里，我这辈子是伴着星星度过黑夜的。如果午夜梦醒时我望见的是漆黑的屋顶，我的眼睛会瞎的；我的驯鹿没有犯罪，我也不想看到它们蹲进“监狱”。听不到那流水一样的鹿铃声，我一定会耳聋的；我的腿脚习惯了坑坑洼洼的山路，如果让我每天走在城镇平坦的小路上，它们一定会疲软得再也负载不起我的身躯，使我成为一个瘫子；我一直呼吸着山野清新的空气，如果让我去闻布苏的汽车放出的那些“臭屁”，我一定就不会喘气了。我的身体是神灵给予的，我要在山里，把它还给神灵。”    \n    </p>\n<p style=\"text-indent:2em\"> \n开头就注定了结局悲剧和无奈……\n</p>\n<br>\n<img src=\"/rabbitBear/.io//2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/%E4%B8%BB%E4%BA%BA%E5%85%AC%E5%8E%9F%E5%9E%8B.jpg\" class title=\"主人公原型\">\n<br>\n<img src=\"/rabbitBear/.io//2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/%E7%94%B5%E5%BD%B1%E5%89%A7%E7%85%A7.jpg\" class title=\"电影剧照\">","cover_type":"img","excerpt":"","more":"<h2 id=\"写在前面\"><a href=\"#写在前面\" class=\"headerlink\" title=\"写在前面\"></a>写在前面</h2><p style=\"text-indent:2em\"> \n春节前，也就是在放开疫情政策之后，在外地出差的我，也感染了新冠。也就是在这个时候，我从同事那里借来了一本书《额尔古纳河的右岸》。起先是被这个名字所吸引，翻开看了两页，起初的文字，显得很沧桑又很唯美，还有一些看不懂的名词。同时，疫情并不能阻碍我们工作的步伐，虽然发烧咳嗽隔离在宾馆，但还是要坚持工作，也没有时间拿起这边书，直到春节回家，读完了这本书，久久不能平静。\n</p>\n<p style=\"text-indent:2em\"> \n这是一个忧伤的故事，这是一个唯美的故事，这是一个真实的故事。\n</p>\n<p style=\"text-indent:2em\"> \n一直想写点什么，过去几个月了，一直没有动笔。直到最近发生了很多事情，又触发了我内心深处的那份情感\n</p>\n<p style=\"text-indent:2em\"> \n“我是雨和雪的老熟人了，我有九十岁了。雨雪看老了我，我也把它们给看老了。”\n</p>\n<p style=\"text-indent:2em\"> \n西班、安草儿、玛克辛姆、尼都萨满……乌力楞、驯鹿……\n</p>\n<p style=\"text-indent:2em\"> \n“我不愿意睡在看不到星星的屋子里，我这辈子是伴着星星度过黑夜的。如果午夜梦醒时我望见的是漆黑的屋顶，我的眼睛会瞎的；我的驯鹿没有犯罪，我也不想看到它们蹲进“监狱”。听不到那流水一样的鹿铃声，我一定会耳聋的；我的腿脚习惯了坑坑洼洼的山路，如果让我每天走在城镇平坦的小路上，它们一定会疲软得再也负载不起我的身躯，使我成为一个瘫子；我一直呼吸着山野清新的空气，如果让我去闻布苏的汽车放出的那些“臭屁”，我一定就不会喘气了。我的身体是神灵给予的，我要在山里，把它还给神灵。”    \n    </p>\n<p style=\"text-indent:2em\"> \n开头就注定了结局悲剧和无奈……\n</p>\n<br>\n<img src=\"/rabbitBear/.io//2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/%E4%B8%BB%E4%BA%BA%E5%85%AC%E5%8E%9F%E5%9E%8B.jpg\" class title=\"主人公原型\">\n<br>\n<img src=\"/rabbitBear/.io//2023/03/08/%E9%A2%9D%E5%B0%94%E5%8F%A4%E7%BA%B3%E6%B2%B3%E5%8F%B3%E5%B2%B8%E8%AF%BB%E5%90%8E%E6%84%9F/%E7%94%B5%E5%BD%B1%E5%89%A7%E7%85%A7.jpg\" class title=\"电影剧照\">"},{"title":"【半自动版】python批量下载公众号历史文章（一）","date":"2022-07-27T05:50:59.000Z","_content":"\n### **【老博客地址】**\n&emsp;&emsp;[【CSDN】博客主页](https://blog.csdn.net/MissYourKiss/)\n&emsp;&emsp;[【纯技术交流】python批量下载公众号历史文章（一）](https://blog.csdn.net/MissYourKiss/article/details/100254510)\n&emsp;&emsp;*(在刊载一段时间后，莫名被吞掉了,所以在这里补档)*\n&emsp;&emsp;[python批量下载公众号历史文章（二）](https://blog.csdn.net/MissYourKiss/article/details/100661899)\n\n### **【写在前面】**\n<p style=\"text-indent:2em\">\n前些天和同事讨论问题，什么是人才？讨论细节就不表了，最终总结为一句话：能解决问题的人才是人才。自己爱交朋友，很多朋友都在我有困难的时候帮助过我，也希望自己能够帮助朋友，成为能帮朋友解决问题的人才，所以朋友的请求从来都是来者不拒，力所能及之事一定全力办到！\n</p>\n<p style=\"text-indent:2em\">\n基于这点，给自己挖了很多坑：前些日子写的学习强国自动学习已经完成了一个初步版本，能够自动读文章、自动学习视频、自动分享，但是还不能自动答题，朋友说已经够用了，不过还是希望有时间了完成这块儿的内容；想读黄易老爷子武侠的那位朋友的问题也解决了，虽然下载下来的文字部分章节格式上有些乱，但也满足了朋友的要求，够用就行；学习Python也是一样，因时间关系没有系统的去学习过，只是通过解决各种问题达到学以致用，够用就行。很多博客文章，写有序号，都是计划要分段完成的，希望自己有一天能把所有的坑都填完了。\n</p>\n\n### **【背景】**\n<p style=\"text-indent:2em\">\n昨天和朋友去野钓，路上谈起股票。今年截止到目前，他的收益是40%多。问他炒股的心得，他是数据流派，经常看财务数据，就推荐了几个公众号，同时提出了一个请求，有些公众号历史文章太多，每次翻看之前的文章都得重头刷，问我能不能把这些文章下载到本地，自己想看的时候就看。想着不难，就答应姑且一试。\n</p>\n\n### **【目标】**\n&emsp;&emsp;第一个版本，只是为了实现下载朋友指定的公众号的历史文章，并转换成pdf方便阅读。很多需要手工配合，算是一个半自动的版本吧。\n&emsp;&emsp;后续会陆续减少手工，并把文章存储在数据库里，支持检索等。\n\n### **【思路】**\n&emsp;&emsp;和从网页上爬取小说不同，微信的公众号是通过app操作进行爬取，所以不能直接用chrome查看网页源码进行解析，需要用到第三方抓包工具，网上看了下用的比较多的有fiddler和anyproxy，前者比较简单，就选择了前者，思路如下：\n&emsp;&emsp;1、通过fiddler抓取相应公众号的包（需要手动）；\n&emsp;&emsp;2、通过python进行解析，获取历史文章列表信息json；\n&emsp;&emsp;3、通过python进行解析，获取所有文章信息，包括标题、链接等；\n&emsp;&emsp;4、通过python循环将这些文章下载到本地存为html；\n&emsp;&emsp;5、通过python将文章里面的图片都保存到本地；\n&emsp;&emsp;6、通过python将本地html文件里面的图片链接，修改为本地存储图片的路径（因为只存文章还不行，你会发现存到本地的html文件，里面的图片都无法正常显示）；\n&emsp;&emsp;7、通过python调用wkhtmltopdf工具，将html转换成pdf。\n\n### **【工具】**\n&emsp;&emsp;1、抓包工具fiddler；\n&emsp;&emsp;2、html转pdf工具wkhtmltopdf；\n&emsp;&emsp;3、python3.7及对应的包；\n&emsp;&emsp;4、电脑版微信或者模拟器或者直接用手机也行（如果用手机或者模拟器，需要设置代理）；\n\n### **【准备工作之抓包】**\n&emsp;&emsp;有些公众号的包比较特殊，所以要进行不同的处理。以朋友要求的公众号为例（为了避免广告嫌疑，就不写是啥公众号了）。\n&emsp;&emsp;1、下载fiddler软件，因为公众号里都是https的链接，需要做抓包配置。中间会弹出一些框框让确认，全部点确定就行。\n<br />\n{% asset_img fiddle_setup_1.png fiddle设置 %}\n{% asset_img fiddle_setup_2.png fiddle设置 %}\n\n&emsp;&emsp;2、打开电脑版微信，搜索需要的公众号，点开历史文章列表。通过fiddler查看抓到的包的特点。\n<br />\n{% asset_img analyse_pkg_1.png 打开公众号链接 %}\n{% asset_img analyse_pkg_2.png fiddle分析包特点 %}\n{% asset_img analyse_pkg_3.png fiddle分析包特点 %}\n\n&emsp;&emsp;3、为了避免其他链接的干扰，配置过滤规则，滤掉不需要的链接。\n<br />\n{% asset_img fiddle_filters.png 股票清单和基本信息-网页 %}\n\n\n&emsp;&emsp;4、然后清空fiddler的抓取记录，重新点击历史文章，并不断下拉，直到所有链接都显示出来为止。\n<br />\n{% asset_img fiddle_info_1.png fiddle抓包信息 %}\n{% asset_img fiddle_info_2.png fiddle抓包信息 %}\n\n&emsp;&emsp;5、将过滤之后获得的所有的seesion，以raw的形式保存到本地。\n<br />\n{% asset_img fiddle_raw_1.png fiddle保持raw格式session %}\n{% asset_img fiddle_raw_2.png fiddle保持raw格式session %}\n{% asset_img fiddle_raw_3.png fiddle保持raw格式session %}\n{% asset_img fiddle_raw_4.png fiddle保持raw格式session %}\n\n### **【编码】**\n&emsp;&emsp;**1、标准报文头和需要的包**\n```\n# _*_ coding:utf-8 _*_\nimport os,sys\nimport requests\nimport json\nimport subprocess\nimport re\nimport random\nimport time\nfrom bs4 import BeautifulSoup\nfrom datetime import datetime,timedelta\nfrom time import sleep\n```\n&emsp;&emsp;**2、定义一个文章类，保存文章的基本信息**\n```\nclass ArticleInfo():\n    def __init__(self,url,title,idx_num): #idx_num是为了方便保存图片命名\n        self.url = url\n        self.title = title\n        self.idx_num = idx_num\n```\n&emsp;&emsp;**3、定义读取文件内容的方法（通用）**\n```\ndef read_file(file_path):\n    with open(file_path,\"r\",encoding=\"utf-8\") as f:\n        file_content = f.read()\n    return file_content\n```\n&emsp;&emsp;**4、定义写文件内容的方法（通用）**\n```\ndef save_file(file_path,file_content):\n    with open(file_path,\"w\",encoding=\"utf-8\") as f:\n        f.write(file_content)\n```\n&emsp;&emsp;**5、定义下载网页html的方法（通用）**\n```\ndef get_html(url):\n    headers = {\n        \"Accept\": \"*/*\",\n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat\",\n        \"Accept-Encoding\": \"gzip, deflate\",\n        \"Accept-Language\": \"zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4\",\n        'Connection':'keep-alive'\n    }\n    response = requests.get(url,headers = headers,proxies=None)\n    if response.status_code == 200:\n        htmltxt = response.text #返回的网页正文\n        return htmltxt\n    else:\n        return None\n```\n&emsp;&emsp;**6、定义下载并保存网页图片的方法（通用）**\n```\ndef get_save_image(url,img_file_path):\n    headers = {\n        \"Accept\": \"*/*\",\n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat\",\n        \"Accept-Encoding\": \"gzip, deflate\",\n        \"Accept-Language\": \"zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4\",\n        'Connection':'keep-alive'\n    }\n    response = requests.get(url,headers = headers,proxies=None)\n    with open(img_file_path,\"wb\") as f:\n        f.write(response.content)\n```\n&emsp;&emsp;**7、定义调用下载html和图片的方法（主函数调用此方法开始下载）**\n```\ndef down_html(json_path,html_path):\n    if not os.path.exists(html_path):\n        os.makedirs(html_path) # 创建保存html文件的文件夹\n    local_img_path = os.path.join(html_path,\"images\")\n    if not os.path.lexists(local_img_path):\n        os.makedirs(local_img_path) # 创建保存本地图片的文件夹\n    article_list = get_article_list(json_path)\n    article_list.sort(key=lambda x:x.atc_datetime, reverse=True) # 根据文章发表时间倒序排列\n    tot_article = len(article_list) # 文章的总数量\n    i = 0 #计数用\n    for atc in article_list:\n        i+=1\n        atc_unique_name = str(atc.atc_datetime) + \"_\" + str(atc.idx_num) # 时间+序号 作为同一时间发表的文章的唯一标识\n        html_name = atc_unique_name+\".html\"\n        html_file_path = os.path.join(html_path,html_name)\n        print(i,\"of\",tot_article,atc_unique_name,atc.title)\n        if os.path.exists(html_file_path): # 支持续传\n            print(\"{} existed already!\".format(html_file_path))\n            continue\n        org_atc_html = get_html(atc.url)\n        new_atc_html = rep_image(org_atc_html,local_img_path,html_name)\n        save_file(html_file_path,new_atc_html)\n        sleep(round(random.uniform(1,3),2))\n        \"\"\"for test\n        if i>0 :\n            break\n        \"\"\"\n```\n&emsp;&emsp;**8、查看fiddler保存的json文件结构，定义解析json字符串获取文章列表的方法**\n```\ndef get_article_list(json_path):\n    \"\"\"\n    通过抓取的包的json文件，获取所有文章的信息的列表\n    \"\"\"\n    file_list = os.listdir(json_path) #jsonpath是fiddler导出的文件夹路径\n    article_list = [] # 用来保存所有文章的列表\n    for file in file_list:\n        file_path = os.path.join(json_path,file)\n        file_cont = read_file(file_path)\n        json_cont = json.loads(file_cont)\n        general_msg_list = json_cont['general_msg_list']\n        json_list = json.loads(general_msg_list)\n        #print(json_list['list'][0]['comm_msg_info']['datetime'])\n        for lst in json_list['list']:\n            atc_idx = 0 # 每个时间可以发多篇文章 为了方便后续图片命名\n            seconds_datetime = lst['comm_msg_info']['datetime']\n            atc_datetime = seconds_to_time(seconds_datetime)\n            if lst['comm_msg_info']['type'] == 49: # 49为普通的图文\n                atc_idx+=1\n                url = lst['app_msg_ext_info']['content_url']\n                title = lst['app_msg_ext_info']['title']\n                atc_info = ArticleInfo(url,title,atc_idx,atc_datetime)\n                article_list.append(atc_info)\n            if 1 == lst['app_msg_ext_info']['is_multi']: # 一次发多篇\n                multi_app_msg_item_list = lst['app_msg_ext_info']['multi_app_msg_item_list']\n                for multi in multi_app_msg_item_list:\n                    atc_idx+=1\n                    url = multi['content_url']\n                    title = multi['title']\n                    mul_act_info = ArticleInfo(url,title,atc_idx,atc_datetime)\n                    article_list.append(mul_act_info)\n    return article_list\n```\n<br />\n{% asset_img raw_info.png fiddle保持raw具体内容 %}\n\n&emsp;&emsp;**9、定义替换html中图片src为本地图片的方法（不替换，html中的图片将无法显示）**\n```\ndef chg_img_link(bs_html):\n    link_list = bs_html.findAll(\"link\")\n    for link in link_list:\n        href = link.attrs[\"href\"]\n        if href.startswith(\"//\"):\n            new_href = \"http:\"+href\n            link.attrs[\"href\"]=new_href\n \ndef rep_image(org_html,local_img_path,html_name):\n    bs_html = BeautifulSoup(org_html,\"lxml\")\n    img_list = bs_html.findAll(\"img\")\n    img_idx = 0 # 计数和命名用\n    for img in img_list:\n        img_idx+=1\n        org_url = \"\" # 图片的真实地址\n        if \"data-src\" in img.attrs: # <img  data-src=\"...\"\n            org_url = img.attrs['data-src']\n        elif \"src\" in img.attrs : # <img  src=\"...\"\n            org_url = img.attrs['src']\n        if org_url.startswith(\"//\"):\n            org_url = \"http:\" + org_url\n        if len(org_url) > 0 :\n            print(\"download image \",img_idx)\n            if \"data-type\" in img.attrs:\n                img_type = img.attrs[\"data-type\"]\n            else:\n                img_type = \"png\"\n            img_name = html_name + \"_\" + str(img_idx) + \".\" +img_type\n            img_file_path = os.path.join(local_img_path,img_name)\n            get_save_image(org_url,img_file_path) # 下载并保存图片\n            img.attrs[\"src\"] = \"images/\" + img_name\n        else:\n            img.attrs[\"src\"] = \"\"\n    chg_img_link(bs_html)\n    return str(bs_html)\n```\n<br />\n{% asset_img without_img.png 未替换本地图片源 %}\n{% asset_img with_img.png 替换本地图片源 %}\n\n&emsp;&emsp;**10、定义html转换成pdf的方法**\n```\ndef conv_html_pdf(html_path,pdf_path):\n    if not os.path.exists(pdf_path):\n        os.makedirs(pdf_path)\n    f_list = os.listdir(html_path)\n    for f in f_list:\n        if (not f[-5:]==\".html\") or (\"tmp\" in f): #不是html文件的不转换，含有tmp的不转换\n            continue\n        html_file_path = os.path.join(html_path,f)\n        html_tmp_file = html_file_path[:-5]+\"_tmp.html\" #生成临时文件，供转pdf用\n        html_str = read_file(html_file_path)\n        bs_html = BeautifulSoup(html_str,\"lxml\")\n        pdf_title = \"\"\n        title_tag = bs_html.find(id=\"activity-name\")\n        if title_tag is not None:\n            pdf_title = \"_\"+title_tag.get_text().replace(\" \", \"\").replace(\"  \",\"\").replace(\"\\n\",\"\")\n        print(pdf_title)\n        r_idx = html_file_path.rindex(\"/\") + 1\n        pdf_name = html_file_path[r_idx:-5]+pdf_title\n        pdf_file_path = os.path.join(pdf_path,pdf_name+\".pdf\")\n        \"\"\"\n        加快转换速度，把临时文件中的不必要的元素去掉\n        \"\"\"\n        [s.extract() for s in bs_html([\"script\",\"iframe\",\"link\"])]\n        save_file(html_tmp_file,str(bs_html))\n        call_wkhtmltopdf(html_tmp_file,pdf_file_path)\n ```\n ```\ndef call_wkhtmltopdf(html_file_path,pdf_file_path,skipExists=True,removehtml=True):\n    if skipExists and os.path.exists(pdf_file_path):\n        print(\"pdf_file_path already existed!\")\n        if removehtml :\n            os.remove(html_file_path)\n        return\n    exe_path = cfg['wkhtmltopdf'] #wkhtmltopdf.exe的保存路径\n    cmd_list = []\n    cmd_list.append(\" --load-error-handling ignore \")\n    cmd_list.append(\" \"+ html_file_path +\" \")\n    cmd_list.append(\" \"+ pdf_file_path +\" \")\n    cmd_str = exe_path + \"\".join(cmd_list)\n    print(cmd_str)\n    subprocess.check_call(cmd_str, shell=False)\n    if removehtml:\n        os.remove(html_file_path)\n```\n\n&emsp;&emsp;**11、定义读取保存各文件夹路径的配置文件的方法**\n```\ndef get_config():\n    cfg_file = read_file(\"config/wechat.cfg\")\n    cfg_file = cfg_file.replace(\"\\\\\\\\\",\"/\").replace(\"\\\\\",\"/\") #防止json中有 / 导致无法识别\n    cfg_json = json.loads(cfg_file)\n    return cfg_json\n```\n\n&emsp;&emsp;**【重要】配置文件放置在当前目录的子目录config下，名为wechat.cfg,内容如下**\n```\n{\n    \"jsonDir\": \"./download/wechat/fiddler-raw/Dump-0902-14-43-38/\",\n    \"htmlDir\": \"./download/wechat/html/\",\n    \"pdfDir\": \"./download/wechat/pdf/\",\n    \"wkhtmltopdf\": \"./wkhtmltopdf.exe\"\n}\n```\n\n&emsp;&emsp;**12、定义从秒数获得时间的方法（微信公众号的datetime存放的是从1970-01-01 00:00:00到发表时的秒数）**\n```\ndef seconds_to_time(seconds):\n    taime_array = time.localtime(seconds) # 1970-01-01 00:00:00 到发表时的秒数\n    other_style_time = time.strftime(\"%Y-%m-%d %H:%M:%S\", taime_array)\n    date_time =datetime.strptime(other_style_time, \"%Y-%m-%d %H:%M:%S\")\n    return str(date_time).replace(\"-\",\"\").replace(\":\",\"\").replace(\" \",\"\")\n```\n\n&emsp;&emsp;**13、定义主函数进行调用，没有参数或者参数是html则进行下载，如果是pdf则是html转换成pdf**\n```\ncfg = get_config() # 获得配置文件的全局变量\n#get_article_list(\"./tmp/\") # for test\n#down_html(\"./tmp/\",\"./html/\")# for test\n \nif __name__ == \"__main__\":\n \n    if len(sys.argv) == 1:\n        arg = None\n    else:\n        arg = sys.argv[1]\n    if arg is None or arg == \"html\":\n        down_html(cfg['jsonDir'],cfg['htmlDir'])\n    elif arg == \"pdf\":\n        conv_html_pdf(cfg['htmlDir'],cfg['pdfDir'])\n```\n\n### **【运行效果】**\n<br />\n{% asset_img last_html.png html文件 %}\n{% asset_img last_pdf.png pdf文件 %}\n\n### **【完整代码】**\n```\n# _*_ coding:utf-8 _*_\nimport os,sys\nimport requests\nimport json\nimport subprocess\nimport re\nimport random\nimport time\nfrom bs4 import BeautifulSoup\nfrom datetime import datetime,timedelta\nfrom time import sleep\n \nclass ArticleInfo():\n    def __init__(self,url,title,idx_num,atc_datetime): #idx_num是为了方便保存图片命名\n        self.url = url\n        self.title = title\n        self.idx_num = idx_num\n        self.atc_datetime = atc_datetime\n \ndef read_file(file_path):\n    with open(file_path,\"r\",encoding=\"utf-8\") as f:\n        file_content = f.read()\n    return file_content\n \ndef save_file(file_path,file_content):\n    with open(file_path,\"w\",encoding=\"utf-8\") as f:\n        f.write(file_content)\n \ndef get_html(url):\n    headers = {\n        \"Accept\": \"*/*\",\n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat\",\n        \"Accept-Encoding\": \"gzip, deflate\",\n        \"Accept-Language\": \"zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4\",\n        'Connection':'keep-alive'\n    }\n    response = requests.get(url,headers = headers,proxies=None)\n    if response.status_code == 200:\n        htmltxt = response.text #返回的网页正文\n        return htmltxt\n    else:\n        return None\n \ndef get_save_image(url,img_file_path):\n    headers = {\n        \"Accept\": \"*/*\",\n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat\",\n        \"Accept-Encoding\": \"gzip, deflate\",\n        \"Accept-Language\": \"zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4\",\n        'Connection':'keep-alive'\n    }\n    response = requests.get(url,headers = headers,proxies=None)\n    with open(img_file_path,\"wb\") as f:\n        f.write(response.content)\n \ndef get_article_list(json_path):\n    \"\"\"\n    通过抓取的包的json文件，获取所有文章的信息的列表\n    \"\"\"\n    file_list = os.listdir(json_path) #jsonpath是fiddler导出的文件夹路径\n    article_list = [] # 用来保存所有文章的列表\n    for file in file_list:\n        file_path = os.path.join(json_path,file)\n        file_cont = read_file(file_path)\n        json_cont = json.loads(file_cont)\n        general_msg_list = json_cont['general_msg_list']\n        json_list = json.loads(general_msg_list)\n        #print(json_list['list'][0]['comm_msg_info']['datetime'])\n        for lst in json_list['list']:\n            atc_idx = 0 # 每个时间可以发多篇文章 为了方便后续图片命名\n            seconds_datetime = lst['comm_msg_info']['datetime']\n            atc_datetime = seconds_to_time(seconds_datetime)\n            if lst['comm_msg_info']['type'] == 49: # 49为普通的图文\n                atc_idx+=1\n                url = lst['app_msg_ext_info']['content_url']\n                title = lst['app_msg_ext_info']['title']\n                atc_info = ArticleInfo(url,title,atc_idx,atc_datetime)\n                article_list.append(atc_info)\n            if 1 == lst['app_msg_ext_info']['is_multi']: # 一次发多篇\n                multi_app_msg_item_list = lst['app_msg_ext_info']['multi_app_msg_item_list']\n                for multi in multi_app_msg_item_list:\n                    atc_idx+=1\n                    url = multi['content_url']\n                    title = multi['title']\n                    mul_act_info = ArticleInfo(url,title,atc_idx,atc_datetime)\n                    article_list.append(mul_act_info)\n    return article_list\n \ndef chg_img_link(bs_html):\n    link_list = bs_html.findAll(\"link\")\n    for link in link_list:\n        href = link.attrs[\"href\"]\n        if href.startswith(\"//\"):\n            new_href = \"http:\"+href\n            link.attrs[\"href\"]=new_href\n \ndef rep_image(org_html,local_img_path,html_name):\n    bs_html = BeautifulSoup(org_html,\"lxml\")\n    img_list = bs_html.findAll(\"img\")\n    img_idx = 0 # 计数和命名用\n    for img in img_list:\n        img_idx+=1\n        org_url = \"\" # 图片的真实地址\n        if \"data-src\" in img.attrs: # <img  data-src=\"...\"\n            org_url = img.attrs['data-src']\n        elif \"src\" in img.attrs : # <img  src=\"...\"\n            org_url = img.attrs['src']\n        if org_url.startswith(\"//\"):\n            org_url = \"http:\" + org_url\n        if len(org_url) > 0 :\n            print(\"download image \",img_idx)\n            if \"data-type\" in img.attrs:\n                img_type = img.attrs[\"data-type\"]\n            else:\n                img_type = \"png\"\n            img_name = html_name + \"_\" + str(img_idx) + \".\" +img_type\n            img_file_path = os.path.join(local_img_path,img_name)\n            get_save_image(org_url,img_file_path) # 下载并保存图片\n            img.attrs[\"src\"] = \"images/\" + img_name\n        else:\n            img.attrs[\"src\"] = \"\"\n    chg_img_link(bs_html)\n    return str(bs_html)\n \n \ndef down_html(json_path,html_path):\n    if not os.path.exists(html_path):\n        os.makedirs(html_path) # 创建保存html文件的文件夹\n    local_img_path = os.path.join(html_path,\"images\")\n    if not os.path.lexists(local_img_path):\n        os.makedirs(local_img_path) # 创建保存本地图片的文件夹\n    article_list = get_article_list(json_path)\n    article_list.sort(key=lambda x:x.atc_datetime, reverse=True) # 根据文章发表时间倒序排列\n    tot_article = len(article_list) # 文章的总数量\n    i = 0 #计数用\n    for atc in article_list:\n        i+=1\n        atc_unique_name = str(atc.atc_datetime) + \"_\" + str(atc.idx_num) # 时间+序号 作为同一时间发表的文章的唯一标识\n        html_name = atc_unique_name+\".html\"\n        html_file_path = os.path.join(html_path,html_name)\n        print(i,\"of\",tot_article,atc_unique_name,atc.title)\n        if os.path.exists(html_file_path): # 支持续传\n            print(\"{} existed already!\".format(html_file_path))\n            continue\n        org_atc_html = get_html(atc.url)\n        new_atc_html = rep_image(org_atc_html,local_img_path,html_name)\n        save_file(html_file_path,new_atc_html)\n        sleep(round(random.uniform(1,3),2))\n        \"\"\"for test\n        if i>0 :\n            break\n        \"\"\"\n \ndef conv_html_pdf(html_path,pdf_path):\n    if not os.path.exists(pdf_path):\n        os.makedirs(pdf_path)\n    f_list = os.listdir(html_path)\n    for f in f_list:\n        if (not f[-5:]==\".html\") or (\"tmp\" in f): #不是html文件的不转换，含有tmp的不转换\n            continue\n        html_file_path = os.path.join(html_path,f)\n        html_tmp_file = html_file_path[:-5]+\"_tmp.html\" #生成临时文件，供转pdf用\n        html_str = read_file(html_file_path)\n        bs_html = BeautifulSoup(html_str,\"lxml\")\n        pdf_title = \"\"\n        title_tag = bs_html.find(id=\"activity-name\")\n        if title_tag is not None:\n            pdf_title = \"_\"+title_tag.get_text().replace(\" \", \"\").replace(\"  \",\"\").replace(\"\\n\",\"\")\n        print(pdf_title)\n        r_idx = html_file_path.rindex(\"/\") + 1\n        pdf_name = html_file_path[r_idx:-5]+pdf_title\n        pdf_file_path = os.path.join(pdf_path,pdf_name+\".pdf\")\n        \"\"\"\n        加快转换速度，把临时文件中的不必要的元素去掉\n        \"\"\"\n        [s.extract() for s in bs_html([\"script\",\"iframe\",\"link\"])]\n        save_file(html_tmp_file,str(bs_html))\n        call_wkhtmltopdf(html_tmp_file,pdf_file_path)\n \ndef call_wkhtmltopdf(html_file_path,pdf_file_path,skipExists=True,removehtml=True):\n    if skipExists and os.path.exists(pdf_file_path):\n        print(\"pdf_file_path already existed!\")\n        if removehtml :\n            os.remove(html_file_path)\n        return\n    exe_path = cfg['wkhtmltopdf'] #wkhtmltopdf.exe的保存路径\n    cmd_list = []\n    cmd_list.append(\" --load-error-handling ignore \")\n    cmd_list.append(\" \"+ html_file_path +\" \")\n    cmd_list.append(\" \"+ pdf_file_path +\" \")\n    cmd_str = exe_path + \"\".join(cmd_list)\n    print(cmd_str)\n    subprocess.check_call(cmd_str, shell=False)\n    if removehtml:\n        os.remove(html_file_path)\n \ndef get_config():\n    cfg_file = read_file(\"config/wechat.cfg\")\n    cfg_file = cfg_file.replace(\"\\\\\\\\\",\"/\").replace(\"\\\\\",\"/\") #防止json中有 / 导致无法识别\n    cfg_json = json.loads(cfg_file)\n    return cfg_json\n \ndef seconds_to_time(seconds):\n    taime_array = time.localtime(seconds) # 1970-01-01 00:00:00 到发表时的秒数\n    other_style_time = time.strftime(\"%Y-%m-%d %H:%M:%S\", taime_array)\n    date_time =datetime.strptime(other_style_time, \"%Y-%m-%d %H:%M:%S\")\n    return str(date_time).replace(\"-\",\"\").replace(\":\",\"\").replace(\" \",\"\")\n \n \ncfg = get_config() # 获得配置文件的全局变量\n#get_article_list(\"./tmp/\") # for test\n#down_html(\"./tmp/\",\"./html/\")# for test\n \nif __name__ == \"__main__\":\n \n    if len(sys.argv) == 1:\n        arg = None\n    else:\n        arg = sys.argv[1]\n    if arg is None or arg == \"html\":\n        down_html(cfg['jsonDir'],cfg['htmlDir'])\n    elif arg == \"pdf\":\n        conv_html_pdf(cfg['htmlDir'],cfg['pdfDir'])\n```","source":"_posts/2022-07-27-python批量下载公众号历史文章（一）.md","raw":"---\ntitle: 【半自动版】python批量下载公众号历史文章（一）\ndate: 2022-07-27 13:50:59\ncategories:\n- [技术, 实践, python]\n- [兴趣研究, 技术, 爬虫]\ntags:\n- 爬虫\n- 公众号\n- 技术\n- python\n---\n\n### **【老博客地址】**\n&emsp;&emsp;[【CSDN】博客主页](https://blog.csdn.net/MissYourKiss/)\n&emsp;&emsp;[【纯技术交流】python批量下载公众号历史文章（一）](https://blog.csdn.net/MissYourKiss/article/details/100254510)\n&emsp;&emsp;*(在刊载一段时间后，莫名被吞掉了,所以在这里补档)*\n&emsp;&emsp;[python批量下载公众号历史文章（二）](https://blog.csdn.net/MissYourKiss/article/details/100661899)\n\n### **【写在前面】**\n<p style=\"text-indent:2em\">\n前些天和同事讨论问题，什么是人才？讨论细节就不表了，最终总结为一句话：能解决问题的人才是人才。自己爱交朋友，很多朋友都在我有困难的时候帮助过我，也希望自己能够帮助朋友，成为能帮朋友解决问题的人才，所以朋友的请求从来都是来者不拒，力所能及之事一定全力办到！\n</p>\n<p style=\"text-indent:2em\">\n基于这点，给自己挖了很多坑：前些日子写的学习强国自动学习已经完成了一个初步版本，能够自动读文章、自动学习视频、自动分享，但是还不能自动答题，朋友说已经够用了，不过还是希望有时间了完成这块儿的内容；想读黄易老爷子武侠的那位朋友的问题也解决了，虽然下载下来的文字部分章节格式上有些乱，但也满足了朋友的要求，够用就行；学习Python也是一样，因时间关系没有系统的去学习过，只是通过解决各种问题达到学以致用，够用就行。很多博客文章，写有序号，都是计划要分段完成的，希望自己有一天能把所有的坑都填完了。\n</p>\n\n### **【背景】**\n<p style=\"text-indent:2em\">\n昨天和朋友去野钓，路上谈起股票。今年截止到目前，他的收益是40%多。问他炒股的心得，他是数据流派，经常看财务数据，就推荐了几个公众号，同时提出了一个请求，有些公众号历史文章太多，每次翻看之前的文章都得重头刷，问我能不能把这些文章下载到本地，自己想看的时候就看。想着不难，就答应姑且一试。\n</p>\n\n### **【目标】**\n&emsp;&emsp;第一个版本，只是为了实现下载朋友指定的公众号的历史文章，并转换成pdf方便阅读。很多需要手工配合，算是一个半自动的版本吧。\n&emsp;&emsp;后续会陆续减少手工，并把文章存储在数据库里，支持检索等。\n\n### **【思路】**\n&emsp;&emsp;和从网页上爬取小说不同，微信的公众号是通过app操作进行爬取，所以不能直接用chrome查看网页源码进行解析，需要用到第三方抓包工具，网上看了下用的比较多的有fiddler和anyproxy，前者比较简单，就选择了前者，思路如下：\n&emsp;&emsp;1、通过fiddler抓取相应公众号的包（需要手动）；\n&emsp;&emsp;2、通过python进行解析，获取历史文章列表信息json；\n&emsp;&emsp;3、通过python进行解析，获取所有文章信息，包括标题、链接等；\n&emsp;&emsp;4、通过python循环将这些文章下载到本地存为html；\n&emsp;&emsp;5、通过python将文章里面的图片都保存到本地；\n&emsp;&emsp;6、通过python将本地html文件里面的图片链接，修改为本地存储图片的路径（因为只存文章还不行，你会发现存到本地的html文件，里面的图片都无法正常显示）；\n&emsp;&emsp;7、通过python调用wkhtmltopdf工具，将html转换成pdf。\n\n### **【工具】**\n&emsp;&emsp;1、抓包工具fiddler；\n&emsp;&emsp;2、html转pdf工具wkhtmltopdf；\n&emsp;&emsp;3、python3.7及对应的包；\n&emsp;&emsp;4、电脑版微信或者模拟器或者直接用手机也行（如果用手机或者模拟器，需要设置代理）；\n\n### **【准备工作之抓包】**\n&emsp;&emsp;有些公众号的包比较特殊，所以要进行不同的处理。以朋友要求的公众号为例（为了避免广告嫌疑，就不写是啥公众号了）。\n&emsp;&emsp;1、下载fiddler软件，因为公众号里都是https的链接，需要做抓包配置。中间会弹出一些框框让确认，全部点确定就行。\n<br />\n{% asset_img fiddle_setup_1.png fiddle设置 %}\n{% asset_img fiddle_setup_2.png fiddle设置 %}\n\n&emsp;&emsp;2、打开电脑版微信，搜索需要的公众号，点开历史文章列表。通过fiddler查看抓到的包的特点。\n<br />\n{% asset_img analyse_pkg_1.png 打开公众号链接 %}\n{% asset_img analyse_pkg_2.png fiddle分析包特点 %}\n{% asset_img analyse_pkg_3.png fiddle分析包特点 %}\n\n&emsp;&emsp;3、为了避免其他链接的干扰，配置过滤规则，滤掉不需要的链接。\n<br />\n{% asset_img fiddle_filters.png 股票清单和基本信息-网页 %}\n\n\n&emsp;&emsp;4、然后清空fiddler的抓取记录，重新点击历史文章，并不断下拉，直到所有链接都显示出来为止。\n<br />\n{% asset_img fiddle_info_1.png fiddle抓包信息 %}\n{% asset_img fiddle_info_2.png fiddle抓包信息 %}\n\n&emsp;&emsp;5、将过滤之后获得的所有的seesion，以raw的形式保存到本地。\n<br />\n{% asset_img fiddle_raw_1.png fiddle保持raw格式session %}\n{% asset_img fiddle_raw_2.png fiddle保持raw格式session %}\n{% asset_img fiddle_raw_3.png fiddle保持raw格式session %}\n{% asset_img fiddle_raw_4.png fiddle保持raw格式session %}\n\n### **【编码】**\n&emsp;&emsp;**1、标准报文头和需要的包**\n```\n# _*_ coding:utf-8 _*_\nimport os,sys\nimport requests\nimport json\nimport subprocess\nimport re\nimport random\nimport time\nfrom bs4 import BeautifulSoup\nfrom datetime import datetime,timedelta\nfrom time import sleep\n```\n&emsp;&emsp;**2、定义一个文章类，保存文章的基本信息**\n```\nclass ArticleInfo():\n    def __init__(self,url,title,idx_num): #idx_num是为了方便保存图片命名\n        self.url = url\n        self.title = title\n        self.idx_num = idx_num\n```\n&emsp;&emsp;**3、定义读取文件内容的方法（通用）**\n```\ndef read_file(file_path):\n    with open(file_path,\"r\",encoding=\"utf-8\") as f:\n        file_content = f.read()\n    return file_content\n```\n&emsp;&emsp;**4、定义写文件内容的方法（通用）**\n```\ndef save_file(file_path,file_content):\n    with open(file_path,\"w\",encoding=\"utf-8\") as f:\n        f.write(file_content)\n```\n&emsp;&emsp;**5、定义下载网页html的方法（通用）**\n```\ndef get_html(url):\n    headers = {\n        \"Accept\": \"*/*\",\n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat\",\n        \"Accept-Encoding\": \"gzip, deflate\",\n        \"Accept-Language\": \"zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4\",\n        'Connection':'keep-alive'\n    }\n    response = requests.get(url,headers = headers,proxies=None)\n    if response.status_code == 200:\n        htmltxt = response.text #返回的网页正文\n        return htmltxt\n    else:\n        return None\n```\n&emsp;&emsp;**6、定义下载并保存网页图片的方法（通用）**\n```\ndef get_save_image(url,img_file_path):\n    headers = {\n        \"Accept\": \"*/*\",\n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat\",\n        \"Accept-Encoding\": \"gzip, deflate\",\n        \"Accept-Language\": \"zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4\",\n        'Connection':'keep-alive'\n    }\n    response = requests.get(url,headers = headers,proxies=None)\n    with open(img_file_path,\"wb\") as f:\n        f.write(response.content)\n```\n&emsp;&emsp;**7、定义调用下载html和图片的方法（主函数调用此方法开始下载）**\n```\ndef down_html(json_path,html_path):\n    if not os.path.exists(html_path):\n        os.makedirs(html_path) # 创建保存html文件的文件夹\n    local_img_path = os.path.join(html_path,\"images\")\n    if not os.path.lexists(local_img_path):\n        os.makedirs(local_img_path) # 创建保存本地图片的文件夹\n    article_list = get_article_list(json_path)\n    article_list.sort(key=lambda x:x.atc_datetime, reverse=True) # 根据文章发表时间倒序排列\n    tot_article = len(article_list) # 文章的总数量\n    i = 0 #计数用\n    for atc in article_list:\n        i+=1\n        atc_unique_name = str(atc.atc_datetime) + \"_\" + str(atc.idx_num) # 时间+序号 作为同一时间发表的文章的唯一标识\n        html_name = atc_unique_name+\".html\"\n        html_file_path = os.path.join(html_path,html_name)\n        print(i,\"of\",tot_article,atc_unique_name,atc.title)\n        if os.path.exists(html_file_path): # 支持续传\n            print(\"{} existed already!\".format(html_file_path))\n            continue\n        org_atc_html = get_html(atc.url)\n        new_atc_html = rep_image(org_atc_html,local_img_path,html_name)\n        save_file(html_file_path,new_atc_html)\n        sleep(round(random.uniform(1,3),2))\n        \"\"\"for test\n        if i>0 :\n            break\n        \"\"\"\n```\n&emsp;&emsp;**8、查看fiddler保存的json文件结构，定义解析json字符串获取文章列表的方法**\n```\ndef get_article_list(json_path):\n    \"\"\"\n    通过抓取的包的json文件，获取所有文章的信息的列表\n    \"\"\"\n    file_list = os.listdir(json_path) #jsonpath是fiddler导出的文件夹路径\n    article_list = [] # 用来保存所有文章的列表\n    for file in file_list:\n        file_path = os.path.join(json_path,file)\n        file_cont = read_file(file_path)\n        json_cont = json.loads(file_cont)\n        general_msg_list = json_cont['general_msg_list']\n        json_list = json.loads(general_msg_list)\n        #print(json_list['list'][0]['comm_msg_info']['datetime'])\n        for lst in json_list['list']:\n            atc_idx = 0 # 每个时间可以发多篇文章 为了方便后续图片命名\n            seconds_datetime = lst['comm_msg_info']['datetime']\n            atc_datetime = seconds_to_time(seconds_datetime)\n            if lst['comm_msg_info']['type'] == 49: # 49为普通的图文\n                atc_idx+=1\n                url = lst['app_msg_ext_info']['content_url']\n                title = lst['app_msg_ext_info']['title']\n                atc_info = ArticleInfo(url,title,atc_idx,atc_datetime)\n                article_list.append(atc_info)\n            if 1 == lst['app_msg_ext_info']['is_multi']: # 一次发多篇\n                multi_app_msg_item_list = lst['app_msg_ext_info']['multi_app_msg_item_list']\n                for multi in multi_app_msg_item_list:\n                    atc_idx+=1\n                    url = multi['content_url']\n                    title = multi['title']\n                    mul_act_info = ArticleInfo(url,title,atc_idx,atc_datetime)\n                    article_list.append(mul_act_info)\n    return article_list\n```\n<br />\n{% asset_img raw_info.png fiddle保持raw具体内容 %}\n\n&emsp;&emsp;**9、定义替换html中图片src为本地图片的方法（不替换，html中的图片将无法显示）**\n```\ndef chg_img_link(bs_html):\n    link_list = bs_html.findAll(\"link\")\n    for link in link_list:\n        href = link.attrs[\"href\"]\n        if href.startswith(\"//\"):\n            new_href = \"http:\"+href\n            link.attrs[\"href\"]=new_href\n \ndef rep_image(org_html,local_img_path,html_name):\n    bs_html = BeautifulSoup(org_html,\"lxml\")\n    img_list = bs_html.findAll(\"img\")\n    img_idx = 0 # 计数和命名用\n    for img in img_list:\n        img_idx+=1\n        org_url = \"\" # 图片的真实地址\n        if \"data-src\" in img.attrs: # <img  data-src=\"...\"\n            org_url = img.attrs['data-src']\n        elif \"src\" in img.attrs : # <img  src=\"...\"\n            org_url = img.attrs['src']\n        if org_url.startswith(\"//\"):\n            org_url = \"http:\" + org_url\n        if len(org_url) > 0 :\n            print(\"download image \",img_idx)\n            if \"data-type\" in img.attrs:\n                img_type = img.attrs[\"data-type\"]\n            else:\n                img_type = \"png\"\n            img_name = html_name + \"_\" + str(img_idx) + \".\" +img_type\n            img_file_path = os.path.join(local_img_path,img_name)\n            get_save_image(org_url,img_file_path) # 下载并保存图片\n            img.attrs[\"src\"] = \"images/\" + img_name\n        else:\n            img.attrs[\"src\"] = \"\"\n    chg_img_link(bs_html)\n    return str(bs_html)\n```\n<br />\n{% asset_img without_img.png 未替换本地图片源 %}\n{% asset_img with_img.png 替换本地图片源 %}\n\n&emsp;&emsp;**10、定义html转换成pdf的方法**\n```\ndef conv_html_pdf(html_path,pdf_path):\n    if not os.path.exists(pdf_path):\n        os.makedirs(pdf_path)\n    f_list = os.listdir(html_path)\n    for f in f_list:\n        if (not f[-5:]==\".html\") or (\"tmp\" in f): #不是html文件的不转换，含有tmp的不转换\n            continue\n        html_file_path = os.path.join(html_path,f)\n        html_tmp_file = html_file_path[:-5]+\"_tmp.html\" #生成临时文件，供转pdf用\n        html_str = read_file(html_file_path)\n        bs_html = BeautifulSoup(html_str,\"lxml\")\n        pdf_title = \"\"\n        title_tag = bs_html.find(id=\"activity-name\")\n        if title_tag is not None:\n            pdf_title = \"_\"+title_tag.get_text().replace(\" \", \"\").replace(\"  \",\"\").replace(\"\\n\",\"\")\n        print(pdf_title)\n        r_idx = html_file_path.rindex(\"/\") + 1\n        pdf_name = html_file_path[r_idx:-5]+pdf_title\n        pdf_file_path = os.path.join(pdf_path,pdf_name+\".pdf\")\n        \"\"\"\n        加快转换速度，把临时文件中的不必要的元素去掉\n        \"\"\"\n        [s.extract() for s in bs_html([\"script\",\"iframe\",\"link\"])]\n        save_file(html_tmp_file,str(bs_html))\n        call_wkhtmltopdf(html_tmp_file,pdf_file_path)\n ```\n ```\ndef call_wkhtmltopdf(html_file_path,pdf_file_path,skipExists=True,removehtml=True):\n    if skipExists and os.path.exists(pdf_file_path):\n        print(\"pdf_file_path already existed!\")\n        if removehtml :\n            os.remove(html_file_path)\n        return\n    exe_path = cfg['wkhtmltopdf'] #wkhtmltopdf.exe的保存路径\n    cmd_list = []\n    cmd_list.append(\" --load-error-handling ignore \")\n    cmd_list.append(\" \"+ html_file_path +\" \")\n    cmd_list.append(\" \"+ pdf_file_path +\" \")\n    cmd_str = exe_path + \"\".join(cmd_list)\n    print(cmd_str)\n    subprocess.check_call(cmd_str, shell=False)\n    if removehtml:\n        os.remove(html_file_path)\n```\n\n&emsp;&emsp;**11、定义读取保存各文件夹路径的配置文件的方法**\n```\ndef get_config():\n    cfg_file = read_file(\"config/wechat.cfg\")\n    cfg_file = cfg_file.replace(\"\\\\\\\\\",\"/\").replace(\"\\\\\",\"/\") #防止json中有 / 导致无法识别\n    cfg_json = json.loads(cfg_file)\n    return cfg_json\n```\n\n&emsp;&emsp;**【重要】配置文件放置在当前目录的子目录config下，名为wechat.cfg,内容如下**\n```\n{\n    \"jsonDir\": \"./download/wechat/fiddler-raw/Dump-0902-14-43-38/\",\n    \"htmlDir\": \"./download/wechat/html/\",\n    \"pdfDir\": \"./download/wechat/pdf/\",\n    \"wkhtmltopdf\": \"./wkhtmltopdf.exe\"\n}\n```\n\n&emsp;&emsp;**12、定义从秒数获得时间的方法（微信公众号的datetime存放的是从1970-01-01 00:00:00到发表时的秒数）**\n```\ndef seconds_to_time(seconds):\n    taime_array = time.localtime(seconds) # 1970-01-01 00:00:00 到发表时的秒数\n    other_style_time = time.strftime(\"%Y-%m-%d %H:%M:%S\", taime_array)\n    date_time =datetime.strptime(other_style_time, \"%Y-%m-%d %H:%M:%S\")\n    return str(date_time).replace(\"-\",\"\").replace(\":\",\"\").replace(\" \",\"\")\n```\n\n&emsp;&emsp;**13、定义主函数进行调用，没有参数或者参数是html则进行下载，如果是pdf则是html转换成pdf**\n```\ncfg = get_config() # 获得配置文件的全局变量\n#get_article_list(\"./tmp/\") # for test\n#down_html(\"./tmp/\",\"./html/\")# for test\n \nif __name__ == \"__main__\":\n \n    if len(sys.argv) == 1:\n        arg = None\n    else:\n        arg = sys.argv[1]\n    if arg is None or arg == \"html\":\n        down_html(cfg['jsonDir'],cfg['htmlDir'])\n    elif arg == \"pdf\":\n        conv_html_pdf(cfg['htmlDir'],cfg['pdfDir'])\n```\n\n### **【运行效果】**\n<br />\n{% asset_img last_html.png html文件 %}\n{% asset_img last_pdf.png pdf文件 %}\n\n### **【完整代码】**\n```\n# _*_ coding:utf-8 _*_\nimport os,sys\nimport requests\nimport json\nimport subprocess\nimport re\nimport random\nimport time\nfrom bs4 import BeautifulSoup\nfrom datetime import datetime,timedelta\nfrom time import sleep\n \nclass ArticleInfo():\n    def __init__(self,url,title,idx_num,atc_datetime): #idx_num是为了方便保存图片命名\n        self.url = url\n        self.title = title\n        self.idx_num = idx_num\n        self.atc_datetime = atc_datetime\n \ndef read_file(file_path):\n    with open(file_path,\"r\",encoding=\"utf-8\") as f:\n        file_content = f.read()\n    return file_content\n \ndef save_file(file_path,file_content):\n    with open(file_path,\"w\",encoding=\"utf-8\") as f:\n        f.write(file_content)\n \ndef get_html(url):\n    headers = {\n        \"Accept\": \"*/*\",\n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat\",\n        \"Accept-Encoding\": \"gzip, deflate\",\n        \"Accept-Language\": \"zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4\",\n        'Connection':'keep-alive'\n    }\n    response = requests.get(url,headers = headers,proxies=None)\n    if response.status_code == 200:\n        htmltxt = response.text #返回的网页正文\n        return htmltxt\n    else:\n        return None\n \ndef get_save_image(url,img_file_path):\n    headers = {\n        \"Accept\": \"*/*\",\n        \"User-Agent\": \"Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat\",\n        \"Accept-Encoding\": \"gzip, deflate\",\n        \"Accept-Language\": \"zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4\",\n        'Connection':'keep-alive'\n    }\n    response = requests.get(url,headers = headers,proxies=None)\n    with open(img_file_path,\"wb\") as f:\n        f.write(response.content)\n \ndef get_article_list(json_path):\n    \"\"\"\n    通过抓取的包的json文件，获取所有文章的信息的列表\n    \"\"\"\n    file_list = os.listdir(json_path) #jsonpath是fiddler导出的文件夹路径\n    article_list = [] # 用来保存所有文章的列表\n    for file in file_list:\n        file_path = os.path.join(json_path,file)\n        file_cont = read_file(file_path)\n        json_cont = json.loads(file_cont)\n        general_msg_list = json_cont['general_msg_list']\n        json_list = json.loads(general_msg_list)\n        #print(json_list['list'][0]['comm_msg_info']['datetime'])\n        for lst in json_list['list']:\n            atc_idx = 0 # 每个时间可以发多篇文章 为了方便后续图片命名\n            seconds_datetime = lst['comm_msg_info']['datetime']\n            atc_datetime = seconds_to_time(seconds_datetime)\n            if lst['comm_msg_info']['type'] == 49: # 49为普通的图文\n                atc_idx+=1\n                url = lst['app_msg_ext_info']['content_url']\n                title = lst['app_msg_ext_info']['title']\n                atc_info = ArticleInfo(url,title,atc_idx,atc_datetime)\n                article_list.append(atc_info)\n            if 1 == lst['app_msg_ext_info']['is_multi']: # 一次发多篇\n                multi_app_msg_item_list = lst['app_msg_ext_info']['multi_app_msg_item_list']\n                for multi in multi_app_msg_item_list:\n                    atc_idx+=1\n                    url = multi['content_url']\n                    title = multi['title']\n                    mul_act_info = ArticleInfo(url,title,atc_idx,atc_datetime)\n                    article_list.append(mul_act_info)\n    return article_list\n \ndef chg_img_link(bs_html):\n    link_list = bs_html.findAll(\"link\")\n    for link in link_list:\n        href = link.attrs[\"href\"]\n        if href.startswith(\"//\"):\n            new_href = \"http:\"+href\n            link.attrs[\"href\"]=new_href\n \ndef rep_image(org_html,local_img_path,html_name):\n    bs_html = BeautifulSoup(org_html,\"lxml\")\n    img_list = bs_html.findAll(\"img\")\n    img_idx = 0 # 计数和命名用\n    for img in img_list:\n        img_idx+=1\n        org_url = \"\" # 图片的真实地址\n        if \"data-src\" in img.attrs: # <img  data-src=\"...\"\n            org_url = img.attrs['data-src']\n        elif \"src\" in img.attrs : # <img  src=\"...\"\n            org_url = img.attrs['src']\n        if org_url.startswith(\"//\"):\n            org_url = \"http:\" + org_url\n        if len(org_url) > 0 :\n            print(\"download image \",img_idx)\n            if \"data-type\" in img.attrs:\n                img_type = img.attrs[\"data-type\"]\n            else:\n                img_type = \"png\"\n            img_name = html_name + \"_\" + str(img_idx) + \".\" +img_type\n            img_file_path = os.path.join(local_img_path,img_name)\n            get_save_image(org_url,img_file_path) # 下载并保存图片\n            img.attrs[\"src\"] = \"images/\" + img_name\n        else:\n            img.attrs[\"src\"] = \"\"\n    chg_img_link(bs_html)\n    return str(bs_html)\n \n \ndef down_html(json_path,html_path):\n    if not os.path.exists(html_path):\n        os.makedirs(html_path) # 创建保存html文件的文件夹\n    local_img_path = os.path.join(html_path,\"images\")\n    if not os.path.lexists(local_img_path):\n        os.makedirs(local_img_path) # 创建保存本地图片的文件夹\n    article_list = get_article_list(json_path)\n    article_list.sort(key=lambda x:x.atc_datetime, reverse=True) # 根据文章发表时间倒序排列\n    tot_article = len(article_list) # 文章的总数量\n    i = 0 #计数用\n    for atc in article_list:\n        i+=1\n        atc_unique_name = str(atc.atc_datetime) + \"_\" + str(atc.idx_num) # 时间+序号 作为同一时间发表的文章的唯一标识\n        html_name = atc_unique_name+\".html\"\n        html_file_path = os.path.join(html_path,html_name)\n        print(i,\"of\",tot_article,atc_unique_name,atc.title)\n        if os.path.exists(html_file_path): # 支持续传\n            print(\"{} existed already!\".format(html_file_path))\n            continue\n        org_atc_html = get_html(atc.url)\n        new_atc_html = rep_image(org_atc_html,local_img_path,html_name)\n        save_file(html_file_path,new_atc_html)\n        sleep(round(random.uniform(1,3),2))\n        \"\"\"for test\n        if i>0 :\n            break\n        \"\"\"\n \ndef conv_html_pdf(html_path,pdf_path):\n    if not os.path.exists(pdf_path):\n        os.makedirs(pdf_path)\n    f_list = os.listdir(html_path)\n    for f in f_list:\n        if (not f[-5:]==\".html\") or (\"tmp\" in f): #不是html文件的不转换，含有tmp的不转换\n            continue\n        html_file_path = os.path.join(html_path,f)\n        html_tmp_file = html_file_path[:-5]+\"_tmp.html\" #生成临时文件，供转pdf用\n        html_str = read_file(html_file_path)\n        bs_html = BeautifulSoup(html_str,\"lxml\")\n        pdf_title = \"\"\n        title_tag = bs_html.find(id=\"activity-name\")\n        if title_tag is not None:\n            pdf_title = \"_\"+title_tag.get_text().replace(\" \", \"\").replace(\"  \",\"\").replace(\"\\n\",\"\")\n        print(pdf_title)\n        r_idx = html_file_path.rindex(\"/\") + 1\n        pdf_name = html_file_path[r_idx:-5]+pdf_title\n        pdf_file_path = os.path.join(pdf_path,pdf_name+\".pdf\")\n        \"\"\"\n        加快转换速度，把临时文件中的不必要的元素去掉\n        \"\"\"\n        [s.extract() for s in bs_html([\"script\",\"iframe\",\"link\"])]\n        save_file(html_tmp_file,str(bs_html))\n        call_wkhtmltopdf(html_tmp_file,pdf_file_path)\n \ndef call_wkhtmltopdf(html_file_path,pdf_file_path,skipExists=True,removehtml=True):\n    if skipExists and os.path.exists(pdf_file_path):\n        print(\"pdf_file_path already existed!\")\n        if removehtml :\n            os.remove(html_file_path)\n        return\n    exe_path = cfg['wkhtmltopdf'] #wkhtmltopdf.exe的保存路径\n    cmd_list = []\n    cmd_list.append(\" --load-error-handling ignore \")\n    cmd_list.append(\" \"+ html_file_path +\" \")\n    cmd_list.append(\" \"+ pdf_file_path +\" \")\n    cmd_str = exe_path + \"\".join(cmd_list)\n    print(cmd_str)\n    subprocess.check_call(cmd_str, shell=False)\n    if removehtml:\n        os.remove(html_file_path)\n \ndef get_config():\n    cfg_file = read_file(\"config/wechat.cfg\")\n    cfg_file = cfg_file.replace(\"\\\\\\\\\",\"/\").replace(\"\\\\\",\"/\") #防止json中有 / 导致无法识别\n    cfg_json = json.loads(cfg_file)\n    return cfg_json\n \ndef seconds_to_time(seconds):\n    taime_array = time.localtime(seconds) # 1970-01-01 00:00:00 到发表时的秒数\n    other_style_time = time.strftime(\"%Y-%m-%d %H:%M:%S\", taime_array)\n    date_time =datetime.strptime(other_style_time, \"%Y-%m-%d %H:%M:%S\")\n    return str(date_time).replace(\"-\",\"\").replace(\":\",\"\").replace(\" \",\"\")\n \n \ncfg = get_config() # 获得配置文件的全局变量\n#get_article_list(\"./tmp/\") # for test\n#down_html(\"./tmp/\",\"./html/\")# for test\n \nif __name__ == \"__main__\":\n \n    if len(sys.argv) == 1:\n        arg = None\n    else:\n        arg = sys.argv[1]\n    if arg is None or arg == \"html\":\n        down_html(cfg['jsonDir'],cfg['htmlDir'])\n    elif arg == \"pdf\":\n        conv_html_pdf(cfg['htmlDir'],cfg['pdfDir'])\n```","slug":"python批量下载公众号历史文章（一）","published":1,"updated":"2025-08-13T23:42:20.736Z","_id":"clqdww77k0012z4lt32151beg","comments":1,"layout":"post","photos":[],"content":"<h3 id=\"【老博客地址】\"><a href=\"#【老博客地址】\" class=\"headerlink\" title=\"【老博客地址】\"></a><strong>【老博客地址】</strong></h3><p>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/\">【CSDN】博客主页</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/100254510\">【纯技术交流】python批量下载公众号历史文章（一）</a><br>&emsp;&emsp;<em>(在刊载一段时间后，莫名被吞掉了,所以在这里补档)</em><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/100661899\">python批量下载公众号历史文章（二）</a></p>\n<h3 id=\"【写在前面】\"><a href=\"#【写在前面】\" class=\"headerlink\" title=\"【写在前面】\"></a><strong>【写在前面】</strong></h3><p style=\"text-indent:2em\">\n前些天和同事讨论问题，什么是人才？讨论细节就不表了，最终总结为一句话：能解决问题的人才是人才。自己爱交朋友，很多朋友都在我有困难的时候帮助过我，也希望自己能够帮助朋友，成为能帮朋友解决问题的人才，所以朋友的请求从来都是来者不拒，力所能及之事一定全力办到！\n</p>\n<p style=\"text-indent:2em\">\n基于这点，给自己挖了很多坑：前些日子写的学习强国自动学习已经完成了一个初步版本，能够自动读文章、自动学习视频、自动分享，但是还不能自动答题，朋友说已经够用了，不过还是希望有时间了完成这块儿的内容；想读黄易老爷子武侠的那位朋友的问题也解决了，虽然下载下来的文字部分章节格式上有些乱，但也满足了朋友的要求，够用就行；学习Python也是一样，因时间关系没有系统的去学习过，只是通过解决各种问题达到学以致用，够用就行。很多博客文章，写有序号，都是计划要分段完成的，希望自己有一天能把所有的坑都填完了。\n</p>\n\n<h3 id=\"【背景】\"><a href=\"#【背景】\" class=\"headerlink\" title=\"【背景】\"></a><strong>【背景】</strong></h3><p style=\"text-indent:2em\">\n昨天和朋友去野钓，路上谈起股票。今年截止到目前，他的收益是40%多。问他炒股的心得，他是数据流派，经常看财务数据，就推荐了几个公众号，同时提出了一个请求，有些公众号历史文章太多，每次翻看之前的文章都得重头刷，问我能不能把这些文章下载到本地，自己想看的时候就看。想着不难，就答应姑且一试。\n</p>\n\n<h3 id=\"【目标】\"><a href=\"#【目标】\" class=\"headerlink\" title=\"【目标】\"></a><strong>【目标】</strong></h3><p>&emsp;&emsp;第一个版本，只是为了实现下载朋友指定的公众号的历史文章，并转换成pdf方便阅读。很多需要手工配合，算是一个半自动的版本吧。<br>&emsp;&emsp;后续会陆续减少手工，并把文章存储在数据库里，支持检索等。</p>\n<h3 id=\"【思路】\"><a href=\"#【思路】\" class=\"headerlink\" title=\"【思路】\"></a><strong>【思路】</strong></h3><p>&emsp;&emsp;和从网页上爬取小说不同，微信的公众号是通过app操作进行爬取，所以不能直接用chrome查看网页源码进行解析，需要用到第三方抓包工具，网上看了下用的比较多的有fiddler和anyproxy，前者比较简单，就选择了前者，思路如下：<br>&emsp;&emsp;1、通过fiddler抓取相应公众号的包（需要手动）；<br>&emsp;&emsp;2、通过python进行解析，获取历史文章列表信息json；<br>&emsp;&emsp;3、通过python进行解析，获取所有文章信息，包括标题、链接等；<br>&emsp;&emsp;4、通过python循环将这些文章下载到本地存为html；<br>&emsp;&emsp;5、通过python将文章里面的图片都保存到本地；<br>&emsp;&emsp;6、通过python将本地html文件里面的图片链接，修改为本地存储图片的路径（因为只存文章还不行，你会发现存到本地的html文件，里面的图片都无法正常显示）；<br>&emsp;&emsp;7、通过python调用wkhtmltopdf工具，将html转换成pdf。</p>\n<h3 id=\"【工具】\"><a href=\"#【工具】\" class=\"headerlink\" title=\"【工具】\"></a><strong>【工具】</strong></h3><p>&emsp;&emsp;1、抓包工具fiddler；<br>&emsp;&emsp;2、html转pdf工具wkhtmltopdf；<br>&emsp;&emsp;3、python3.7及对应的包；<br>&emsp;&emsp;4、电脑版微信或者模拟器或者直接用手机也行（如果用手机或者模拟器，需要设置代理）；</p>\n<h3 id=\"【准备工作之抓包】\"><a href=\"#【准备工作之抓包】\" class=\"headerlink\" title=\"【准备工作之抓包】\"></a><strong>【准备工作之抓包】</strong></h3><p>&emsp;&emsp;有些公众号的包比较特殊，所以要进行不同的处理。以朋友要求的公众号为例（为了避免广告嫌疑，就不写是啥公众号了）。<br>&emsp;&emsp;1、下载fiddler软件，因为公众号里都是https的链接，需要做抓包配置。中间会弹出一些框框让确认，全部点确定就行。<br><br></p>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_setup_1.png\" class title=\"fiddle设置\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_setup_2.png\" class title=\"fiddle设置\">\n\n<p>&emsp;&emsp;2、打开电脑版微信，搜索需要的公众号，点开历史文章列表。通过fiddler查看抓到的包的特点。<br><br></p>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/analyse_pkg_1.png\" class title=\"打开公众号链接\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/analyse_pkg_2.png\" class title=\"fiddle分析包特点\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/analyse_pkg_3.png\" class title=\"fiddle分析包特点\">\n\n<p>&emsp;&emsp;3、为了避免其他链接的干扰，配置过滤规则，滤掉不需要的链接。<br><br></p>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_filters.png\" class title=\"股票清单和基本信息-网页\">\n\n\n<p>&emsp;&emsp;4、然后清空fiddler的抓取记录，重新点击历史文章，并不断下拉，直到所有链接都显示出来为止。<br><br></p>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_info_1.png\" class title=\"fiddle抓包信息\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_info_2.png\" class title=\"fiddle抓包信息\">\n\n<p>&emsp;&emsp;5、将过滤之后获得的所有的seesion，以raw的形式保存到本地。<br><br></p>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_1.png\" class title=\"fiddle保持raw格式session\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_2.png\" class title=\"fiddle保持raw格式session\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_3.png\" class title=\"fiddle保持raw格式session\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_4.png\" class title=\"fiddle保持raw格式session\">\n\n<h3 id=\"【编码】\"><a href=\"#【编码】\" class=\"headerlink\" title=\"【编码】\"></a><strong>【编码】</strong></h3><p>&emsp;&emsp;<strong>1、标准报文头和需要的包</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># _*_ coding:utf-8 _*_</span><br><span class=\"line\">import os,sys</span><br><span class=\"line\">import requests</span><br><span class=\"line\">import json</span><br><span class=\"line\">import subprocess</span><br><span class=\"line\">import re</span><br><span class=\"line\">import random</span><br><span class=\"line\">import time</span><br><span class=\"line\">from bs4 import BeautifulSoup</span><br><span class=\"line\">from datetime import datetime,timedelta</span><br><span class=\"line\">from time import sleep</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>2、定义一个文章类，保存文章的基本信息</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class ArticleInfo():</span><br><span class=\"line\">    def __init__(self,url,title,idx_num): #idx_num是为了方便保存图片命名</span><br><span class=\"line\">        self.url = url</span><br><span class=\"line\">        self.title = title</span><br><span class=\"line\">        self.idx_num = idx_num</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>3、定义读取文件内容的方法（通用）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def read_file(file_path):</span><br><span class=\"line\">    with open(file_path,&quot;r&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class=\"line\">        file_content = f.read()</span><br><span class=\"line\">    return file_content</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>4、定义写文件内容的方法（通用）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def save_file(file_path,file_content):</span><br><span class=\"line\">    with open(file_path,&quot;w&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class=\"line\">        f.write(file_content)</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>5、定义下载网页html的方法（通用）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def get_html(url):</span><br><span class=\"line\">    headers = &#123;</span><br><span class=\"line\">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class=\"line\">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class=\"line\">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class=\"line\">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class=\"line\">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class=\"line\">    if response.status_code == 200:</span><br><span class=\"line\">        htmltxt = response.text #返回的网页正文</span><br><span class=\"line\">        return htmltxt</span><br><span class=\"line\">    else:</span><br><span class=\"line\">        return None</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>6、定义下载并保存网页图片的方法（通用）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def get_save_image(url,img_file_path):</span><br><span class=\"line\">    headers = &#123;</span><br><span class=\"line\">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class=\"line\">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class=\"line\">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class=\"line\">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class=\"line\">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class=\"line\">    with open(img_file_path,&quot;wb&quot;) as f:</span><br><span class=\"line\">        f.write(response.content)</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>7、定义调用下载html和图片的方法（主函数调用此方法开始下载）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def down_html(json_path,html_path):</span><br><span class=\"line\">    if not os.path.exists(html_path):</span><br><span class=\"line\">        os.makedirs(html_path) # 创建保存html文件的文件夹</span><br><span class=\"line\">    local_img_path = os.path.join(html_path,&quot;images&quot;)</span><br><span class=\"line\">    if not os.path.lexists(local_img_path):</span><br><span class=\"line\">        os.makedirs(local_img_path) # 创建保存本地图片的文件夹</span><br><span class=\"line\">    article_list = get_article_list(json_path)</span><br><span class=\"line\">    article_list.sort(key=lambda x:x.atc_datetime, reverse=True) # 根据文章发表时间倒序排列</span><br><span class=\"line\">    tot_article = len(article_list) # 文章的总数量</span><br><span class=\"line\">    i = 0 #计数用</span><br><span class=\"line\">    for atc in article_list:</span><br><span class=\"line\">        i+=1</span><br><span class=\"line\">        atc_unique_name = str(atc.atc_datetime) + &quot;_&quot; + str(atc.idx_num) # 时间+序号 作为同一时间发表的文章的唯一标识</span><br><span class=\"line\">        html_name = atc_unique_name+&quot;.html&quot;</span><br><span class=\"line\">        html_file_path = os.path.join(html_path,html_name)</span><br><span class=\"line\">        print(i,&quot;of&quot;,tot_article,atc_unique_name,atc.title)</span><br><span class=\"line\">        if os.path.exists(html_file_path): # 支持续传</span><br><span class=\"line\">            print(&quot;&#123;&#125; existed already!&quot;.format(html_file_path))</span><br><span class=\"line\">            continue</span><br><span class=\"line\">        org_atc_html = get_html(atc.url)</span><br><span class=\"line\">        new_atc_html = rep_image(org_atc_html,local_img_path,html_name)</span><br><span class=\"line\">        save_file(html_file_path,new_atc_html)</span><br><span class=\"line\">        sleep(round(random.uniform(1,3),2))</span><br><span class=\"line\">        &quot;&quot;&quot;for test</span><br><span class=\"line\">        if i&gt;0 :</span><br><span class=\"line\">            break</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>8、查看fiddler保存的json文件结构，定义解析json字符串获取文章列表的方法</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def get_article_list(json_path):</span><br><span class=\"line\">    &quot;&quot;&quot;</span><br><span class=\"line\">    通过抓取的包的json文件，获取所有文章的信息的列表</span><br><span class=\"line\">    &quot;&quot;&quot;</span><br><span class=\"line\">    file_list = os.listdir(json_path) #jsonpath是fiddler导出的文件夹路径</span><br><span class=\"line\">    article_list = [] # 用来保存所有文章的列表</span><br><span class=\"line\">    for file in file_list:</span><br><span class=\"line\">        file_path = os.path.join(json_path,file)</span><br><span class=\"line\">        file_cont = read_file(file_path)</span><br><span class=\"line\">        json_cont = json.loads(file_cont)</span><br><span class=\"line\">        general_msg_list = json_cont[&#x27;general_msg_list&#x27;]</span><br><span class=\"line\">        json_list = json.loads(general_msg_list)</span><br><span class=\"line\">        #print(json_list[&#x27;list&#x27;][0][&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;])</span><br><span class=\"line\">        for lst in json_list[&#x27;list&#x27;]:</span><br><span class=\"line\">            atc_idx = 0 # 每个时间可以发多篇文章 为了方便后续图片命名</span><br><span class=\"line\">            seconds_datetime = lst[&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;]</span><br><span class=\"line\">            atc_datetime = seconds_to_time(seconds_datetime)</span><br><span class=\"line\">            if lst[&#x27;comm_msg_info&#x27;][&#x27;type&#x27;] == 49: # 49为普通的图文</span><br><span class=\"line\">                atc_idx+=1</span><br><span class=\"line\">                url = lst[&#x27;app_msg_ext_info&#x27;][&#x27;content_url&#x27;]</span><br><span class=\"line\">                title = lst[&#x27;app_msg_ext_info&#x27;][&#x27;title&#x27;]</span><br><span class=\"line\">                atc_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class=\"line\">                article_list.append(atc_info)</span><br><span class=\"line\">            if 1 == lst[&#x27;app_msg_ext_info&#x27;][&#x27;is_multi&#x27;]: # 一次发多篇</span><br><span class=\"line\">                multi_app_msg_item_list = lst[&#x27;app_msg_ext_info&#x27;][&#x27;multi_app_msg_item_list&#x27;]</span><br><span class=\"line\">                for multi in multi_app_msg_item_list:</span><br><span class=\"line\">                    atc_idx+=1</span><br><span class=\"line\">                    url = multi[&#x27;content_url&#x27;]</span><br><span class=\"line\">                    title = multi[&#x27;title&#x27;]</span><br><span class=\"line\">                    mul_act_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class=\"line\">                    article_list.append(mul_act_info)</span><br><span class=\"line\">    return article_list</span><br></pre></td></tr></table></figure>\n<br>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/raw_info.png\" class title=\"fiddle保持raw具体内容\">\n\n<p>&emsp;&emsp;<strong>9、定义替换html中图片src为本地图片的方法（不替换，html中的图片将无法显示）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def chg_img_link(bs_html):</span><br><span class=\"line\">    link_list = bs_html.findAll(&quot;link&quot;)</span><br><span class=\"line\">    for link in link_list:</span><br><span class=\"line\">        href = link.attrs[&quot;href&quot;]</span><br><span class=\"line\">        if href.startswith(&quot;//&quot;):</span><br><span class=\"line\">            new_href = &quot;http:&quot;+href</span><br><span class=\"line\">            link.attrs[&quot;href&quot;]=new_href</span><br><span class=\"line\"> </span><br><span class=\"line\">def rep_image(org_html,local_img_path,html_name):</span><br><span class=\"line\">    bs_html = BeautifulSoup(org_html,&quot;lxml&quot;)</span><br><span class=\"line\">    img_list = bs_html.findAll(&quot;img&quot;)</span><br><span class=\"line\">    img_idx = 0 # 计数和命名用</span><br><span class=\"line\">    for img in img_list:</span><br><span class=\"line\">        img_idx+=1</span><br><span class=\"line\">        org_url = &quot;&quot; # 图片的真实地址</span><br><span class=\"line\">        if &quot;data-src&quot; in img.attrs: # &lt;img  data-src=&quot;...&quot;</span><br><span class=\"line\">            org_url = img.attrs[&#x27;data-src&#x27;]</span><br><span class=\"line\">        elif &quot;src&quot; in img.attrs : # &lt;img  src=&quot;...&quot;</span><br><span class=\"line\">            org_url = img.attrs[&#x27;src&#x27;]</span><br><span class=\"line\">        if org_url.startswith(&quot;//&quot;):</span><br><span class=\"line\">            org_url = &quot;http:&quot; + org_url</span><br><span class=\"line\">        if len(org_url) &gt; 0 :</span><br><span class=\"line\">            print(&quot;download image &quot;,img_idx)</span><br><span class=\"line\">            if &quot;data-type&quot; in img.attrs:</span><br><span class=\"line\">                img_type = img.attrs[&quot;data-type&quot;]</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                img_type = &quot;png&quot;</span><br><span class=\"line\">            img_name = html_name + &quot;_&quot; + str(img_idx) + &quot;.&quot; +img_type</span><br><span class=\"line\">            img_file_path = os.path.join(local_img_path,img_name)</span><br><span class=\"line\">            get_save_image(org_url,img_file_path) # 下载并保存图片</span><br><span class=\"line\">            img.attrs[&quot;src&quot;] = &quot;images/&quot; + img_name</span><br><span class=\"line\">        else:</span><br><span class=\"line\">            img.attrs[&quot;src&quot;] = &quot;&quot;</span><br><span class=\"line\">    chg_img_link(bs_html)</span><br><span class=\"line\">    return str(bs_html)</span><br></pre></td></tr></table></figure>\n<br>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/without_img.png\" class title=\"未替换本地图片源\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/with_img.png\" class title=\"替换本地图片源\">\n\n<p>&emsp;&emsp;<strong>10、定义html转换成pdf的方法</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def conv_html_pdf(html_path,pdf_path):</span><br><span class=\"line\">    if not os.path.exists(pdf_path):</span><br><span class=\"line\">        os.makedirs(pdf_path)</span><br><span class=\"line\">    f_list = os.listdir(html_path)</span><br><span class=\"line\">    for f in f_list:</span><br><span class=\"line\">        if (not f[-5:]==&quot;.html&quot;) or (&quot;tmp&quot; in f): #不是html文件的不转换，含有tmp的不转换</span><br><span class=\"line\">            continue</span><br><span class=\"line\">        html_file_path = os.path.join(html_path,f)</span><br><span class=\"line\">        html_tmp_file = html_file_path[:-5]+&quot;_tmp.html&quot; #生成临时文件，供转pdf用</span><br><span class=\"line\">        html_str = read_file(html_file_path)</span><br><span class=\"line\">        bs_html = BeautifulSoup(html_str,&quot;lxml&quot;)</span><br><span class=\"line\">        pdf_title = &quot;&quot;</span><br><span class=\"line\">        title_tag = bs_html.find(id=&quot;activity-name&quot;)</span><br><span class=\"line\">        if title_tag is not None:</span><br><span class=\"line\">            pdf_title = &quot;_&quot;+title_tag.get_text().replace(&quot; &quot;, &quot;&quot;).replace(&quot;  &quot;,&quot;&quot;).replace(&quot;\\n&quot;,&quot;&quot;)</span><br><span class=\"line\">        print(pdf_title)</span><br><span class=\"line\">        r_idx = html_file_path.rindex(&quot;/&quot;) + 1</span><br><span class=\"line\">        pdf_name = html_file_path[r_idx:-5]+pdf_title</span><br><span class=\"line\">        pdf_file_path = os.path.join(pdf_path,pdf_name+&quot;.pdf&quot;)</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br><span class=\"line\">        加快转换速度，把临时文件中的不必要的元素去掉</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br><span class=\"line\">        [s.extract() for s in bs_html([&quot;script&quot;,&quot;iframe&quot;,&quot;link&quot;])]</span><br><span class=\"line\">        save_file(html_tmp_file,str(bs_html))</span><br><span class=\"line\">        call_wkhtmltopdf(html_tmp_file,pdf_file_path)</span><br></pre></td></tr></table></figure>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def call_wkhtmltopdf(html_file_path,pdf_file_path,skipExists=True,removehtml=True):</span><br><span class=\"line\">    if skipExists and os.path.exists(pdf_file_path):</span><br><span class=\"line\">        print(&quot;pdf_file_path already existed!&quot;)</span><br><span class=\"line\">        if removehtml :</span><br><span class=\"line\">            os.remove(html_file_path)</span><br><span class=\"line\">        return</span><br><span class=\"line\">    exe_path = cfg[&#x27;wkhtmltopdf&#x27;] #wkhtmltopdf.exe的保存路径</span><br><span class=\"line\">    cmd_list = []</span><br><span class=\"line\">    cmd_list.append(&quot; --load-error-handling ignore &quot;)</span><br><span class=\"line\">    cmd_list.append(&quot; &quot;+ html_file_path +&quot; &quot;)</span><br><span class=\"line\">    cmd_list.append(&quot; &quot;+ pdf_file_path +&quot; &quot;)</span><br><span class=\"line\">    cmd_str = exe_path + &quot;&quot;.join(cmd_list)</span><br><span class=\"line\">    print(cmd_str)</span><br><span class=\"line\">    subprocess.check_call(cmd_str, shell=False)</span><br><span class=\"line\">    if removehtml:</span><br><span class=\"line\">        os.remove(html_file_path)</span><br></pre></td></tr></table></figure>\n\n<p>&emsp;&emsp;<strong>11、定义读取保存各文件夹路径的配置文件的方法</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def get_config():</span><br><span class=\"line\">    cfg_file = read_file(&quot;config/wechat.cfg&quot;)</span><br><span class=\"line\">    cfg_file = cfg_file.replace(&quot;\\\\\\\\&quot;,&quot;/&quot;).replace(&quot;\\\\&quot;,&quot;/&quot;) #防止json中有 / 导致无法识别</span><br><span class=\"line\">    cfg_json = json.loads(cfg_file)</span><br><span class=\"line\">    return cfg_json</span><br></pre></td></tr></table></figure>\n\n<p>&emsp;&emsp;<strong>【重要】配置文件放置在当前目录的子目录config下，名为wechat.cfg,内容如下</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;jsonDir&quot;: &quot;./download/wechat/fiddler-raw/Dump-0902-14-43-38/&quot;,</span><br><span class=\"line\">    &quot;htmlDir&quot;: &quot;./download/wechat/html/&quot;,</span><br><span class=\"line\">    &quot;pdfDir&quot;: &quot;./download/wechat/pdf/&quot;,</span><br><span class=\"line\">    &quot;wkhtmltopdf&quot;: &quot;./wkhtmltopdf.exe&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>&emsp;&emsp;<strong>12、定义从秒数获得时间的方法（微信公众号的datetime存放的是从1970-01-01 00:00:00到发表时的秒数）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def seconds_to_time(seconds):</span><br><span class=\"line\">    taime_array = time.localtime(seconds) # 1970-01-01 00:00:00 到发表时的秒数</span><br><span class=\"line\">    other_style_time = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, taime_array)</span><br><span class=\"line\">    date_time =datetime.strptime(other_style_time, &quot;%Y-%m-%d %H:%M:%S&quot;)</span><br><span class=\"line\">    return str(date_time).replace(&quot;-&quot;,&quot;&quot;).replace(&quot;:&quot;,&quot;&quot;).replace(&quot; &quot;,&quot;&quot;)</span><br></pre></td></tr></table></figure>\n\n<p>&emsp;&emsp;<strong>13、定义主函数进行调用，没有参数或者参数是html则进行下载，如果是pdf则是html转换成pdf</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cfg = get_config() # 获得配置文件的全局变量</span><br><span class=\"line\">#get_article_list(&quot;./tmp/&quot;) # for test</span><br><span class=\"line\">#down_html(&quot;./tmp/&quot;,&quot;./html/&quot;)# for test</span><br><span class=\"line\"> </span><br><span class=\"line\">if __name__ == &quot;__main__&quot;:</span><br><span class=\"line\"> </span><br><span class=\"line\">    if len(sys.argv) == 1:</span><br><span class=\"line\">        arg = None</span><br><span class=\"line\">    else:</span><br><span class=\"line\">        arg = sys.argv[1]</span><br><span class=\"line\">    if arg is None or arg == &quot;html&quot;:</span><br><span class=\"line\">        down_html(cfg[&#x27;jsonDir&#x27;],cfg[&#x27;htmlDir&#x27;])</span><br><span class=\"line\">    elif arg == &quot;pdf&quot;:</span><br><span class=\"line\">        conv_html_pdf(cfg[&#x27;htmlDir&#x27;],cfg[&#x27;pdfDir&#x27;])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"【运行效果】\"><a href=\"#【运行效果】\" class=\"headerlink\" title=\"【运行效果】\"></a><strong>【运行效果】</strong></h3><br>\n\n\n\n<h3 id=\"【完整代码】\"><a href=\"#【完整代码】\" class=\"headerlink\" title=\"【完整代码】\"></a><strong>【完整代码】</strong></h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># _*_ coding:utf-8 _*_</span><br><span class=\"line\">import os,sys</span><br><span class=\"line\">import requests</span><br><span class=\"line\">import json</span><br><span class=\"line\">import subprocess</span><br><span class=\"line\">import re</span><br><span class=\"line\">import random</span><br><span class=\"line\">import time</span><br><span class=\"line\">from bs4 import BeautifulSoup</span><br><span class=\"line\">from datetime import datetime,timedelta</span><br><span class=\"line\">from time import sleep</span><br><span class=\"line\"> </span><br><span class=\"line\">class ArticleInfo():</span><br><span class=\"line\">    def __init__(self,url,title,idx_num,atc_datetime): #idx_num是为了方便保存图片命名</span><br><span class=\"line\">        self.url = url</span><br><span class=\"line\">        self.title = title</span><br><span class=\"line\">        self.idx_num = idx_num</span><br><span class=\"line\">        self.atc_datetime = atc_datetime</span><br><span class=\"line\"> </span><br><span class=\"line\">def read_file(file_path):</span><br><span class=\"line\">    with open(file_path,&quot;r&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class=\"line\">        file_content = f.read()</span><br><span class=\"line\">    return file_content</span><br><span class=\"line\"> </span><br><span class=\"line\">def save_file(file_path,file_content):</span><br><span class=\"line\">    with open(file_path,&quot;w&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class=\"line\">        f.write(file_content)</span><br><span class=\"line\"> </span><br><span class=\"line\">def get_html(url):</span><br><span class=\"line\">    headers = &#123;</span><br><span class=\"line\">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class=\"line\">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class=\"line\">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class=\"line\">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class=\"line\">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class=\"line\">    if response.status_code == 200:</span><br><span class=\"line\">        htmltxt = response.text #返回的网页正文</span><br><span class=\"line\">        return htmltxt</span><br><span class=\"line\">    else:</span><br><span class=\"line\">        return None</span><br><span class=\"line\"> </span><br><span class=\"line\">def get_save_image(url,img_file_path):</span><br><span class=\"line\">    headers = &#123;</span><br><span class=\"line\">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class=\"line\">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class=\"line\">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class=\"line\">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class=\"line\">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class=\"line\">    with open(img_file_path,&quot;wb&quot;) as f:</span><br><span class=\"line\">        f.write(response.content)</span><br><span class=\"line\"> </span><br><span class=\"line\">def get_article_list(json_path):</span><br><span class=\"line\">    &quot;&quot;&quot;</span><br><span class=\"line\">    通过抓取的包的json文件，获取所有文章的信息的列表</span><br><span class=\"line\">    &quot;&quot;&quot;</span><br><span class=\"line\">    file_list = os.listdir(json_path) #jsonpath是fiddler导出的文件夹路径</span><br><span class=\"line\">    article_list = [] # 用来保存所有文章的列表</span><br><span class=\"line\">    for file in file_list:</span><br><span class=\"line\">        file_path = os.path.join(json_path,file)</span><br><span class=\"line\">        file_cont = read_file(file_path)</span><br><span class=\"line\">        json_cont = json.loads(file_cont)</span><br><span class=\"line\">        general_msg_list = json_cont[&#x27;general_msg_list&#x27;]</span><br><span class=\"line\">        json_list = json.loads(general_msg_list)</span><br><span class=\"line\">        #print(json_list[&#x27;list&#x27;][0][&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;])</span><br><span class=\"line\">        for lst in json_list[&#x27;list&#x27;]:</span><br><span class=\"line\">            atc_idx = 0 # 每个时间可以发多篇文章 为了方便后续图片命名</span><br><span class=\"line\">            seconds_datetime = lst[&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;]</span><br><span class=\"line\">            atc_datetime = seconds_to_time(seconds_datetime)</span><br><span class=\"line\">            if lst[&#x27;comm_msg_info&#x27;][&#x27;type&#x27;] == 49: # 49为普通的图文</span><br><span class=\"line\">                atc_idx+=1</span><br><span class=\"line\">                url = lst[&#x27;app_msg_ext_info&#x27;][&#x27;content_url&#x27;]</span><br><span class=\"line\">                title = lst[&#x27;app_msg_ext_info&#x27;][&#x27;title&#x27;]</span><br><span class=\"line\">                atc_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class=\"line\">                article_list.append(atc_info)</span><br><span class=\"line\">            if 1 == lst[&#x27;app_msg_ext_info&#x27;][&#x27;is_multi&#x27;]: # 一次发多篇</span><br><span class=\"line\">                multi_app_msg_item_list = lst[&#x27;app_msg_ext_info&#x27;][&#x27;multi_app_msg_item_list&#x27;]</span><br><span class=\"line\">                for multi in multi_app_msg_item_list:</span><br><span class=\"line\">                    atc_idx+=1</span><br><span class=\"line\">                    url = multi[&#x27;content_url&#x27;]</span><br><span class=\"line\">                    title = multi[&#x27;title&#x27;]</span><br><span class=\"line\">                    mul_act_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class=\"line\">                    article_list.append(mul_act_info)</span><br><span class=\"line\">    return article_list</span><br><span class=\"line\"> </span><br><span class=\"line\">def chg_img_link(bs_html):</span><br><span class=\"line\">    link_list = bs_html.findAll(&quot;link&quot;)</span><br><span class=\"line\">    for link in link_list:</span><br><span class=\"line\">        href = link.attrs[&quot;href&quot;]</span><br><span class=\"line\">        if href.startswith(&quot;//&quot;):</span><br><span class=\"line\">            new_href = &quot;http:&quot;+href</span><br><span class=\"line\">            link.attrs[&quot;href&quot;]=new_href</span><br><span class=\"line\"> </span><br><span class=\"line\">def rep_image(org_html,local_img_path,html_name):</span><br><span class=\"line\">    bs_html = BeautifulSoup(org_html,&quot;lxml&quot;)</span><br><span class=\"line\">    img_list = bs_html.findAll(&quot;img&quot;)</span><br><span class=\"line\">    img_idx = 0 # 计数和命名用</span><br><span class=\"line\">    for img in img_list:</span><br><span class=\"line\">        img_idx+=1</span><br><span class=\"line\">        org_url = &quot;&quot; # 图片的真实地址</span><br><span class=\"line\">        if &quot;data-src&quot; in img.attrs: # &lt;img  data-src=&quot;...&quot;</span><br><span class=\"line\">            org_url = img.attrs[&#x27;data-src&#x27;]</span><br><span class=\"line\">        elif &quot;src&quot; in img.attrs : # &lt;img  src=&quot;...&quot;</span><br><span class=\"line\">            org_url = img.attrs[&#x27;src&#x27;]</span><br><span class=\"line\">        if org_url.startswith(&quot;//&quot;):</span><br><span class=\"line\">            org_url = &quot;http:&quot; + org_url</span><br><span class=\"line\">        if len(org_url) &gt; 0 :</span><br><span class=\"line\">            print(&quot;download image &quot;,img_idx)</span><br><span class=\"line\">            if &quot;data-type&quot; in img.attrs:</span><br><span class=\"line\">                img_type = img.attrs[&quot;data-type&quot;]</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                img_type = &quot;png&quot;</span><br><span class=\"line\">            img_name = html_name + &quot;_&quot; + str(img_idx) + &quot;.&quot; +img_type</span><br><span class=\"line\">            img_file_path = os.path.join(local_img_path,img_name)</span><br><span class=\"line\">            get_save_image(org_url,img_file_path) # 下载并保存图片</span><br><span class=\"line\">            img.attrs[&quot;src&quot;] = &quot;images/&quot; + img_name</span><br><span class=\"line\">        else:</span><br><span class=\"line\">            img.attrs[&quot;src&quot;] = &quot;&quot;</span><br><span class=\"line\">    chg_img_link(bs_html)</span><br><span class=\"line\">    return str(bs_html)</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">def down_html(json_path,html_path):</span><br><span class=\"line\">    if not os.path.exists(html_path):</span><br><span class=\"line\">        os.makedirs(html_path) # 创建保存html文件的文件夹</span><br><span class=\"line\">    local_img_path = os.path.join(html_path,&quot;images&quot;)</span><br><span class=\"line\">    if not os.path.lexists(local_img_path):</span><br><span class=\"line\">        os.makedirs(local_img_path) # 创建保存本地图片的文件夹</span><br><span class=\"line\">    article_list = get_article_list(json_path)</span><br><span class=\"line\">    article_list.sort(key=lambda x:x.atc_datetime, reverse=True) # 根据文章发表时间倒序排列</span><br><span class=\"line\">    tot_article = len(article_list) # 文章的总数量</span><br><span class=\"line\">    i = 0 #计数用</span><br><span class=\"line\">    for atc in article_list:</span><br><span class=\"line\">        i+=1</span><br><span class=\"line\">        atc_unique_name = str(atc.atc_datetime) + &quot;_&quot; + str(atc.idx_num) # 时间+序号 作为同一时间发表的文章的唯一标识</span><br><span class=\"line\">        html_name = atc_unique_name+&quot;.html&quot;</span><br><span class=\"line\">        html_file_path = os.path.join(html_path,html_name)</span><br><span class=\"line\">        print(i,&quot;of&quot;,tot_article,atc_unique_name,atc.title)</span><br><span class=\"line\">        if os.path.exists(html_file_path): # 支持续传</span><br><span class=\"line\">            print(&quot;&#123;&#125; existed already!&quot;.format(html_file_path))</span><br><span class=\"line\">            continue</span><br><span class=\"line\">        org_atc_html = get_html(atc.url)</span><br><span class=\"line\">        new_atc_html = rep_image(org_atc_html,local_img_path,html_name)</span><br><span class=\"line\">        save_file(html_file_path,new_atc_html)</span><br><span class=\"line\">        sleep(round(random.uniform(1,3),2))</span><br><span class=\"line\">        &quot;&quot;&quot;for test</span><br><span class=\"line\">        if i&gt;0 :</span><br><span class=\"line\">            break</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">def conv_html_pdf(html_path,pdf_path):</span><br><span class=\"line\">    if not os.path.exists(pdf_path):</span><br><span class=\"line\">        os.makedirs(pdf_path)</span><br><span class=\"line\">    f_list = os.listdir(html_path)</span><br><span class=\"line\">    for f in f_list:</span><br><span class=\"line\">        if (not f[-5:]==&quot;.html&quot;) or (&quot;tmp&quot; in f): #不是html文件的不转换，含有tmp的不转换</span><br><span class=\"line\">            continue</span><br><span class=\"line\">        html_file_path = os.path.join(html_path,f)</span><br><span class=\"line\">        html_tmp_file = html_file_path[:-5]+&quot;_tmp.html&quot; #生成临时文件，供转pdf用</span><br><span class=\"line\">        html_str = read_file(html_file_path)</span><br><span class=\"line\">        bs_html = BeautifulSoup(html_str,&quot;lxml&quot;)</span><br><span class=\"line\">        pdf_title = &quot;&quot;</span><br><span class=\"line\">        title_tag = bs_html.find(id=&quot;activity-name&quot;)</span><br><span class=\"line\">        if title_tag is not None:</span><br><span class=\"line\">            pdf_title = &quot;_&quot;+title_tag.get_text().replace(&quot; &quot;, &quot;&quot;).replace(&quot;  &quot;,&quot;&quot;).replace(&quot;\\n&quot;,&quot;&quot;)</span><br><span class=\"line\">        print(pdf_title)</span><br><span class=\"line\">        r_idx = html_file_path.rindex(&quot;/&quot;) + 1</span><br><span class=\"line\">        pdf_name = html_file_path[r_idx:-5]+pdf_title</span><br><span class=\"line\">        pdf_file_path = os.path.join(pdf_path,pdf_name+&quot;.pdf&quot;)</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br><span class=\"line\">        加快转换速度，把临时文件中的不必要的元素去掉</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br><span class=\"line\">        [s.extract() for s in bs_html([&quot;script&quot;,&quot;iframe&quot;,&quot;link&quot;])]</span><br><span class=\"line\">        save_file(html_tmp_file,str(bs_html))</span><br><span class=\"line\">        call_wkhtmltopdf(html_tmp_file,pdf_file_path)</span><br><span class=\"line\"> </span><br><span class=\"line\">def call_wkhtmltopdf(html_file_path,pdf_file_path,skipExists=True,removehtml=True):</span><br><span class=\"line\">    if skipExists and os.path.exists(pdf_file_path):</span><br><span class=\"line\">        print(&quot;pdf_file_path already existed!&quot;)</span><br><span class=\"line\">        if removehtml :</span><br><span class=\"line\">            os.remove(html_file_path)</span><br><span class=\"line\">        return</span><br><span class=\"line\">    exe_path = cfg[&#x27;wkhtmltopdf&#x27;] #wkhtmltopdf.exe的保存路径</span><br><span class=\"line\">    cmd_list = []</span><br><span class=\"line\">    cmd_list.append(&quot; --load-error-handling ignore &quot;)</span><br><span class=\"line\">    cmd_list.append(&quot; &quot;+ html_file_path +&quot; &quot;)</span><br><span class=\"line\">    cmd_list.append(&quot; &quot;+ pdf_file_path +&quot; &quot;)</span><br><span class=\"line\">    cmd_str = exe_path + &quot;&quot;.join(cmd_list)</span><br><span class=\"line\">    print(cmd_str)</span><br><span class=\"line\">    subprocess.check_call(cmd_str, shell=False)</span><br><span class=\"line\">    if removehtml:</span><br><span class=\"line\">        os.remove(html_file_path)</span><br><span class=\"line\"> </span><br><span class=\"line\">def get_config():</span><br><span class=\"line\">    cfg_file = read_file(&quot;config/wechat.cfg&quot;)</span><br><span class=\"line\">    cfg_file = cfg_file.replace(&quot;\\\\\\\\&quot;,&quot;/&quot;).replace(&quot;\\\\&quot;,&quot;/&quot;) #防止json中有 / 导致无法识别</span><br><span class=\"line\">    cfg_json = json.loads(cfg_file)</span><br><span class=\"line\">    return cfg_json</span><br><span class=\"line\"> </span><br><span class=\"line\">def seconds_to_time(seconds):</span><br><span class=\"line\">    taime_array = time.localtime(seconds) # 1970-01-01 00:00:00 到发表时的秒数</span><br><span class=\"line\">    other_style_time = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, taime_array)</span><br><span class=\"line\">    date_time =datetime.strptime(other_style_time, &quot;%Y-%m-%d %H:%M:%S&quot;)</span><br><span class=\"line\">    return str(date_time).replace(&quot;-&quot;,&quot;&quot;).replace(&quot;:&quot;,&quot;&quot;).replace(&quot; &quot;,&quot;&quot;)</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">cfg = get_config() # 获得配置文件的全局变量</span><br><span class=\"line\">#get_article_list(&quot;./tmp/&quot;) # for test</span><br><span class=\"line\">#down_html(&quot;./tmp/&quot;,&quot;./html/&quot;)# for test</span><br><span class=\"line\"> </span><br><span class=\"line\">if __name__ == &quot;__main__&quot;:</span><br><span class=\"line\"> </span><br><span class=\"line\">    if len(sys.argv) == 1:</span><br><span class=\"line\">        arg = None</span><br><span class=\"line\">    else:</span><br><span class=\"line\">        arg = sys.argv[1]</span><br><span class=\"line\">    if arg is None or arg == &quot;html&quot;:</span><br><span class=\"line\">        down_html(cfg[&#x27;jsonDir&#x27;],cfg[&#x27;htmlDir&#x27;])</span><br><span class=\"line\">    elif arg == &quot;pdf&quot;:</span><br><span class=\"line\">        conv_html_pdf(cfg[&#x27;htmlDir&#x27;],cfg[&#x27;pdfDir&#x27;])</span><br></pre></td></tr></table></figure>","cover":false,"excerpt":"","more":"<h3 id=\"【老博客地址】\"><a href=\"#【老博客地址】\" class=\"headerlink\" title=\"【老博客地址】\"></a><strong>【老博客地址】</strong></h3><p>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/\">【CSDN】博客主页</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/100254510\">【纯技术交流】python批量下载公众号历史文章（一）</a><br>&emsp;&emsp;<em>(在刊载一段时间后，莫名被吞掉了,所以在这里补档)</em><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/100661899\">python批量下载公众号历史文章（二）</a></p>\n<h3 id=\"【写在前面】\"><a href=\"#【写在前面】\" class=\"headerlink\" title=\"【写在前面】\"></a><strong>【写在前面】</strong></h3><p style=\"text-indent:2em\">\n前些天和同事讨论问题，什么是人才？讨论细节就不表了，最终总结为一句话：能解决问题的人才是人才。自己爱交朋友，很多朋友都在我有困难的时候帮助过我，也希望自己能够帮助朋友，成为能帮朋友解决问题的人才，所以朋友的请求从来都是来者不拒，力所能及之事一定全力办到！\n</p>\n<p style=\"text-indent:2em\">\n基于这点，给自己挖了很多坑：前些日子写的学习强国自动学习已经完成了一个初步版本，能够自动读文章、自动学习视频、自动分享，但是还不能自动答题，朋友说已经够用了，不过还是希望有时间了完成这块儿的内容；想读黄易老爷子武侠的那位朋友的问题也解决了，虽然下载下来的文字部分章节格式上有些乱，但也满足了朋友的要求，够用就行；学习Python也是一样，因时间关系没有系统的去学习过，只是通过解决各种问题达到学以致用，够用就行。很多博客文章，写有序号，都是计划要分段完成的，希望自己有一天能把所有的坑都填完了。\n</p>\n\n<h3 id=\"【背景】\"><a href=\"#【背景】\" class=\"headerlink\" title=\"【背景】\"></a><strong>【背景】</strong></h3><p style=\"text-indent:2em\">\n昨天和朋友去野钓，路上谈起股票。今年截止到目前，他的收益是40%多。问他炒股的心得，他是数据流派，经常看财务数据，就推荐了几个公众号，同时提出了一个请求，有些公众号历史文章太多，每次翻看之前的文章都得重头刷，问我能不能把这些文章下载到本地，自己想看的时候就看。想着不难，就答应姑且一试。\n</p>\n\n<h3 id=\"【目标】\"><a href=\"#【目标】\" class=\"headerlink\" title=\"【目标】\"></a><strong>【目标】</strong></h3><p>&emsp;&emsp;第一个版本，只是为了实现下载朋友指定的公众号的历史文章，并转换成pdf方便阅读。很多需要手工配合，算是一个半自动的版本吧。<br>&emsp;&emsp;后续会陆续减少手工，并把文章存储在数据库里，支持检索等。</p>\n<h3 id=\"【思路】\"><a href=\"#【思路】\" class=\"headerlink\" title=\"【思路】\"></a><strong>【思路】</strong></h3><p>&emsp;&emsp;和从网页上爬取小说不同，微信的公众号是通过app操作进行爬取，所以不能直接用chrome查看网页源码进行解析，需要用到第三方抓包工具，网上看了下用的比较多的有fiddler和anyproxy，前者比较简单，就选择了前者，思路如下：<br>&emsp;&emsp;1、通过fiddler抓取相应公众号的包（需要手动）；<br>&emsp;&emsp;2、通过python进行解析，获取历史文章列表信息json；<br>&emsp;&emsp;3、通过python进行解析，获取所有文章信息，包括标题、链接等；<br>&emsp;&emsp;4、通过python循环将这些文章下载到本地存为html；<br>&emsp;&emsp;5、通过python将文章里面的图片都保存到本地；<br>&emsp;&emsp;6、通过python将本地html文件里面的图片链接，修改为本地存储图片的路径（因为只存文章还不行，你会发现存到本地的html文件，里面的图片都无法正常显示）；<br>&emsp;&emsp;7、通过python调用wkhtmltopdf工具，将html转换成pdf。</p>\n<h3 id=\"【工具】\"><a href=\"#【工具】\" class=\"headerlink\" title=\"【工具】\"></a><strong>【工具】</strong></h3><p>&emsp;&emsp;1、抓包工具fiddler；<br>&emsp;&emsp;2、html转pdf工具wkhtmltopdf；<br>&emsp;&emsp;3、python3.7及对应的包；<br>&emsp;&emsp;4、电脑版微信或者模拟器或者直接用手机也行（如果用手机或者模拟器，需要设置代理）；</p>\n<h3 id=\"【准备工作之抓包】\"><a href=\"#【准备工作之抓包】\" class=\"headerlink\" title=\"【准备工作之抓包】\"></a><strong>【准备工作之抓包】</strong></h3><p>&emsp;&emsp;有些公众号的包比较特殊，所以要进行不同的处理。以朋友要求的公众号为例（为了避免广告嫌疑，就不写是啥公众号了）。<br>&emsp;&emsp;1、下载fiddler软件，因为公众号里都是https的链接，需要做抓包配置。中间会弹出一些框框让确认，全部点确定就行。<br><br></p>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_setup_1.png\" class title=\"fiddle设置\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_setup_2.png\" class title=\"fiddle设置\">\n\n<p>&emsp;&emsp;2、打开电脑版微信，搜索需要的公众号，点开历史文章列表。通过fiddler查看抓到的包的特点。<br><br></p>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/analyse_pkg_1.png\" class title=\"打开公众号链接\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/analyse_pkg_2.png\" class title=\"fiddle分析包特点\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/analyse_pkg_3.png\" class title=\"fiddle分析包特点\">\n\n<p>&emsp;&emsp;3、为了避免其他链接的干扰，配置过滤规则，滤掉不需要的链接。<br><br></p>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_filters.png\" class title=\"股票清单和基本信息-网页\">\n\n\n<p>&emsp;&emsp;4、然后清空fiddler的抓取记录，重新点击历史文章，并不断下拉，直到所有链接都显示出来为止。<br><br></p>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_info_1.png\" class title=\"fiddle抓包信息\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_info_2.png\" class title=\"fiddle抓包信息\">\n\n<p>&emsp;&emsp;5、将过滤之后获得的所有的seesion，以raw的形式保存到本地。<br><br></p>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_1.png\" class title=\"fiddle保持raw格式session\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_2.png\" class title=\"fiddle保持raw格式session\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_3.png\" class title=\"fiddle保持raw格式session\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/fiddle_raw_4.png\" class title=\"fiddle保持raw格式session\">\n\n<h3 id=\"【编码】\"><a href=\"#【编码】\" class=\"headerlink\" title=\"【编码】\"></a><strong>【编码】</strong></h3><p>&emsp;&emsp;<strong>1、标准报文头和需要的包</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># _*_ coding:utf-8 _*_</span><br><span class=\"line\">import os,sys</span><br><span class=\"line\">import requests</span><br><span class=\"line\">import json</span><br><span class=\"line\">import subprocess</span><br><span class=\"line\">import re</span><br><span class=\"line\">import random</span><br><span class=\"line\">import time</span><br><span class=\"line\">from bs4 import BeautifulSoup</span><br><span class=\"line\">from datetime import datetime,timedelta</span><br><span class=\"line\">from time import sleep</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>2、定义一个文章类，保存文章的基本信息</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">class ArticleInfo():</span><br><span class=\"line\">    def __init__(self,url,title,idx_num): #idx_num是为了方便保存图片命名</span><br><span class=\"line\">        self.url = url</span><br><span class=\"line\">        self.title = title</span><br><span class=\"line\">        self.idx_num = idx_num</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>3、定义读取文件内容的方法（通用）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def read_file(file_path):</span><br><span class=\"line\">    with open(file_path,&quot;r&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class=\"line\">        file_content = f.read()</span><br><span class=\"line\">    return file_content</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>4、定义写文件内容的方法（通用）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def save_file(file_path,file_content):</span><br><span class=\"line\">    with open(file_path,&quot;w&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class=\"line\">        f.write(file_content)</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>5、定义下载网页html的方法（通用）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def get_html(url):</span><br><span class=\"line\">    headers = &#123;</span><br><span class=\"line\">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class=\"line\">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class=\"line\">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class=\"line\">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class=\"line\">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class=\"line\">    if response.status_code == 200:</span><br><span class=\"line\">        htmltxt = response.text #返回的网页正文</span><br><span class=\"line\">        return htmltxt</span><br><span class=\"line\">    else:</span><br><span class=\"line\">        return None</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>6、定义下载并保存网页图片的方法（通用）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def get_save_image(url,img_file_path):</span><br><span class=\"line\">    headers = &#123;</span><br><span class=\"line\">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class=\"line\">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class=\"line\">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class=\"line\">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class=\"line\">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class=\"line\">    with open(img_file_path,&quot;wb&quot;) as f:</span><br><span class=\"line\">        f.write(response.content)</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>7、定义调用下载html和图片的方法（主函数调用此方法开始下载）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def down_html(json_path,html_path):</span><br><span class=\"line\">    if not os.path.exists(html_path):</span><br><span class=\"line\">        os.makedirs(html_path) # 创建保存html文件的文件夹</span><br><span class=\"line\">    local_img_path = os.path.join(html_path,&quot;images&quot;)</span><br><span class=\"line\">    if not os.path.lexists(local_img_path):</span><br><span class=\"line\">        os.makedirs(local_img_path) # 创建保存本地图片的文件夹</span><br><span class=\"line\">    article_list = get_article_list(json_path)</span><br><span class=\"line\">    article_list.sort(key=lambda x:x.atc_datetime, reverse=True) # 根据文章发表时间倒序排列</span><br><span class=\"line\">    tot_article = len(article_list) # 文章的总数量</span><br><span class=\"line\">    i = 0 #计数用</span><br><span class=\"line\">    for atc in article_list:</span><br><span class=\"line\">        i+=1</span><br><span class=\"line\">        atc_unique_name = str(atc.atc_datetime) + &quot;_&quot; + str(atc.idx_num) # 时间+序号 作为同一时间发表的文章的唯一标识</span><br><span class=\"line\">        html_name = atc_unique_name+&quot;.html&quot;</span><br><span class=\"line\">        html_file_path = os.path.join(html_path,html_name)</span><br><span class=\"line\">        print(i,&quot;of&quot;,tot_article,atc_unique_name,atc.title)</span><br><span class=\"line\">        if os.path.exists(html_file_path): # 支持续传</span><br><span class=\"line\">            print(&quot;&#123;&#125; existed already!&quot;.format(html_file_path))</span><br><span class=\"line\">            continue</span><br><span class=\"line\">        org_atc_html = get_html(atc.url)</span><br><span class=\"line\">        new_atc_html = rep_image(org_atc_html,local_img_path,html_name)</span><br><span class=\"line\">        save_file(html_file_path,new_atc_html)</span><br><span class=\"line\">        sleep(round(random.uniform(1,3),2))</span><br><span class=\"line\">        &quot;&quot;&quot;for test</span><br><span class=\"line\">        if i&gt;0 :</span><br><span class=\"line\">            break</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br></pre></td></tr></table></figure>\n<p>&emsp;&emsp;<strong>8、查看fiddler保存的json文件结构，定义解析json字符串获取文章列表的方法</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def get_article_list(json_path):</span><br><span class=\"line\">    &quot;&quot;&quot;</span><br><span class=\"line\">    通过抓取的包的json文件，获取所有文章的信息的列表</span><br><span class=\"line\">    &quot;&quot;&quot;</span><br><span class=\"line\">    file_list = os.listdir(json_path) #jsonpath是fiddler导出的文件夹路径</span><br><span class=\"line\">    article_list = [] # 用来保存所有文章的列表</span><br><span class=\"line\">    for file in file_list:</span><br><span class=\"line\">        file_path = os.path.join(json_path,file)</span><br><span class=\"line\">        file_cont = read_file(file_path)</span><br><span class=\"line\">        json_cont = json.loads(file_cont)</span><br><span class=\"line\">        general_msg_list = json_cont[&#x27;general_msg_list&#x27;]</span><br><span class=\"line\">        json_list = json.loads(general_msg_list)</span><br><span class=\"line\">        #print(json_list[&#x27;list&#x27;][0][&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;])</span><br><span class=\"line\">        for lst in json_list[&#x27;list&#x27;]:</span><br><span class=\"line\">            atc_idx = 0 # 每个时间可以发多篇文章 为了方便后续图片命名</span><br><span class=\"line\">            seconds_datetime = lst[&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;]</span><br><span class=\"line\">            atc_datetime = seconds_to_time(seconds_datetime)</span><br><span class=\"line\">            if lst[&#x27;comm_msg_info&#x27;][&#x27;type&#x27;] == 49: # 49为普通的图文</span><br><span class=\"line\">                atc_idx+=1</span><br><span class=\"line\">                url = lst[&#x27;app_msg_ext_info&#x27;][&#x27;content_url&#x27;]</span><br><span class=\"line\">                title = lst[&#x27;app_msg_ext_info&#x27;][&#x27;title&#x27;]</span><br><span class=\"line\">                atc_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class=\"line\">                article_list.append(atc_info)</span><br><span class=\"line\">            if 1 == lst[&#x27;app_msg_ext_info&#x27;][&#x27;is_multi&#x27;]: # 一次发多篇</span><br><span class=\"line\">                multi_app_msg_item_list = lst[&#x27;app_msg_ext_info&#x27;][&#x27;multi_app_msg_item_list&#x27;]</span><br><span class=\"line\">                for multi in multi_app_msg_item_list:</span><br><span class=\"line\">                    atc_idx+=1</span><br><span class=\"line\">                    url = multi[&#x27;content_url&#x27;]</span><br><span class=\"line\">                    title = multi[&#x27;title&#x27;]</span><br><span class=\"line\">                    mul_act_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class=\"line\">                    article_list.append(mul_act_info)</span><br><span class=\"line\">    return article_list</span><br></pre></td></tr></table></figure>\n<br>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/raw_info.png\" class title=\"fiddle保持raw具体内容\">\n\n<p>&emsp;&emsp;<strong>9、定义替换html中图片src为本地图片的方法（不替换，html中的图片将无法显示）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def chg_img_link(bs_html):</span><br><span class=\"line\">    link_list = bs_html.findAll(&quot;link&quot;)</span><br><span class=\"line\">    for link in link_list:</span><br><span class=\"line\">        href = link.attrs[&quot;href&quot;]</span><br><span class=\"line\">        if href.startswith(&quot;//&quot;):</span><br><span class=\"line\">            new_href = &quot;http:&quot;+href</span><br><span class=\"line\">            link.attrs[&quot;href&quot;]=new_href</span><br><span class=\"line\"> </span><br><span class=\"line\">def rep_image(org_html,local_img_path,html_name):</span><br><span class=\"line\">    bs_html = BeautifulSoup(org_html,&quot;lxml&quot;)</span><br><span class=\"line\">    img_list = bs_html.findAll(&quot;img&quot;)</span><br><span class=\"line\">    img_idx = 0 # 计数和命名用</span><br><span class=\"line\">    for img in img_list:</span><br><span class=\"line\">        img_idx+=1</span><br><span class=\"line\">        org_url = &quot;&quot; # 图片的真实地址</span><br><span class=\"line\">        if &quot;data-src&quot; in img.attrs: # &lt;img  data-src=&quot;...&quot;</span><br><span class=\"line\">            org_url = img.attrs[&#x27;data-src&#x27;]</span><br><span class=\"line\">        elif &quot;src&quot; in img.attrs : # &lt;img  src=&quot;...&quot;</span><br><span class=\"line\">            org_url = img.attrs[&#x27;src&#x27;]</span><br><span class=\"line\">        if org_url.startswith(&quot;//&quot;):</span><br><span class=\"line\">            org_url = &quot;http:&quot; + org_url</span><br><span class=\"line\">        if len(org_url) &gt; 0 :</span><br><span class=\"line\">            print(&quot;download image &quot;,img_idx)</span><br><span class=\"line\">            if &quot;data-type&quot; in img.attrs:</span><br><span class=\"line\">                img_type = img.attrs[&quot;data-type&quot;]</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                img_type = &quot;png&quot;</span><br><span class=\"line\">            img_name = html_name + &quot;_&quot; + str(img_idx) + &quot;.&quot; +img_type</span><br><span class=\"line\">            img_file_path = os.path.join(local_img_path,img_name)</span><br><span class=\"line\">            get_save_image(org_url,img_file_path) # 下载并保存图片</span><br><span class=\"line\">            img.attrs[&quot;src&quot;] = &quot;images/&quot; + img_name</span><br><span class=\"line\">        else:</span><br><span class=\"line\">            img.attrs[&quot;src&quot;] = &quot;&quot;</span><br><span class=\"line\">    chg_img_link(bs_html)</span><br><span class=\"line\">    return str(bs_html)</span><br></pre></td></tr></table></figure>\n<br>\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/without_img.png\" class title=\"未替换本地图片源\">\n<img src=\"/rabbitBear/.io//2022/07/27/python%E6%89%B9%E9%87%8F%E4%B8%8B%E8%BD%BD%E5%85%AC%E4%BC%97%E5%8F%B7%E5%8E%86%E5%8F%B2%E6%96%87%E7%AB%A0%EF%BC%88%E4%B8%80%EF%BC%89/with_img.png\" class title=\"替换本地图片源\">\n\n<p>&emsp;&emsp;<strong>10、定义html转换成pdf的方法</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def conv_html_pdf(html_path,pdf_path):</span><br><span class=\"line\">    if not os.path.exists(pdf_path):</span><br><span class=\"line\">        os.makedirs(pdf_path)</span><br><span class=\"line\">    f_list = os.listdir(html_path)</span><br><span class=\"line\">    for f in f_list:</span><br><span class=\"line\">        if (not f[-5:]==&quot;.html&quot;) or (&quot;tmp&quot; in f): #不是html文件的不转换，含有tmp的不转换</span><br><span class=\"line\">            continue</span><br><span class=\"line\">        html_file_path = os.path.join(html_path,f)</span><br><span class=\"line\">        html_tmp_file = html_file_path[:-5]+&quot;_tmp.html&quot; #生成临时文件，供转pdf用</span><br><span class=\"line\">        html_str = read_file(html_file_path)</span><br><span class=\"line\">        bs_html = BeautifulSoup(html_str,&quot;lxml&quot;)</span><br><span class=\"line\">        pdf_title = &quot;&quot;</span><br><span class=\"line\">        title_tag = bs_html.find(id=&quot;activity-name&quot;)</span><br><span class=\"line\">        if title_tag is not None:</span><br><span class=\"line\">            pdf_title = &quot;_&quot;+title_tag.get_text().replace(&quot; &quot;, &quot;&quot;).replace(&quot;  &quot;,&quot;&quot;).replace(&quot;\\n&quot;,&quot;&quot;)</span><br><span class=\"line\">        print(pdf_title)</span><br><span class=\"line\">        r_idx = html_file_path.rindex(&quot;/&quot;) + 1</span><br><span class=\"line\">        pdf_name = html_file_path[r_idx:-5]+pdf_title</span><br><span class=\"line\">        pdf_file_path = os.path.join(pdf_path,pdf_name+&quot;.pdf&quot;)</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br><span class=\"line\">        加快转换速度，把临时文件中的不必要的元素去掉</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br><span class=\"line\">        [s.extract() for s in bs_html([&quot;script&quot;,&quot;iframe&quot;,&quot;link&quot;])]</span><br><span class=\"line\">        save_file(html_tmp_file,str(bs_html))</span><br><span class=\"line\">        call_wkhtmltopdf(html_tmp_file,pdf_file_path)</span><br></pre></td></tr></table></figure>\n <figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def call_wkhtmltopdf(html_file_path,pdf_file_path,skipExists=True,removehtml=True):</span><br><span class=\"line\">    if skipExists and os.path.exists(pdf_file_path):</span><br><span class=\"line\">        print(&quot;pdf_file_path already existed!&quot;)</span><br><span class=\"line\">        if removehtml :</span><br><span class=\"line\">            os.remove(html_file_path)</span><br><span class=\"line\">        return</span><br><span class=\"line\">    exe_path = cfg[&#x27;wkhtmltopdf&#x27;] #wkhtmltopdf.exe的保存路径</span><br><span class=\"line\">    cmd_list = []</span><br><span class=\"line\">    cmd_list.append(&quot; --load-error-handling ignore &quot;)</span><br><span class=\"line\">    cmd_list.append(&quot; &quot;+ html_file_path +&quot; &quot;)</span><br><span class=\"line\">    cmd_list.append(&quot; &quot;+ pdf_file_path +&quot; &quot;)</span><br><span class=\"line\">    cmd_str = exe_path + &quot;&quot;.join(cmd_list)</span><br><span class=\"line\">    print(cmd_str)</span><br><span class=\"line\">    subprocess.check_call(cmd_str, shell=False)</span><br><span class=\"line\">    if removehtml:</span><br><span class=\"line\">        os.remove(html_file_path)</span><br></pre></td></tr></table></figure>\n\n<p>&emsp;&emsp;<strong>11、定义读取保存各文件夹路径的配置文件的方法</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def get_config():</span><br><span class=\"line\">    cfg_file = read_file(&quot;config/wechat.cfg&quot;)</span><br><span class=\"line\">    cfg_file = cfg_file.replace(&quot;\\\\\\\\&quot;,&quot;/&quot;).replace(&quot;\\\\&quot;,&quot;/&quot;) #防止json中有 / 导致无法识别</span><br><span class=\"line\">    cfg_json = json.loads(cfg_file)</span><br><span class=\"line\">    return cfg_json</span><br></pre></td></tr></table></figure>\n\n<p>&emsp;&emsp;<strong>【重要】配置文件放置在当前目录的子目录config下，名为wechat.cfg,内容如下</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">&#123;</span><br><span class=\"line\">    &quot;jsonDir&quot;: &quot;./download/wechat/fiddler-raw/Dump-0902-14-43-38/&quot;,</span><br><span class=\"line\">    &quot;htmlDir&quot;: &quot;./download/wechat/html/&quot;,</span><br><span class=\"line\">    &quot;pdfDir&quot;: &quot;./download/wechat/pdf/&quot;,</span><br><span class=\"line\">    &quot;wkhtmltopdf&quot;: &quot;./wkhtmltopdf.exe&quot;</span><br><span class=\"line\">&#125;</span><br></pre></td></tr></table></figure>\n\n<p>&emsp;&emsp;<strong>12、定义从秒数获得时间的方法（微信公众号的datetime存放的是从1970-01-01 00:00:00到发表时的秒数）</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">def seconds_to_time(seconds):</span><br><span class=\"line\">    taime_array = time.localtime(seconds) # 1970-01-01 00:00:00 到发表时的秒数</span><br><span class=\"line\">    other_style_time = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, taime_array)</span><br><span class=\"line\">    date_time =datetime.strptime(other_style_time, &quot;%Y-%m-%d %H:%M:%S&quot;)</span><br><span class=\"line\">    return str(date_time).replace(&quot;-&quot;,&quot;&quot;).replace(&quot;:&quot;,&quot;&quot;).replace(&quot; &quot;,&quot;&quot;)</span><br></pre></td></tr></table></figure>\n\n<p>&emsp;&emsp;<strong>13、定义主函数进行调用，没有参数或者参数是html则进行下载，如果是pdf则是html转换成pdf</strong></p>\n<figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">cfg = get_config() # 获得配置文件的全局变量</span><br><span class=\"line\">#get_article_list(&quot;./tmp/&quot;) # for test</span><br><span class=\"line\">#down_html(&quot;./tmp/&quot;,&quot;./html/&quot;)# for test</span><br><span class=\"line\"> </span><br><span class=\"line\">if __name__ == &quot;__main__&quot;:</span><br><span class=\"line\"> </span><br><span class=\"line\">    if len(sys.argv) == 1:</span><br><span class=\"line\">        arg = None</span><br><span class=\"line\">    else:</span><br><span class=\"line\">        arg = sys.argv[1]</span><br><span class=\"line\">    if arg is None or arg == &quot;html&quot;:</span><br><span class=\"line\">        down_html(cfg[&#x27;jsonDir&#x27;],cfg[&#x27;htmlDir&#x27;])</span><br><span class=\"line\">    elif arg == &quot;pdf&quot;:</span><br><span class=\"line\">        conv_html_pdf(cfg[&#x27;htmlDir&#x27;],cfg[&#x27;pdfDir&#x27;])</span><br></pre></td></tr></table></figure>\n\n<h3 id=\"【运行效果】\"><a href=\"#【运行效果】\" class=\"headerlink\" title=\"【运行效果】\"></a><strong>【运行效果】</strong></h3><br>\n\n\n\n<h3 id=\"【完整代码】\"><a href=\"#【完整代码】\" class=\"headerlink\" title=\"【完整代码】\"></a><strong>【完整代码】</strong></h3><figure class=\"highlight plaintext\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br><span class=\"line\">66</span><br><span class=\"line\">67</span><br><span class=\"line\">68</span><br><span class=\"line\">69</span><br><span class=\"line\">70</span><br><span class=\"line\">71</span><br><span class=\"line\">72</span><br><span class=\"line\">73</span><br><span class=\"line\">74</span><br><span class=\"line\">75</span><br><span class=\"line\">76</span><br><span class=\"line\">77</span><br><span class=\"line\">78</span><br><span class=\"line\">79</span><br><span class=\"line\">80</span><br><span class=\"line\">81</span><br><span class=\"line\">82</span><br><span class=\"line\">83</span><br><span class=\"line\">84</span><br><span class=\"line\">85</span><br><span class=\"line\">86</span><br><span class=\"line\">87</span><br><span class=\"line\">88</span><br><span class=\"line\">89</span><br><span class=\"line\">90</span><br><span class=\"line\">91</span><br><span class=\"line\">92</span><br><span class=\"line\">93</span><br><span class=\"line\">94</span><br><span class=\"line\">95</span><br><span class=\"line\">96</span><br><span class=\"line\">97</span><br><span class=\"line\">98</span><br><span class=\"line\">99</span><br><span class=\"line\">100</span><br><span class=\"line\">101</span><br><span class=\"line\">102</span><br><span class=\"line\">103</span><br><span class=\"line\">104</span><br><span class=\"line\">105</span><br><span class=\"line\">106</span><br><span class=\"line\">107</span><br><span class=\"line\">108</span><br><span class=\"line\">109</span><br><span class=\"line\">110</span><br><span class=\"line\">111</span><br><span class=\"line\">112</span><br><span class=\"line\">113</span><br><span class=\"line\">114</span><br><span class=\"line\">115</span><br><span class=\"line\">116</span><br><span class=\"line\">117</span><br><span class=\"line\">118</span><br><span class=\"line\">119</span><br><span class=\"line\">120</span><br><span class=\"line\">121</span><br><span class=\"line\">122</span><br><span class=\"line\">123</span><br><span class=\"line\">124</span><br><span class=\"line\">125</span><br><span class=\"line\">126</span><br><span class=\"line\">127</span><br><span class=\"line\">128</span><br><span class=\"line\">129</span><br><span class=\"line\">130</span><br><span class=\"line\">131</span><br><span class=\"line\">132</span><br><span class=\"line\">133</span><br><span class=\"line\">134</span><br><span class=\"line\">135</span><br><span class=\"line\">136</span><br><span class=\"line\">137</span><br><span class=\"line\">138</span><br><span class=\"line\">139</span><br><span class=\"line\">140</span><br><span class=\"line\">141</span><br><span class=\"line\">142</span><br><span class=\"line\">143</span><br><span class=\"line\">144</span><br><span class=\"line\">145</span><br><span class=\"line\">146</span><br><span class=\"line\">147</span><br><span class=\"line\">148</span><br><span class=\"line\">149</span><br><span class=\"line\">150</span><br><span class=\"line\">151</span><br><span class=\"line\">152</span><br><span class=\"line\">153</span><br><span class=\"line\">154</span><br><span class=\"line\">155</span><br><span class=\"line\">156</span><br><span class=\"line\">157</span><br><span class=\"line\">158</span><br><span class=\"line\">159</span><br><span class=\"line\">160</span><br><span class=\"line\">161</span><br><span class=\"line\">162</span><br><span class=\"line\">163</span><br><span class=\"line\">164</span><br><span class=\"line\">165</span><br><span class=\"line\">166</span><br><span class=\"line\">167</span><br><span class=\"line\">168</span><br><span class=\"line\">169</span><br><span class=\"line\">170</span><br><span class=\"line\">171</span><br><span class=\"line\">172</span><br><span class=\"line\">173</span><br><span class=\"line\">174</span><br><span class=\"line\">175</span><br><span class=\"line\">176</span><br><span class=\"line\">177</span><br><span class=\"line\">178</span><br><span class=\"line\">179</span><br><span class=\"line\">180</span><br><span class=\"line\">181</span><br><span class=\"line\">182</span><br><span class=\"line\">183</span><br><span class=\"line\">184</span><br><span class=\"line\">185</span><br><span class=\"line\">186</span><br><span class=\"line\">187</span><br><span class=\"line\">188</span><br><span class=\"line\">189</span><br><span class=\"line\">190</span><br><span class=\"line\">191</span><br><span class=\"line\">192</span><br><span class=\"line\">193</span><br><span class=\"line\">194</span><br><span class=\"line\">195</span><br><span class=\"line\">196</span><br><span class=\"line\">197</span><br><span class=\"line\">198</span><br><span class=\"line\">199</span><br><span class=\"line\">200</span><br><span class=\"line\">201</span><br><span class=\"line\">202</span><br><span class=\"line\">203</span><br><span class=\"line\">204</span><br><span class=\"line\">205</span><br><span class=\"line\">206</span><br><span class=\"line\">207</span><br><span class=\"line\">208</span><br><span class=\"line\">209</span><br><span class=\"line\">210</span><br><span class=\"line\">211</span><br><span class=\"line\">212</span><br><span class=\"line\">213</span><br><span class=\"line\">214</span><br><span class=\"line\">215</span><br><span class=\"line\">216</span><br><span class=\"line\">217</span><br><span class=\"line\">218</span><br><span class=\"line\">219</span><br><span class=\"line\">220</span><br><span class=\"line\">221</span><br><span class=\"line\">222</span><br><span class=\"line\">223</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"># _*_ coding:utf-8 _*_</span><br><span class=\"line\">import os,sys</span><br><span class=\"line\">import requests</span><br><span class=\"line\">import json</span><br><span class=\"line\">import subprocess</span><br><span class=\"line\">import re</span><br><span class=\"line\">import random</span><br><span class=\"line\">import time</span><br><span class=\"line\">from bs4 import BeautifulSoup</span><br><span class=\"line\">from datetime import datetime,timedelta</span><br><span class=\"line\">from time import sleep</span><br><span class=\"line\"> </span><br><span class=\"line\">class ArticleInfo():</span><br><span class=\"line\">    def __init__(self,url,title,idx_num,atc_datetime): #idx_num是为了方便保存图片命名</span><br><span class=\"line\">        self.url = url</span><br><span class=\"line\">        self.title = title</span><br><span class=\"line\">        self.idx_num = idx_num</span><br><span class=\"line\">        self.atc_datetime = atc_datetime</span><br><span class=\"line\"> </span><br><span class=\"line\">def read_file(file_path):</span><br><span class=\"line\">    with open(file_path,&quot;r&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class=\"line\">        file_content = f.read()</span><br><span class=\"line\">    return file_content</span><br><span class=\"line\"> </span><br><span class=\"line\">def save_file(file_path,file_content):</span><br><span class=\"line\">    with open(file_path,&quot;w&quot;,encoding=&quot;utf-8&quot;) as f:</span><br><span class=\"line\">        f.write(file_content)</span><br><span class=\"line\"> </span><br><span class=\"line\">def get_html(url):</span><br><span class=\"line\">    headers = &#123;</span><br><span class=\"line\">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class=\"line\">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class=\"line\">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class=\"line\">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class=\"line\">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class=\"line\">    if response.status_code == 200:</span><br><span class=\"line\">        htmltxt = response.text #返回的网页正文</span><br><span class=\"line\">        return htmltxt</span><br><span class=\"line\">    else:</span><br><span class=\"line\">        return None</span><br><span class=\"line\"> </span><br><span class=\"line\">def get_save_image(url,img_file_path):</span><br><span class=\"line\">    headers = &#123;</span><br><span class=\"line\">        &quot;Accept&quot;: &quot;*/*&quot;,</span><br><span class=\"line\">        &quot;User-Agent&quot;: &quot;Mozilla/5.0 (Windows NT 10.0; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/53.0.2785.116 Safari/537.36 QBCore/4.0.1219.400 QQBrowser/9.0.2524.400 Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/39.0.2171.95 Safari/537.36 MicroMessenger/6.5.2.501 NetType/WIFI WindowsWechat&quot;,</span><br><span class=\"line\">        &quot;Accept-Encoding&quot;: &quot;gzip, deflate&quot;,</span><br><span class=\"line\">        &quot;Accept-Language&quot;: &quot;zh-CN,zh;q=0.8,en-US;q=0.6,en;q=0.5;q=0.4&quot;,</span><br><span class=\"line\">        &#x27;Connection&#x27;:&#x27;keep-alive&#x27;</span><br><span class=\"line\">    &#125;</span><br><span class=\"line\">    response = requests.get(url,headers = headers,proxies=None)</span><br><span class=\"line\">    with open(img_file_path,&quot;wb&quot;) as f:</span><br><span class=\"line\">        f.write(response.content)</span><br><span class=\"line\"> </span><br><span class=\"line\">def get_article_list(json_path):</span><br><span class=\"line\">    &quot;&quot;&quot;</span><br><span class=\"line\">    通过抓取的包的json文件，获取所有文章的信息的列表</span><br><span class=\"line\">    &quot;&quot;&quot;</span><br><span class=\"line\">    file_list = os.listdir(json_path) #jsonpath是fiddler导出的文件夹路径</span><br><span class=\"line\">    article_list = [] # 用来保存所有文章的列表</span><br><span class=\"line\">    for file in file_list:</span><br><span class=\"line\">        file_path = os.path.join(json_path,file)</span><br><span class=\"line\">        file_cont = read_file(file_path)</span><br><span class=\"line\">        json_cont = json.loads(file_cont)</span><br><span class=\"line\">        general_msg_list = json_cont[&#x27;general_msg_list&#x27;]</span><br><span class=\"line\">        json_list = json.loads(general_msg_list)</span><br><span class=\"line\">        #print(json_list[&#x27;list&#x27;][0][&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;])</span><br><span class=\"line\">        for lst in json_list[&#x27;list&#x27;]:</span><br><span class=\"line\">            atc_idx = 0 # 每个时间可以发多篇文章 为了方便后续图片命名</span><br><span class=\"line\">            seconds_datetime = lst[&#x27;comm_msg_info&#x27;][&#x27;datetime&#x27;]</span><br><span class=\"line\">            atc_datetime = seconds_to_time(seconds_datetime)</span><br><span class=\"line\">            if lst[&#x27;comm_msg_info&#x27;][&#x27;type&#x27;] == 49: # 49为普通的图文</span><br><span class=\"line\">                atc_idx+=1</span><br><span class=\"line\">                url = lst[&#x27;app_msg_ext_info&#x27;][&#x27;content_url&#x27;]</span><br><span class=\"line\">                title = lst[&#x27;app_msg_ext_info&#x27;][&#x27;title&#x27;]</span><br><span class=\"line\">                atc_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class=\"line\">                article_list.append(atc_info)</span><br><span class=\"line\">            if 1 == lst[&#x27;app_msg_ext_info&#x27;][&#x27;is_multi&#x27;]: # 一次发多篇</span><br><span class=\"line\">                multi_app_msg_item_list = lst[&#x27;app_msg_ext_info&#x27;][&#x27;multi_app_msg_item_list&#x27;]</span><br><span class=\"line\">                for multi in multi_app_msg_item_list:</span><br><span class=\"line\">                    atc_idx+=1</span><br><span class=\"line\">                    url = multi[&#x27;content_url&#x27;]</span><br><span class=\"line\">                    title = multi[&#x27;title&#x27;]</span><br><span class=\"line\">                    mul_act_info = ArticleInfo(url,title,atc_idx,atc_datetime)</span><br><span class=\"line\">                    article_list.append(mul_act_info)</span><br><span class=\"line\">    return article_list</span><br><span class=\"line\"> </span><br><span class=\"line\">def chg_img_link(bs_html):</span><br><span class=\"line\">    link_list = bs_html.findAll(&quot;link&quot;)</span><br><span class=\"line\">    for link in link_list:</span><br><span class=\"line\">        href = link.attrs[&quot;href&quot;]</span><br><span class=\"line\">        if href.startswith(&quot;//&quot;):</span><br><span class=\"line\">            new_href = &quot;http:&quot;+href</span><br><span class=\"line\">            link.attrs[&quot;href&quot;]=new_href</span><br><span class=\"line\"> </span><br><span class=\"line\">def rep_image(org_html,local_img_path,html_name):</span><br><span class=\"line\">    bs_html = BeautifulSoup(org_html,&quot;lxml&quot;)</span><br><span class=\"line\">    img_list = bs_html.findAll(&quot;img&quot;)</span><br><span class=\"line\">    img_idx = 0 # 计数和命名用</span><br><span class=\"line\">    for img in img_list:</span><br><span class=\"line\">        img_idx+=1</span><br><span class=\"line\">        org_url = &quot;&quot; # 图片的真实地址</span><br><span class=\"line\">        if &quot;data-src&quot; in img.attrs: # &lt;img  data-src=&quot;...&quot;</span><br><span class=\"line\">            org_url = img.attrs[&#x27;data-src&#x27;]</span><br><span class=\"line\">        elif &quot;src&quot; in img.attrs : # &lt;img  src=&quot;...&quot;</span><br><span class=\"line\">            org_url = img.attrs[&#x27;src&#x27;]</span><br><span class=\"line\">        if org_url.startswith(&quot;//&quot;):</span><br><span class=\"line\">            org_url = &quot;http:&quot; + org_url</span><br><span class=\"line\">        if len(org_url) &gt; 0 :</span><br><span class=\"line\">            print(&quot;download image &quot;,img_idx)</span><br><span class=\"line\">            if &quot;data-type&quot; in img.attrs:</span><br><span class=\"line\">                img_type = img.attrs[&quot;data-type&quot;]</span><br><span class=\"line\">            else:</span><br><span class=\"line\">                img_type = &quot;png&quot;</span><br><span class=\"line\">            img_name = html_name + &quot;_&quot; + str(img_idx) + &quot;.&quot; +img_type</span><br><span class=\"line\">            img_file_path = os.path.join(local_img_path,img_name)</span><br><span class=\"line\">            get_save_image(org_url,img_file_path) # 下载并保存图片</span><br><span class=\"line\">            img.attrs[&quot;src&quot;] = &quot;images/&quot; + img_name</span><br><span class=\"line\">        else:</span><br><span class=\"line\">            img.attrs[&quot;src&quot;] = &quot;&quot;</span><br><span class=\"line\">    chg_img_link(bs_html)</span><br><span class=\"line\">    return str(bs_html)</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">def down_html(json_path,html_path):</span><br><span class=\"line\">    if not os.path.exists(html_path):</span><br><span class=\"line\">        os.makedirs(html_path) # 创建保存html文件的文件夹</span><br><span class=\"line\">    local_img_path = os.path.join(html_path,&quot;images&quot;)</span><br><span class=\"line\">    if not os.path.lexists(local_img_path):</span><br><span class=\"line\">        os.makedirs(local_img_path) # 创建保存本地图片的文件夹</span><br><span class=\"line\">    article_list = get_article_list(json_path)</span><br><span class=\"line\">    article_list.sort(key=lambda x:x.atc_datetime, reverse=True) # 根据文章发表时间倒序排列</span><br><span class=\"line\">    tot_article = len(article_list) # 文章的总数量</span><br><span class=\"line\">    i = 0 #计数用</span><br><span class=\"line\">    for atc in article_list:</span><br><span class=\"line\">        i+=1</span><br><span class=\"line\">        atc_unique_name = str(atc.atc_datetime) + &quot;_&quot; + str(atc.idx_num) # 时间+序号 作为同一时间发表的文章的唯一标识</span><br><span class=\"line\">        html_name = atc_unique_name+&quot;.html&quot;</span><br><span class=\"line\">        html_file_path = os.path.join(html_path,html_name)</span><br><span class=\"line\">        print(i,&quot;of&quot;,tot_article,atc_unique_name,atc.title)</span><br><span class=\"line\">        if os.path.exists(html_file_path): # 支持续传</span><br><span class=\"line\">            print(&quot;&#123;&#125; existed already!&quot;.format(html_file_path))</span><br><span class=\"line\">            continue</span><br><span class=\"line\">        org_atc_html = get_html(atc.url)</span><br><span class=\"line\">        new_atc_html = rep_image(org_atc_html,local_img_path,html_name)</span><br><span class=\"line\">        save_file(html_file_path,new_atc_html)</span><br><span class=\"line\">        sleep(round(random.uniform(1,3),2))</span><br><span class=\"line\">        &quot;&quot;&quot;for test</span><br><span class=\"line\">        if i&gt;0 :</span><br><span class=\"line\">            break</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br><span class=\"line\"> </span><br><span class=\"line\">def conv_html_pdf(html_path,pdf_path):</span><br><span class=\"line\">    if not os.path.exists(pdf_path):</span><br><span class=\"line\">        os.makedirs(pdf_path)</span><br><span class=\"line\">    f_list = os.listdir(html_path)</span><br><span class=\"line\">    for f in f_list:</span><br><span class=\"line\">        if (not f[-5:]==&quot;.html&quot;) or (&quot;tmp&quot; in f): #不是html文件的不转换，含有tmp的不转换</span><br><span class=\"line\">            continue</span><br><span class=\"line\">        html_file_path = os.path.join(html_path,f)</span><br><span class=\"line\">        html_tmp_file = html_file_path[:-5]+&quot;_tmp.html&quot; #生成临时文件，供转pdf用</span><br><span class=\"line\">        html_str = read_file(html_file_path)</span><br><span class=\"line\">        bs_html = BeautifulSoup(html_str,&quot;lxml&quot;)</span><br><span class=\"line\">        pdf_title = &quot;&quot;</span><br><span class=\"line\">        title_tag = bs_html.find(id=&quot;activity-name&quot;)</span><br><span class=\"line\">        if title_tag is not None:</span><br><span class=\"line\">            pdf_title = &quot;_&quot;+title_tag.get_text().replace(&quot; &quot;, &quot;&quot;).replace(&quot;  &quot;,&quot;&quot;).replace(&quot;\\n&quot;,&quot;&quot;)</span><br><span class=\"line\">        print(pdf_title)</span><br><span class=\"line\">        r_idx = html_file_path.rindex(&quot;/&quot;) + 1</span><br><span class=\"line\">        pdf_name = html_file_path[r_idx:-5]+pdf_title</span><br><span class=\"line\">        pdf_file_path = os.path.join(pdf_path,pdf_name+&quot;.pdf&quot;)</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br><span class=\"line\">        加快转换速度，把临时文件中的不必要的元素去掉</span><br><span class=\"line\">        &quot;&quot;&quot;</span><br><span class=\"line\">        [s.extract() for s in bs_html([&quot;script&quot;,&quot;iframe&quot;,&quot;link&quot;])]</span><br><span class=\"line\">        save_file(html_tmp_file,str(bs_html))</span><br><span class=\"line\">        call_wkhtmltopdf(html_tmp_file,pdf_file_path)</span><br><span class=\"line\"> </span><br><span class=\"line\">def call_wkhtmltopdf(html_file_path,pdf_file_path,skipExists=True,removehtml=True):</span><br><span class=\"line\">    if skipExists and os.path.exists(pdf_file_path):</span><br><span class=\"line\">        print(&quot;pdf_file_path already existed!&quot;)</span><br><span class=\"line\">        if removehtml :</span><br><span class=\"line\">            os.remove(html_file_path)</span><br><span class=\"line\">        return</span><br><span class=\"line\">    exe_path = cfg[&#x27;wkhtmltopdf&#x27;] #wkhtmltopdf.exe的保存路径</span><br><span class=\"line\">    cmd_list = []</span><br><span class=\"line\">    cmd_list.append(&quot; --load-error-handling ignore &quot;)</span><br><span class=\"line\">    cmd_list.append(&quot; &quot;+ html_file_path +&quot; &quot;)</span><br><span class=\"line\">    cmd_list.append(&quot; &quot;+ pdf_file_path +&quot; &quot;)</span><br><span class=\"line\">    cmd_str = exe_path + &quot;&quot;.join(cmd_list)</span><br><span class=\"line\">    print(cmd_str)</span><br><span class=\"line\">    subprocess.check_call(cmd_str, shell=False)</span><br><span class=\"line\">    if removehtml:</span><br><span class=\"line\">        os.remove(html_file_path)</span><br><span class=\"line\"> </span><br><span class=\"line\">def get_config():</span><br><span class=\"line\">    cfg_file = read_file(&quot;config/wechat.cfg&quot;)</span><br><span class=\"line\">    cfg_file = cfg_file.replace(&quot;\\\\\\\\&quot;,&quot;/&quot;).replace(&quot;\\\\&quot;,&quot;/&quot;) #防止json中有 / 导致无法识别</span><br><span class=\"line\">    cfg_json = json.loads(cfg_file)</span><br><span class=\"line\">    return cfg_json</span><br><span class=\"line\"> </span><br><span class=\"line\">def seconds_to_time(seconds):</span><br><span class=\"line\">    taime_array = time.localtime(seconds) # 1970-01-01 00:00:00 到发表时的秒数</span><br><span class=\"line\">    other_style_time = time.strftime(&quot;%Y-%m-%d %H:%M:%S&quot;, taime_array)</span><br><span class=\"line\">    date_time =datetime.strptime(other_style_time, &quot;%Y-%m-%d %H:%M:%S&quot;)</span><br><span class=\"line\">    return str(date_time).replace(&quot;-&quot;,&quot;&quot;).replace(&quot;:&quot;,&quot;&quot;).replace(&quot; &quot;,&quot;&quot;)</span><br><span class=\"line\"> </span><br><span class=\"line\"> </span><br><span class=\"line\">cfg = get_config() # 获得配置文件的全局变量</span><br><span class=\"line\">#get_article_list(&quot;./tmp/&quot;) # for test</span><br><span class=\"line\">#down_html(&quot;./tmp/&quot;,&quot;./html/&quot;)# for test</span><br><span class=\"line\"> </span><br><span class=\"line\">if __name__ == &quot;__main__&quot;:</span><br><span class=\"line\"> </span><br><span class=\"line\">    if len(sys.argv) == 1:</span><br><span class=\"line\">        arg = None</span><br><span class=\"line\">    else:</span><br><span class=\"line\">        arg = sys.argv[1]</span><br><span class=\"line\">    if arg is None or arg == &quot;html&quot;:</span><br><span class=\"line\">        down_html(cfg[&#x27;jsonDir&#x27;],cfg[&#x27;htmlDir&#x27;])</span><br><span class=\"line\">    elif arg == &quot;pdf&quot;:</span><br><span class=\"line\">        conv_html_pdf(cfg[&#x27;htmlDir&#x27;],cfg[&#x27;pdfDir&#x27;])</span><br></pre></td></tr></table></figure>"},{"title":"【量化投资】04.使用python爬取股票基础数据","date":"2021-02-01T13:34:02.000Z","_content":"\n### **【老博客地址】**\n&emsp;&emsp;[【CSDN】博客主页](https://blog.csdn.net/MissYourKiss/)\n&emsp;&emsp;[【量化投资】00.资源篇——持续更新](https://blog.csdn.net/MissYourKiss/article/details/111321871)\n&emsp;&emsp;[【量化投资】01.基本概念](https://blog.csdn.net/MissYourKiss/article/details/111300459)\n&emsp;&emsp;[【量化投资】02.数据接口初探——excel读取新浪股票api数据](https://blog.csdn.net/MissYourKiss/article/details/111326137)\n&ensp;&ensp;&ensp;&ensp;[【量化投资】03.量化工程abu学习之量化基础（1/3）](https://blog.csdn.net/MissYourKiss/article/details/111472606)\n\n### **【背景】**\n<p style=\"text-indent:2em\">\n之前的文章里推荐了好几个量化投资程序获取数据的方法，但是后来发现大多都有了限制，包括某share都得用积分才能使用，积分的获取非常麻烦。求人不如靠己！所以就开始自己一点点的自己想办法获取数据，并存储到本地。\n</p>\n<p style=\"text-indent:2em\">\n本次的目标是从东方财富的官网页面上抓取股票的基本数据，内容如下:\n</p>\n\n+ 本期\n    + 获取A股所有的股票列表和一些基本信息，并保存到cvs文件\n    + 获取各股票的一些详细信息，并保存到csv文件\n+ 计划\n    + 后续将数据进行结构化保存到数据库\n    + 后续改成多线程获取，加速爬取数据\n\n\n### **【最终效果】**\n<br />\n{% asset_img stock_list_web.png 股票清单和基本信息-网页 %}\n{% asset_img stock_list_csv.png 股票清单和基本信息-csv %}\n{% asset_img stock_info_web.png 股票详细信息-网页 %}\n{% asset_img stock_info_csv.png 股票详细信息-csv %}\n\n### **【代码】**\n#### **获取所有A股股票清单**\n##### **☆完整代码**\n    ```python\n        import urllib\n        import requests\n        import re\n        import json\n\n        def get_html(url):\n            with open('html.txt','w',encoding='utf-8') as f:\n                f.write(requests.get(url).text)\n\n        # 股票信息主页\n        # http://quote.eastmoney.com/center/gridlist.html#hs_a_board\n        # 沪深A股列表真实链接\n        url = \"http://11.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112405084455909086425_1610764452571&pn=1&pz=4400&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&fid=f3&fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&_=1610764452635\"\n\n        def read_file():\n            with open('html.txt','r',encoding='utf-8') as f:\n                all_contents = f.read()\n            \n            # 正则表达式，获取股票列表信息json串\n            re_cont = re.findall('\\\\((.*?)\\\\);',all_contents,re.S)\n            js_cont = json.loads(re_cont[0])\n            stock_list=[]\n            for i in js_cont['data']['diff']:\n                #_stock={}\n                #_stock['code']=i['f12']\n                #_stock['name']=i['f14']\n                #_stock['new_price']=i['f2']\n                conten=[]  # 存放单只股票信息\n                conten.append(i['f12']) # 股票代码\n                conten.append(i['f14']) # 股票名称\n                conten.append(i['f2']) # 最新价\n                conten.append(i['f3']) # 涨跌幅\n                conten.append(i['f4']) # 涨跌额\n                conten.append(i['f5']) # 成交量（手）\n                conten.append(i['f6']) # 成交额\n                conten.append(i['f7']) # 振幅\n                conten.append(i['f15']) # 最高\n                conten.append(i['f16']) # 最低\n                conten.append(i['f17']) # 今开\n                conten.append(i['f18']) # 昨收\n                conten.append(i['f10']) # 量比\n                conten.append(i['f8']) # 换手率\n                conten.append(i['f9']) # 市盈率（动态）\n                conten.append(i['f23']) # 市净率\n                stock_list.append(conten)\n            \n            with open('stock.csv','w+',encoding='utf-8') as f:\n                # 写入表头\n                n=0\n                single=(str(n)+','+'股票代码'+','+'股票名称'+','+'最新价'+','+'涨跌幅'+','\n                        +'涨跌额'+','+'成交量（手）'+','+'成交额（亿）'+','+'振幅'+','+'最高'+','\n                        +'最低'+','+'今开'+','+'昨收'+','+'量比'+','+'换手率'+','\n                        +'市盈率（动态）'+','+'市净率'+'\\n')\n                f.write(single)\n                # 写入股票数据\n                for _ in stock_list:\n                    n+=1\n                    single = str(n)\n                    for val in _ :\n                        single=single+','+str(val)\n                    single=single+'\\n'\n                    f.write(single)\n\n        get_html(url)\n        read_file()\n    ```\n    \n##### **☆代码解读**\n\n1. 获取返回股票列表信息的**真实连接**\n  + 打开东方财富的 [主页](http://quote.eastmoney.com/center/gridlist.html#hs_a_board) ，获取返回值的html，查看源码，**发现其页面里面没有股票信息**,说明是通过生成页面框架，然后动态加载的。\n  + 使用**fiddler或者chrome自带功能**（可以参考我之前的相关文章）,点击“沪深A股”或者点击“翻页”，从fiddler捕获的连接或chrome的**开发者工具（F12）**的Network中找到最新的几个连接，找到真实的连接.\n  {% asset_img get_sl_real_url.png chrome的F12查看Network信息 %}\n  + 分析请求request的header请求，发现关键信息，pn=3，pz=20，猜想是第3页和每页20个的请求参数，其他f1,f2...应该是需要请求哪些数据的参数。那么我们把参数改成pn=1&pz=5000，也就是一次性将A股的4000多只股票全部获取到。\n  ```python\n    Request URL: http://56.push2.eastmoney.com/api/qt/clist/get?cb=jQuery1124034105331658665383_1612251280345&pn=3&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&fid=f3&fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&_=1612251280452\n    Request Method: GET\n    Status Code: 200 OK\n    Remote Address: 101.89.224.78:80\n    Referrer Policy: strict-origin-when-cross-origin\n  ```\n  {% asset_img sl_real_url_req.png 分析请求信息 %}\n2. 访问真实连接，并对返回值进行解析\n  + 分析返回reponse，发现其是一个非常规整json字符串，外面包了一个小括弧，那就非常好办了，通过正则表达式把json字符串取出来，然后使用json包进行解析即可。\n  + 通过页面对比，发现每个返回字段代表的中文含义，例如：f12是股票代码\n  {% asset_img sl_real_url_rsp.png 分析返回信息 %}\n\n#### **获取每只股票信息信息**\n##### **☆完整代码**\n    ```python\n        import urllib\n        import requests\n        import re\n        import os\n        import csv\n        import json\n\n        #读取文件,拼接地址\n        f = open('info_fin.csv','w+',encoding='utf-8')\n        f.write('股票代码'+\",\"+\"股票名称\"+\",\"+\"最新价\"+\",\"+\"最高价\"+\",\"+\"最低价\"+\",\"+\"今开\"+\",\"+\"总手\"+\",\"+\"金额\"+\",\"+\"外盘\"+\",\"+\"量比\"\n            +\",\"+\"涨停\"+\",\"+\"跌停\"+\",\"+\"收益（新）\"+\",\"+\"昨收\"+\",\"+\"总股本\"+\",\"+\"流通股\"\n                +\",\"+\"净利润\"+\",\"+\"每股净资产\"+\",\"+\"总值\"+\",\"+\"流值\"+\",\"+\"板块\"+\",\"+\"地区\"+\",\"+\"pe\"\n                +\",\"+\"ROE\"+\",\"+\"总营收\"+\",\"+\"总营收同比\"+\",\"+\"净利润同比\"+\",\"+\"净利率\"+\",\"+\"负债率\"+\",\"+\"上市时间\"\n                +\",\"+\"每股未分配利润\"+\"\\n\")\n            \n        file = open('stock.csv',encoding='utf-8')\n        fileReader = csv.reader(file)\n        filedata = list(fileReader) \n\n        for _,i in enumerate(filedata):\n            if _==0: # 跳过文件头\n                continue\n            if i[1].startswith('6'):\n                addr = \"http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&invt=2&fltt=2&fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&secid=1.\" + i[1] + \"&cb=jQuery11240660569033297794_1610790254977&_=1610790254978\"\n            else:\n                addr = \"http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&invt=2&fltt=2&fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&secid=0.\" + i[1] + \"&cb=jQuery11240660569033297794_1610790254977&_=1610790254978\"\n\n        \n            re_cont = re.findall(\"\\\\((.*?)\\\\);\",requests.get(addr).text,re.S)\n            je_cont = json.loads(re_cont[0])\n            #fin = {}\n            #fin['code'] = je_cont['data']['f57']\n            #fin['name'] = je_cont['data']['f58']\n            work = ''\n            #print(str(je_cont['data']['f43']))\n            #print('12')\n            work = (str(je_cont['data']['f57'])+ \",\"+ str(je_cont['data']['f58'])+\",\" + str(je_cont['data']['f43'])+ \",\"+ str(je_cont['data']['f44'])\n            + \",\"+ str(je_cont['data']['f45'])+ \",\"+ str(je_cont['data']['f46'])+ \",\"+ str(je_cont['data']['f47'])\n            + \",\"+ str(je_cont['data']['f48'])+ \",\"+ str(je_cont['data']['f49'])+ \",\"+ str(je_cont['data']['f50'])+ \",\"+ str(je_cont['data']['f51'])\n            + \",\"+ str(je_cont['data']['f52'])+ \",\"+ str(je_cont['data']['f55'])\n            + \",\"+ str(je_cont['data']['f60'])+ \",\"+ str(je_cont['data']['f84'])+\",\"+ str(je_cont['data']['f85'])+\",\"+str(je_cont['data']['f105'])+\",\"+str(je_cont['data']['f92'])\n            + \",\"+ str(je_cont['data']['f116'])+\",\"+ str(je_cont['data']['f117'])+\",\"+str(je_cont['data']['f127'])+\",\"+str(je_cont['data']['f128'])+\",\"+str(je_cont['data']['f162'])+\",\"+str(je_cont['data']['f173'])\n            + \",\"+ str(je_cont['data']['f183'])+\",\"+ str(je_cont['data']['f184'])+\",\"+str(je_cont['data']['f185'])+\",\"+str(je_cont['data']['f187'])+\",\"+str(je_cont['data']['f188'])+\",\"+str(je_cont['data']['f189'])\n            + \",\"+ str(je_cont['data']['f190']))\n        \n            work = work+'\\n'\n            f.write(work) \n    ```\n\n##### **☆代码解读**\n1. 通过点击详情页面，找到每只股票详细信息访问的连接的规律\n   ```python\n   http://quote.eastmoney.com/sz******.html\n   http://quote.eastmoney.com/sh******.html\n   ```\n2. 同样的方法，发现所有的股票详细数据，都是动态加载的。使用**fiddler或者chrome自带功能**，获取真实连接。\n3. 分析规律组装真实连接，“6”开头的请求参数为“1.股票代码”，其他是“0.股票代码”\n   ```python\n     if i[1].startswith('6'):\n        addr = \"http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&invt=2&fltt=2&fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&secid=1.\" + i[1] + \"&cb=jQuery11240660569033297794_1610790254977&_=1610790254978\"\n    else:\n        addr = \"http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&invt=2&fltt=2&fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&secid=0.\" + i[1] + \"&cb=jQuery11240660569033297794_1610790254977&_=1610790254978\"\n\n   ```\n4. 解析返回reponse，同样的正则表达式+json解析，然后通过页面对比，发现每个返回字段对比的中文含义，例如：f57代表股票代码\n   ```python\n        最新价:f43\n        最高:f44\n        最低:f45\n        今开:f46\n        总手:f47\n        金额:f48\n        外盘:f49\n        量比:f50\n        涨停:f51\n        跌停:f52\n        收益（三）: f55\n        股票代码:f57\n        股票名称:f58\n        昨收:f60\n        总股本:f84\n        流通股:f85\n        净利润:f105\n        每股净资产:f92\n        总值:f116\n        流值:f117\n        板块：f127\n        地区：f128\n        pe（动）:f162\n        ROE:f173\n        总营收:f183\n        总营收同比:f184\n        净利润同比:f185\n        净利率:f187\n        负债率:f188\n        上市时间:f189\n        每股未分配利润:f190\n   ```","source":"_posts/2021-02-01-量化投资4.md","raw":"---\ntitle: 【量化投资】04.使用python爬取股票基础数据\ndate: 2021-02-01 21:34:02\ncategories:\n- [财富, 量化投资, 技术工具, 基础]\n- [基础教程, 量化投资]\ntags:\n- 量化投资\n- 数据获取\n- 技术\n- python\n---\n\n### **【老博客地址】**\n&emsp;&emsp;[【CSDN】博客主页](https://blog.csdn.net/MissYourKiss/)\n&emsp;&emsp;[【量化投资】00.资源篇——持续更新](https://blog.csdn.net/MissYourKiss/article/details/111321871)\n&emsp;&emsp;[【量化投资】01.基本概念](https://blog.csdn.net/MissYourKiss/article/details/111300459)\n&emsp;&emsp;[【量化投资】02.数据接口初探——excel读取新浪股票api数据](https://blog.csdn.net/MissYourKiss/article/details/111326137)\n&ensp;&ensp;&ensp;&ensp;[【量化投资】03.量化工程abu学习之量化基础（1/3）](https://blog.csdn.net/MissYourKiss/article/details/111472606)\n\n### **【背景】**\n<p style=\"text-indent:2em\">\n之前的文章里推荐了好几个量化投资程序获取数据的方法，但是后来发现大多都有了限制，包括某share都得用积分才能使用，积分的获取非常麻烦。求人不如靠己！所以就开始自己一点点的自己想办法获取数据，并存储到本地。\n</p>\n<p style=\"text-indent:2em\">\n本次的目标是从东方财富的官网页面上抓取股票的基本数据，内容如下:\n</p>\n\n+ 本期\n    + 获取A股所有的股票列表和一些基本信息，并保存到cvs文件\n    + 获取各股票的一些详细信息，并保存到csv文件\n+ 计划\n    + 后续将数据进行结构化保存到数据库\n    + 后续改成多线程获取，加速爬取数据\n\n\n### **【最终效果】**\n<br />\n{% asset_img stock_list_web.png 股票清单和基本信息-网页 %}\n{% asset_img stock_list_csv.png 股票清单和基本信息-csv %}\n{% asset_img stock_info_web.png 股票详细信息-网页 %}\n{% asset_img stock_info_csv.png 股票详细信息-csv %}\n\n### **【代码】**\n#### **获取所有A股股票清单**\n##### **☆完整代码**\n    ```python\n        import urllib\n        import requests\n        import re\n        import json\n\n        def get_html(url):\n            with open('html.txt','w',encoding='utf-8') as f:\n                f.write(requests.get(url).text)\n\n        # 股票信息主页\n        # http://quote.eastmoney.com/center/gridlist.html#hs_a_board\n        # 沪深A股列表真实链接\n        url = \"http://11.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112405084455909086425_1610764452571&pn=1&pz=4400&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&fid=f3&fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&_=1610764452635\"\n\n        def read_file():\n            with open('html.txt','r',encoding='utf-8') as f:\n                all_contents = f.read()\n            \n            # 正则表达式，获取股票列表信息json串\n            re_cont = re.findall('\\\\((.*?)\\\\);',all_contents,re.S)\n            js_cont = json.loads(re_cont[0])\n            stock_list=[]\n            for i in js_cont['data']['diff']:\n                #_stock={}\n                #_stock['code']=i['f12']\n                #_stock['name']=i['f14']\n                #_stock['new_price']=i['f2']\n                conten=[]  # 存放单只股票信息\n                conten.append(i['f12']) # 股票代码\n                conten.append(i['f14']) # 股票名称\n                conten.append(i['f2']) # 最新价\n                conten.append(i['f3']) # 涨跌幅\n                conten.append(i['f4']) # 涨跌额\n                conten.append(i['f5']) # 成交量（手）\n                conten.append(i['f6']) # 成交额\n                conten.append(i['f7']) # 振幅\n                conten.append(i['f15']) # 最高\n                conten.append(i['f16']) # 最低\n                conten.append(i['f17']) # 今开\n                conten.append(i['f18']) # 昨收\n                conten.append(i['f10']) # 量比\n                conten.append(i['f8']) # 换手率\n                conten.append(i['f9']) # 市盈率（动态）\n                conten.append(i['f23']) # 市净率\n                stock_list.append(conten)\n            \n            with open('stock.csv','w+',encoding='utf-8') as f:\n                # 写入表头\n                n=0\n                single=(str(n)+','+'股票代码'+','+'股票名称'+','+'最新价'+','+'涨跌幅'+','\n                        +'涨跌额'+','+'成交量（手）'+','+'成交额（亿）'+','+'振幅'+','+'最高'+','\n                        +'最低'+','+'今开'+','+'昨收'+','+'量比'+','+'换手率'+','\n                        +'市盈率（动态）'+','+'市净率'+'\\n')\n                f.write(single)\n                # 写入股票数据\n                for _ in stock_list:\n                    n+=1\n                    single = str(n)\n                    for val in _ :\n                        single=single+','+str(val)\n                    single=single+'\\n'\n                    f.write(single)\n\n        get_html(url)\n        read_file()\n    ```\n    \n##### **☆代码解读**\n\n1. 获取返回股票列表信息的**真实连接**\n  + 打开东方财富的 [主页](http://quote.eastmoney.com/center/gridlist.html#hs_a_board) ，获取返回值的html，查看源码，**发现其页面里面没有股票信息**,说明是通过生成页面框架，然后动态加载的。\n  + 使用**fiddler或者chrome自带功能**（可以参考我之前的相关文章）,点击“沪深A股”或者点击“翻页”，从fiddler捕获的连接或chrome的**开发者工具（F12）**的Network中找到最新的几个连接，找到真实的连接.\n  {% asset_img get_sl_real_url.png chrome的F12查看Network信息 %}\n  + 分析请求request的header请求，发现关键信息，pn=3，pz=20，猜想是第3页和每页20个的请求参数，其他f1,f2...应该是需要请求哪些数据的参数。那么我们把参数改成pn=1&pz=5000，也就是一次性将A股的4000多只股票全部获取到。\n  ```python\n    Request URL: http://56.push2.eastmoney.com/api/qt/clist/get?cb=jQuery1124034105331658665383_1612251280345&pn=3&pz=20&po=1&np=1&ut=bd1d9ddb04089700cf9c27f6f7426281&fltt=2&invt=2&fid=f3&fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23&fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&_=1612251280452\n    Request Method: GET\n    Status Code: 200 OK\n    Remote Address: 101.89.224.78:80\n    Referrer Policy: strict-origin-when-cross-origin\n  ```\n  {% asset_img sl_real_url_req.png 分析请求信息 %}\n2. 访问真实连接，并对返回值进行解析\n  + 分析返回reponse，发现其是一个非常规整json字符串，外面包了一个小括弧，那就非常好办了，通过正则表达式把json字符串取出来，然后使用json包进行解析即可。\n  + 通过页面对比，发现每个返回字段代表的中文含义，例如：f12是股票代码\n  {% asset_img sl_real_url_rsp.png 分析返回信息 %}\n\n#### **获取每只股票信息信息**\n##### **☆完整代码**\n    ```python\n        import urllib\n        import requests\n        import re\n        import os\n        import csv\n        import json\n\n        #读取文件,拼接地址\n        f = open('info_fin.csv','w+',encoding='utf-8')\n        f.write('股票代码'+\",\"+\"股票名称\"+\",\"+\"最新价\"+\",\"+\"最高价\"+\",\"+\"最低价\"+\",\"+\"今开\"+\",\"+\"总手\"+\",\"+\"金额\"+\",\"+\"外盘\"+\",\"+\"量比\"\n            +\",\"+\"涨停\"+\",\"+\"跌停\"+\",\"+\"收益（新）\"+\",\"+\"昨收\"+\",\"+\"总股本\"+\",\"+\"流通股\"\n                +\",\"+\"净利润\"+\",\"+\"每股净资产\"+\",\"+\"总值\"+\",\"+\"流值\"+\",\"+\"板块\"+\",\"+\"地区\"+\",\"+\"pe\"\n                +\",\"+\"ROE\"+\",\"+\"总营收\"+\",\"+\"总营收同比\"+\",\"+\"净利润同比\"+\",\"+\"净利率\"+\",\"+\"负债率\"+\",\"+\"上市时间\"\n                +\",\"+\"每股未分配利润\"+\"\\n\")\n            \n        file = open('stock.csv',encoding='utf-8')\n        fileReader = csv.reader(file)\n        filedata = list(fileReader) \n\n        for _,i in enumerate(filedata):\n            if _==0: # 跳过文件头\n                continue\n            if i[1].startswith('6'):\n                addr = \"http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&invt=2&fltt=2&fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&secid=1.\" + i[1] + \"&cb=jQuery11240660569033297794_1610790254977&_=1610790254978\"\n            else:\n                addr = \"http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&invt=2&fltt=2&fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&secid=0.\" + i[1] + \"&cb=jQuery11240660569033297794_1610790254977&_=1610790254978\"\n\n        \n            re_cont = re.findall(\"\\\\((.*?)\\\\);\",requests.get(addr).text,re.S)\n            je_cont = json.loads(re_cont[0])\n            #fin = {}\n            #fin['code'] = je_cont['data']['f57']\n            #fin['name'] = je_cont['data']['f58']\n            work = ''\n            #print(str(je_cont['data']['f43']))\n            #print('12')\n            work = (str(je_cont['data']['f57'])+ \",\"+ str(je_cont['data']['f58'])+\",\" + str(je_cont['data']['f43'])+ \",\"+ str(je_cont['data']['f44'])\n            + \",\"+ str(je_cont['data']['f45'])+ \",\"+ str(je_cont['data']['f46'])+ \",\"+ str(je_cont['data']['f47'])\n            + \",\"+ str(je_cont['data']['f48'])+ \",\"+ str(je_cont['data']['f49'])+ \",\"+ str(je_cont['data']['f50'])+ \",\"+ str(je_cont['data']['f51'])\n            + \",\"+ str(je_cont['data']['f52'])+ \",\"+ str(je_cont['data']['f55'])\n            + \",\"+ str(je_cont['data']['f60'])+ \",\"+ str(je_cont['data']['f84'])+\",\"+ str(je_cont['data']['f85'])+\",\"+str(je_cont['data']['f105'])+\",\"+str(je_cont['data']['f92'])\n            + \",\"+ str(je_cont['data']['f116'])+\",\"+ str(je_cont['data']['f117'])+\",\"+str(je_cont['data']['f127'])+\",\"+str(je_cont['data']['f128'])+\",\"+str(je_cont['data']['f162'])+\",\"+str(je_cont['data']['f173'])\n            + \",\"+ str(je_cont['data']['f183'])+\",\"+ str(je_cont['data']['f184'])+\",\"+str(je_cont['data']['f185'])+\",\"+str(je_cont['data']['f187'])+\",\"+str(je_cont['data']['f188'])+\",\"+str(je_cont['data']['f189'])\n            + \",\"+ str(je_cont['data']['f190']))\n        \n            work = work+'\\n'\n            f.write(work) \n    ```\n\n##### **☆代码解读**\n1. 通过点击详情页面，找到每只股票详细信息访问的连接的规律\n   ```python\n   http://quote.eastmoney.com/sz******.html\n   http://quote.eastmoney.com/sh******.html\n   ```\n2. 同样的方法，发现所有的股票详细数据，都是动态加载的。使用**fiddler或者chrome自带功能**，获取真实连接。\n3. 分析规律组装真实连接，“6”开头的请求参数为“1.股票代码”，其他是“0.股票代码”\n   ```python\n     if i[1].startswith('6'):\n        addr = \"http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&invt=2&fltt=2&fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&secid=1.\" + i[1] + \"&cb=jQuery11240660569033297794_1610790254977&_=1610790254978\"\n    else:\n        addr = \"http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&invt=2&fltt=2&fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&secid=0.\" + i[1] + \"&cb=jQuery11240660569033297794_1610790254977&_=1610790254978\"\n\n   ```\n4. 解析返回reponse，同样的正则表达式+json解析，然后通过页面对比，发现每个返回字段对比的中文含义，例如：f57代表股票代码\n   ```python\n        最新价:f43\n        最高:f44\n        最低:f45\n        今开:f46\n        总手:f47\n        金额:f48\n        外盘:f49\n        量比:f50\n        涨停:f51\n        跌停:f52\n        收益（三）: f55\n        股票代码:f57\n        股票名称:f58\n        昨收:f60\n        总股本:f84\n        流通股:f85\n        净利润:f105\n        每股净资产:f92\n        总值:f116\n        流值:f117\n        板块：f127\n        地区：f128\n        pe（动）:f162\n        ROE:f173\n        总营收:f183\n        总营收同比:f184\n        净利润同比:f185\n        净利率:f187\n        负债率:f188\n        上市时间:f189\n        每股未分配利润:f190\n   ```","slug":"量化投资4","published":1,"updated":"2025-08-13T23:42:20.669Z","_id":"clqdww77l0015z4ltbh3acqhx","comments":1,"layout":"post","photos":[],"content":"<h3 id=\"【老博客地址】\"><a href=\"#【老博客地址】\" class=\"headerlink\" title=\"【老博客地址】\"></a><strong>【老博客地址】</strong></h3><p>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/\">【CSDN】博客主页</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111321871\">【量化投资】00.资源篇——持续更新</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111300459\">【量化投资】01.基本概念</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111326137\">【量化投资】02.数据接口初探——excel读取新浪股票api数据</a><br>&ensp;&ensp;&ensp;&ensp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111472606\">【量化投资】03.量化工程abu学习之量化基础（1&#x2F;3）</a></p>\n<h3 id=\"【背景】\"><a href=\"#【背景】\" class=\"headerlink\" title=\"【背景】\"></a><strong>【背景】</strong></h3><p style=\"text-indent:2em\">\n之前的文章里推荐了好几个量化投资程序获取数据的方法，但是后来发现大多都有了限制，包括某share都得用积分才能使用，积分的获取非常麻烦。求人不如靠己！所以就开始自己一点点的自己想办法获取数据，并存储到本地。\n</p>\n<p style=\"text-indent:2em\">\n本次的目标是从东方财富的官网页面上抓取股票的基本数据，内容如下:\n</p>\n\n<ul>\n<li>本期<ul>\n<li>获取A股所有的股票列表和一些基本信息，并保存到cvs文件</li>\n<li>获取各股票的一些详细信息，并保存到csv文件</li>\n</ul>\n</li>\n<li>计划<ul>\n<li>后续将数据进行结构化保存到数据库</li>\n<li>后续改成多线程获取，加速爬取数据</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"【最终效果】\"><a href=\"#【最终效果】\" class=\"headerlink\" title=\"【最终效果】\"></a><strong>【最终效果】</strong></h3><br>\n<img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_list_web.png\" class title=\"股票清单和基本信息-网页\">\n<img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_list_csv.png\" class title=\"股票清单和基本信息-csv\">\n<img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_info_web.png\" class title=\"股票详细信息-网页\">\n<img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_info_csv.png\" class title=\"股票详细信息-csv\">\n\n<h3 id=\"【代码】\"><a href=\"#【代码】\" class=\"headerlink\" title=\"【代码】\"></a><strong>【代码】</strong></h3><h4 id=\"获取所有A股股票清单\"><a href=\"#获取所有A股股票清单\" class=\"headerlink\" title=\"获取所有A股股票清单\"></a><strong>获取所有A股股票清单</strong></h4><h5 id=\"☆完整代码\"><a href=\"#☆完整代码\" class=\"headerlink\" title=\"☆完整代码\"></a><strong>☆完整代码</strong></h5><pre><code><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> urllib</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">get_html</span>(<span class=\"params\">url</span>):</span><br><span class=\"line\">    <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;html.txt&#x27;</span>,<span class=\"string\">&#x27;w&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">        f.write(requests.get(url).text)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 股票信息主页</span></span><br><span class=\"line\"><span class=\"comment\"># http://quote.eastmoney.com/center/gridlist.html#hs_a_board</span></span><br><span class=\"line\"><span class=\"comment\"># 沪深A股列表真实链接</span></span><br><span class=\"line\">url = <span class=\"string\">&quot;http://11.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112405084455909086425_1610764452571&amp;pn=1&amp;pz=4400&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;fid=f3&amp;fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&amp;_=1610764452635&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">read_file</span>():</span><br><span class=\"line\">    <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;html.txt&#x27;</span>,<span class=\"string\">&#x27;r&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">        all_contents = f.read()</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># 正则表达式，获取股票列表信息json串</span></span><br><span class=\"line\">    re_cont = re.findall(<span class=\"string\">&#x27;\\\\((.*?)\\\\);&#x27;</span>,all_contents,re.S)</span><br><span class=\"line\">    js_cont = json.loads(re_cont[<span class=\"number\">0</span>])</span><br><span class=\"line\">    stock_list=[]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> js_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;diff&#x27;</span>]:</span><br><span class=\"line\">        <span class=\"comment\">#_stock=&#123;&#125;</span></span><br><span class=\"line\">        <span class=\"comment\">#_stock[&#x27;code&#x27;]=i[&#x27;f12&#x27;]</span></span><br><span class=\"line\">        <span class=\"comment\">#_stock[&#x27;name&#x27;]=i[&#x27;f14&#x27;]</span></span><br><span class=\"line\">        <span class=\"comment\">#_stock[&#x27;new_price&#x27;]=i[&#x27;f2&#x27;]</span></span><br><span class=\"line\">        conten=[]  <span class=\"comment\"># 存放单只股票信息</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f12&#x27;</span>]) <span class=\"comment\"># 股票代码</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f14&#x27;</span>]) <span class=\"comment\"># 股票名称</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f2&#x27;</span>]) <span class=\"comment\"># 最新价</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f3&#x27;</span>]) <span class=\"comment\"># 涨跌幅</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f4&#x27;</span>]) <span class=\"comment\"># 涨跌额</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f5&#x27;</span>]) <span class=\"comment\"># 成交量（手）</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f6&#x27;</span>]) <span class=\"comment\"># 成交额</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f7&#x27;</span>]) <span class=\"comment\"># 振幅</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f15&#x27;</span>]) <span class=\"comment\"># 最高</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f16&#x27;</span>]) <span class=\"comment\"># 最低</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f17&#x27;</span>]) <span class=\"comment\"># 今开</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f18&#x27;</span>]) <span class=\"comment\"># 昨收</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f10&#x27;</span>]) <span class=\"comment\"># 量比</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f8&#x27;</span>]) <span class=\"comment\"># 换手率</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f9&#x27;</span>]) <span class=\"comment\"># 市盈率（动态）</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f23&#x27;</span>]) <span class=\"comment\"># 市净率</span></span><br><span class=\"line\">        stock_list.append(conten)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;stock.csv&#x27;</span>,<span class=\"string\">&#x27;w+&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">        <span class=\"comment\"># 写入表头</span></span><br><span class=\"line\">        n=<span class=\"number\">0</span></span><br><span class=\"line\">        single=(<span class=\"built_in\">str</span>(n)+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;股票代码&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;股票名称&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;最新价&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;涨跌幅&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span></span><br><span class=\"line\">                +<span class=\"string\">&#x27;涨跌额&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;成交量（手）&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;成交额（亿）&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;振幅&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;最高&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span></span><br><span class=\"line\">                +<span class=\"string\">&#x27;最低&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;今开&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;昨收&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;量比&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;换手率&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span></span><br><span class=\"line\">                +<span class=\"string\">&#x27;市盈率（动态）&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;市净率&#x27;</span>+<span class=\"string\">&#x27;\\n&#x27;</span>)</span><br><span class=\"line\">        f.write(single)</span><br><span class=\"line\">        <span class=\"comment\"># 写入股票数据</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> stock_list:</span><br><span class=\"line\">            n+=<span class=\"number\">1</span></span><br><span class=\"line\">            single = <span class=\"built_in\">str</span>(n)</span><br><span class=\"line\">            <span class=\"keyword\">for</span> val <span class=\"keyword\">in</span> _ :</span><br><span class=\"line\">                single=single+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"built_in\">str</span>(val)</span><br><span class=\"line\">            single=single+<span class=\"string\">&#x27;\\n&#x27;</span></span><br><span class=\"line\">            f.write(single)</span><br><span class=\"line\"></span><br><span class=\"line\">get_html(url)</span><br><span class=\"line\">read_file()</span><br></pre></td></tr></table></figure>\n</code></pre>\n<h5 id=\"☆代码解读\"><a href=\"#☆代码解读\" class=\"headerlink\" title=\"☆代码解读\"></a><strong>☆代码解读</strong></h5><ol>\n<li>获取返回股票列表信息的<strong>真实连接</strong></li>\n</ol>\n<ul>\n<li>打开东方财富的 <a href=\"http://quote.eastmoney.com/center/gridlist.html#hs_a_board\">主页</a> ，获取返回值的html，查看源码，<strong>发现其页面里面没有股票信息</strong>,说明是通过生成页面框架，然后动态加载的。</li>\n<li>使用<strong>fiddler或者chrome自带功能</strong>（可以参考我之前的相关文章）,点击“沪深A股”或者点击“翻页”，从fiddler捕获的连接或chrome的<strong>开发者工具（F12）</strong>的Network中找到最新的几个连接，找到真实的连接.  <img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/get_sl_real_url.png\" class title=\"chrome的F12查看Network信息\"></li>\n<li>分析请求request的header请求，发现关键信息，pn&#x3D;3，pz&#x3D;20，猜想是第3页和每页20个的请求参数，其他f1,f2…应该是需要请求哪些数据的参数。那么我们把参数改成pn&#x3D;1&amp;pz&#x3D;5000，也就是一次性将A股的4000多只股票全部获取到。  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Request URL: http://<span class=\"number\">56.</span>push2.eastmoney.com/api/qt/clist/get?cb=jQuery1124034105331658665383_1612251280345&amp;pn=<span class=\"number\">3</span>&amp;pz=<span class=\"number\">20</span>&amp;po=<span class=\"number\">1</span>&amp;np=<span class=\"number\">1</span>&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=<span class=\"number\">2</span>&amp;invt=<span class=\"number\">2</span>&amp;fid=f3&amp;fs=m:<span class=\"number\">0</span>+t:<span class=\"number\">6</span>,m:<span class=\"number\">0</span>+t:<span class=\"number\">13</span>,m:<span class=\"number\">0</span>+t:<span class=\"number\">80</span>,m:<span class=\"number\">1</span>+t:<span class=\"number\">2</span>,m:<span class=\"number\">1</span>+t:<span class=\"number\">23</span>&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&amp;_=<span class=\"number\">1612251280452</span></span><br><span class=\"line\">Request Method: GET</span><br><span class=\"line\">Status Code: <span class=\"number\">200</span> OK</span><br><span class=\"line\">Remote Address: <span class=\"number\">101.89</span><span class=\"number\">.224</span><span class=\"number\">.78</span>:<span class=\"number\">80</span></span><br><span class=\"line\">Referrer Policy: strict-origin-when-cross-origin</span><br></pre></td></tr></table></figure>\n  <img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/sl_real_url_req.png\" class title=\"分析请求信息\"></li>\n</ul>\n<ol start=\"2\">\n<li>访问真实连接，并对返回值进行解析</li>\n</ol>\n<ul>\n<li>分析返回reponse，发现其是一个非常规整json字符串，外面包了一个小括弧，那就非常好办了，通过正则表达式把json字符串取出来，然后使用json包进行解析即可。</li>\n<li>通过页面对比，发现每个返回字段代表的中文含义，例如：f12是股票代码  <img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/sl_real_url_rsp.png\" class title=\"分析返回信息\"></li>\n</ul>\n<h4 id=\"获取每只股票信息信息\"><a href=\"#获取每只股票信息信息\" class=\"headerlink\" title=\"获取每只股票信息信息\"></a><strong>获取每只股票信息信息</strong></h4><h5 id=\"☆完整代码-1\"><a href=\"#☆完整代码-1\" class=\"headerlink\" title=\"☆完整代码\"></a><strong>☆完整代码</strong></h5><pre><code><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> urllib</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> csv</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#读取文件,拼接地址</span></span><br><span class=\"line\">f = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;info_fin.csv&#x27;</span>,<span class=\"string\">&#x27;w+&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">f.write(<span class=\"string\">&#x27;股票代码&#x27;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;股票名称&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;最新价&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;最高价&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;最低价&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;今开&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;总手&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;金额&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;外盘&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;量比&quot;</span></span><br><span class=\"line\">    +<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;涨停&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;跌停&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;收益（新）&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;昨收&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;总股本&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;流通股&quot;</span></span><br><span class=\"line\">        +<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;净利润&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;每股净资产&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;总值&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;流值&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;板块&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;地区&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;pe&quot;</span></span><br><span class=\"line\">        +<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;ROE&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;总营收&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;总营收同比&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;净利润同比&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;净利率&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;负债率&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;上市时间&quot;</span></span><br><span class=\"line\">        +<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;每股未分配利润&quot;</span>+<span class=\"string\">&quot;\\n&quot;</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">file = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;stock.csv&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">fileReader = csv.reader(file)</span><br><span class=\"line\">filedata = <span class=\"built_in\">list</span>(fileReader) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> _,i <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(filedata):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> _==<span class=\"number\">0</span>: <span class=\"comment\"># 跳过文件头</span></span><br><span class=\"line\">        <span class=\"keyword\">continue</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> i[<span class=\"number\">1</span>].startswith(<span class=\"string\">&#x27;6&#x27;</span>):</span><br><span class=\"line\">        addr = <span class=\"string\">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=1.&quot;</span> + i[<span class=\"number\">1</span>] + <span class=\"string\">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        addr = <span class=\"string\">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=0.&quot;</span> + i[<span class=\"number\">1</span>] + <span class=\"string\">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    re_cont = re.findall(<span class=\"string\">&quot;\\\\((.*?)\\\\);&quot;</span>,requests.get(addr).text,re.S)</span><br><span class=\"line\">    je_cont = json.loads(re_cont[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\">#fin = &#123;&#125;</span></span><br><span class=\"line\">    <span class=\"comment\">#fin[&#x27;code&#x27;] = je_cont[&#x27;data&#x27;][&#x27;f57&#x27;]</span></span><br><span class=\"line\">    <span class=\"comment\">#fin[&#x27;name&#x27;] = je_cont[&#x27;data&#x27;][&#x27;f58&#x27;]</span></span><br><span class=\"line\">    work = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"comment\">#print(str(je_cont[&#x27;data&#x27;][&#x27;f43&#x27;]))</span></span><br><span class=\"line\">    <span class=\"comment\">#print(&#x27;12&#x27;)</span></span><br><span class=\"line\">    work = (<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f57&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f58&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span> + <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f43&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f44&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f45&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f46&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f47&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f48&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f49&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f50&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f51&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f52&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f55&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f60&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f84&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f85&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f105&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f92&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f116&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f117&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f127&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f128&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f162&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f173&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f183&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f184&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f185&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f187&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f188&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f189&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f190&#x27;</span>]))</span><br><span class=\"line\"></span><br><span class=\"line\">    work = work+<span class=\"string\">&#x27;\\n&#x27;</span></span><br><span class=\"line\">    f.write(work) </span><br></pre></td></tr></table></figure>\n</code></pre>\n<h5 id=\"☆代码解读-1\"><a href=\"#☆代码解读-1\" class=\"headerlink\" title=\"☆代码解读\"></a><strong>☆代码解读</strong></h5><ol>\n<li>通过点击详情页面，找到每只股票详细信息访问的连接的规律<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://quote.eastmoney.com/sz******.html</span><br><span class=\"line\">http://quote.eastmoney.com/sh******.html</span><br></pre></td></tr></table></figure></li>\n<li>同样的方法，发现所有的股票详细数据，都是动态加载的。使用<strong>fiddler或者chrome自带功能</strong>，获取真实连接。</li>\n<li>分析规律组装真实连接，“6”开头的请求参数为“1.股票代码”，其他是“0.股票代码”<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">if</span> i[<span class=\"number\">1</span>].startswith(<span class=\"string\">&#x27;6&#x27;</span>):</span><br><span class=\"line\">    addr = <span class=\"string\">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=1.&quot;</span> + i[<span class=\"number\">1</span>] + <span class=\"string\">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">else</span>:</span><br><span class=\"line\">    addr = <span class=\"string\">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=0.&quot;</span> + i[<span class=\"number\">1</span>] + <span class=\"string\">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n<li>解析返回reponse，同样的正则表达式+json解析，然后通过页面对比，发现每个返回字段对比的中文含义，例如：f57代表股票代码<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">最新价:f43</span><br><span class=\"line\">最高:f44</span><br><span class=\"line\">最低:f45</span><br><span class=\"line\">今开:f46</span><br><span class=\"line\">总手:f47</span><br><span class=\"line\">金额:f48</span><br><span class=\"line\">外盘:f49</span><br><span class=\"line\">量比:f50</span><br><span class=\"line\">涨停:f51</span><br><span class=\"line\">跌停:f52</span><br><span class=\"line\">收益（三）: f55</span><br><span class=\"line\">股票代码:f57</span><br><span class=\"line\">股票名称:f58</span><br><span class=\"line\">昨收:f60</span><br><span class=\"line\">总股本:f84</span><br><span class=\"line\">流通股:f85</span><br><span class=\"line\">净利润:f105</span><br><span class=\"line\">每股净资产:f92</span><br><span class=\"line\">总值:f116</span><br><span class=\"line\">流值:f117</span><br><span class=\"line\">板块：f127</span><br><span class=\"line\">地区：f128</span><br><span class=\"line\">pe（动）:f162</span><br><span class=\"line\">ROE:f173</span><br><span class=\"line\">总营收:f183</span><br><span class=\"line\">总营收同比:f184</span><br><span class=\"line\">净利润同比:f185</span><br><span class=\"line\">净利率:f187</span><br><span class=\"line\">负债率:f188</span><br><span class=\"line\">上市时间:f189</span><br><span class=\"line\">每股未分配利润:f190</span><br></pre></td></tr></table></figure></li>\n</ol>\n","cover":false,"excerpt":"","more":"<h3 id=\"【老博客地址】\"><a href=\"#【老博客地址】\" class=\"headerlink\" title=\"【老博客地址】\"></a><strong>【老博客地址】</strong></h3><p>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/\">【CSDN】博客主页</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111321871\">【量化投资】00.资源篇——持续更新</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111300459\">【量化投资】01.基本概念</a><br>&emsp;&emsp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111326137\">【量化投资】02.数据接口初探——excel读取新浪股票api数据</a><br>&ensp;&ensp;&ensp;&ensp;<a href=\"https://blog.csdn.net/MissYourKiss/article/details/111472606\">【量化投资】03.量化工程abu学习之量化基础（1&#x2F;3）</a></p>\n<h3 id=\"【背景】\"><a href=\"#【背景】\" class=\"headerlink\" title=\"【背景】\"></a><strong>【背景】</strong></h3><p style=\"text-indent:2em\">\n之前的文章里推荐了好几个量化投资程序获取数据的方法，但是后来发现大多都有了限制，包括某share都得用积分才能使用，积分的获取非常麻烦。求人不如靠己！所以就开始自己一点点的自己想办法获取数据，并存储到本地。\n</p>\n<p style=\"text-indent:2em\">\n本次的目标是从东方财富的官网页面上抓取股票的基本数据，内容如下:\n</p>\n\n<ul>\n<li>本期<ul>\n<li>获取A股所有的股票列表和一些基本信息，并保存到cvs文件</li>\n<li>获取各股票的一些详细信息，并保存到csv文件</li>\n</ul>\n</li>\n<li>计划<ul>\n<li>后续将数据进行结构化保存到数据库</li>\n<li>后续改成多线程获取，加速爬取数据</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"【最终效果】\"><a href=\"#【最终效果】\" class=\"headerlink\" title=\"【最终效果】\"></a><strong>【最终效果】</strong></h3><br>\n<img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_list_web.png\" class title=\"股票清单和基本信息-网页\">\n<img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_list_csv.png\" class title=\"股票清单和基本信息-csv\">\n<img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_info_web.png\" class title=\"股票详细信息-网页\">\n<img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/stock_info_csv.png\" class title=\"股票详细信息-csv\">\n\n<h3 id=\"【代码】\"><a href=\"#【代码】\" class=\"headerlink\" title=\"【代码】\"></a><strong>【代码】</strong></h3><h4 id=\"获取所有A股股票清单\"><a href=\"#获取所有A股股票清单\" class=\"headerlink\" title=\"获取所有A股股票清单\"></a><strong>获取所有A股股票清单</strong></h4><h5 id=\"☆完整代码\"><a href=\"#☆完整代码\" class=\"headerlink\" title=\"☆完整代码\"></a><strong>☆完整代码</strong></h5><pre><code><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br><span class=\"line\">48</span><br><span class=\"line\">49</span><br><span class=\"line\">50</span><br><span class=\"line\">51</span><br><span class=\"line\">52</span><br><span class=\"line\">53</span><br><span class=\"line\">54</span><br><span class=\"line\">55</span><br><span class=\"line\">56</span><br><span class=\"line\">57</span><br><span class=\"line\">58</span><br><span class=\"line\">59</span><br><span class=\"line\">60</span><br><span class=\"line\">61</span><br><span class=\"line\">62</span><br><span class=\"line\">63</span><br><span class=\"line\">64</span><br><span class=\"line\">65</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> urllib</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">get_html</span>(<span class=\"params\">url</span>):</span><br><span class=\"line\">    <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;html.txt&#x27;</span>,<span class=\"string\">&#x27;w&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">        f.write(requests.get(url).text)</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\"># 股票信息主页</span></span><br><span class=\"line\"><span class=\"comment\"># http://quote.eastmoney.com/center/gridlist.html#hs_a_board</span></span><br><span class=\"line\"><span class=\"comment\"># 沪深A股列表真实链接</span></span><br><span class=\"line\">url = <span class=\"string\">&quot;http://11.push2.eastmoney.com/api/qt/clist/get?cb=jQuery112405084455909086425_1610764452571&amp;pn=1&amp;pz=4400&amp;po=1&amp;np=1&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=2&amp;invt=2&amp;fid=f3&amp;fs=m:0+t:6,m:0+t:13,m:0+t:80,m:1+t:2,m:1+t:23&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&amp;_=1610764452635&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">def</span> <span class=\"title function_\">read_file</span>():</span><br><span class=\"line\">    <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;html.txt&#x27;</span>,<span class=\"string\">&#x27;r&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">        all_contents = f.read()</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"comment\"># 正则表达式，获取股票列表信息json串</span></span><br><span class=\"line\">    re_cont = re.findall(<span class=\"string\">&#x27;\\\\((.*?)\\\\);&#x27;</span>,all_contents,re.S)</span><br><span class=\"line\">    js_cont = json.loads(re_cont[<span class=\"number\">0</span>])</span><br><span class=\"line\">    stock_list=[]</span><br><span class=\"line\">    <span class=\"keyword\">for</span> i <span class=\"keyword\">in</span> js_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;diff&#x27;</span>]:</span><br><span class=\"line\">        <span class=\"comment\">#_stock=&#123;&#125;</span></span><br><span class=\"line\">        <span class=\"comment\">#_stock[&#x27;code&#x27;]=i[&#x27;f12&#x27;]</span></span><br><span class=\"line\">        <span class=\"comment\">#_stock[&#x27;name&#x27;]=i[&#x27;f14&#x27;]</span></span><br><span class=\"line\">        <span class=\"comment\">#_stock[&#x27;new_price&#x27;]=i[&#x27;f2&#x27;]</span></span><br><span class=\"line\">        conten=[]  <span class=\"comment\"># 存放单只股票信息</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f12&#x27;</span>]) <span class=\"comment\"># 股票代码</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f14&#x27;</span>]) <span class=\"comment\"># 股票名称</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f2&#x27;</span>]) <span class=\"comment\"># 最新价</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f3&#x27;</span>]) <span class=\"comment\"># 涨跌幅</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f4&#x27;</span>]) <span class=\"comment\"># 涨跌额</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f5&#x27;</span>]) <span class=\"comment\"># 成交量（手）</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f6&#x27;</span>]) <span class=\"comment\"># 成交额</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f7&#x27;</span>]) <span class=\"comment\"># 振幅</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f15&#x27;</span>]) <span class=\"comment\"># 最高</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f16&#x27;</span>]) <span class=\"comment\"># 最低</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f17&#x27;</span>]) <span class=\"comment\"># 今开</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f18&#x27;</span>]) <span class=\"comment\"># 昨收</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f10&#x27;</span>]) <span class=\"comment\"># 量比</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f8&#x27;</span>]) <span class=\"comment\"># 换手率</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f9&#x27;</span>]) <span class=\"comment\"># 市盈率（动态）</span></span><br><span class=\"line\">        conten.append(i[<span class=\"string\">&#x27;f23&#x27;</span>]) <span class=\"comment\"># 市净率</span></span><br><span class=\"line\">        stock_list.append(conten)</span><br><span class=\"line\">    </span><br><span class=\"line\">    <span class=\"keyword\">with</span> <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;stock.csv&#x27;</span>,<span class=\"string\">&#x27;w+&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>) <span class=\"keyword\">as</span> f:</span><br><span class=\"line\">        <span class=\"comment\"># 写入表头</span></span><br><span class=\"line\">        n=<span class=\"number\">0</span></span><br><span class=\"line\">        single=(<span class=\"built_in\">str</span>(n)+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;股票代码&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;股票名称&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;最新价&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;涨跌幅&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span></span><br><span class=\"line\">                +<span class=\"string\">&#x27;涨跌额&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;成交量（手）&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;成交额（亿）&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;振幅&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;最高&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span></span><br><span class=\"line\">                +<span class=\"string\">&#x27;最低&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;今开&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;昨收&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;量比&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;换手率&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span></span><br><span class=\"line\">                +<span class=\"string\">&#x27;市盈率（动态）&#x27;</span>+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"string\">&#x27;市净率&#x27;</span>+<span class=\"string\">&#x27;\\n&#x27;</span>)</span><br><span class=\"line\">        f.write(single)</span><br><span class=\"line\">        <span class=\"comment\"># 写入股票数据</span></span><br><span class=\"line\">        <span class=\"keyword\">for</span> _ <span class=\"keyword\">in</span> stock_list:</span><br><span class=\"line\">            n+=<span class=\"number\">1</span></span><br><span class=\"line\">            single = <span class=\"built_in\">str</span>(n)</span><br><span class=\"line\">            <span class=\"keyword\">for</span> val <span class=\"keyword\">in</span> _ :</span><br><span class=\"line\">                single=single+<span class=\"string\">&#x27;,&#x27;</span>+<span class=\"built_in\">str</span>(val)</span><br><span class=\"line\">            single=single+<span class=\"string\">&#x27;\\n&#x27;</span></span><br><span class=\"line\">            f.write(single)</span><br><span class=\"line\"></span><br><span class=\"line\">get_html(url)</span><br><span class=\"line\">read_file()</span><br></pre></td></tr></table></figure>\n</code></pre>\n<h5 id=\"☆代码解读\"><a href=\"#☆代码解读\" class=\"headerlink\" title=\"☆代码解读\"></a><strong>☆代码解读</strong></h5><ol>\n<li>获取返回股票列表信息的<strong>真实连接</strong></li>\n</ol>\n<ul>\n<li>打开东方财富的 <a href=\"http://quote.eastmoney.com/center/gridlist.html#hs_a_board\">主页</a> ，获取返回值的html，查看源码，<strong>发现其页面里面没有股票信息</strong>,说明是通过生成页面框架，然后动态加载的。</li>\n<li>使用<strong>fiddler或者chrome自带功能</strong>（可以参考我之前的相关文章）,点击“沪深A股”或者点击“翻页”，从fiddler捕获的连接或chrome的<strong>开发者工具（F12）</strong>的Network中找到最新的几个连接，找到真实的连接.  <img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/get_sl_real_url.png\" class title=\"chrome的F12查看Network信息\"></li>\n<li>分析请求request的header请求，发现关键信息，pn&#x3D;3，pz&#x3D;20，猜想是第3页和每页20个的请求参数，其他f1,f2…应该是需要请求哪些数据的参数。那么我们把参数改成pn&#x3D;1&amp;pz&#x3D;5000，也就是一次性将A股的4000多只股票全部获取到。  <figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">Request URL: http://<span class=\"number\">56.</span>push2.eastmoney.com/api/qt/clist/get?cb=jQuery1124034105331658665383_1612251280345&amp;pn=<span class=\"number\">3</span>&amp;pz=<span class=\"number\">20</span>&amp;po=<span class=\"number\">1</span>&amp;np=<span class=\"number\">1</span>&amp;ut=bd1d9ddb04089700cf9c27f6f7426281&amp;fltt=<span class=\"number\">2</span>&amp;invt=<span class=\"number\">2</span>&amp;fid=f3&amp;fs=m:<span class=\"number\">0</span>+t:<span class=\"number\">6</span>,m:<span class=\"number\">0</span>+t:<span class=\"number\">13</span>,m:<span class=\"number\">0</span>+t:<span class=\"number\">80</span>,m:<span class=\"number\">1</span>+t:<span class=\"number\">2</span>,m:<span class=\"number\">1</span>+t:<span class=\"number\">23</span>&amp;fields=f1,f2,f3,f4,f5,f6,f7,f8,f9,f10,f12,f13,f14,f15,f16,f17,f18,f20,f21,f23,f24,f25,f22,f11,f62,f128,f136,f115,f152&amp;_=<span class=\"number\">1612251280452</span></span><br><span class=\"line\">Request Method: GET</span><br><span class=\"line\">Status Code: <span class=\"number\">200</span> OK</span><br><span class=\"line\">Remote Address: <span class=\"number\">101.89</span><span class=\"number\">.224</span><span class=\"number\">.78</span>:<span class=\"number\">80</span></span><br><span class=\"line\">Referrer Policy: strict-origin-when-cross-origin</span><br></pre></td></tr></table></figure>\n  <img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/sl_real_url_req.png\" class title=\"分析请求信息\"></li>\n</ul>\n<ol start=\"2\">\n<li>访问真实连接，并对返回值进行解析</li>\n</ol>\n<ul>\n<li>分析返回reponse，发现其是一个非常规整json字符串，外面包了一个小括弧，那就非常好办了，通过正则表达式把json字符串取出来，然后使用json包进行解析即可。</li>\n<li>通过页面对比，发现每个返回字段代表的中文含义，例如：f12是股票代码  <img src=\"/rabbitBear/.io//2021/02/01/%E9%87%8F%E5%8C%96%E6%8A%95%E8%B5%844/sl_real_url_rsp.png\" class title=\"分析返回信息\"></li>\n</ul>\n<h4 id=\"获取每只股票信息信息\"><a href=\"#获取每只股票信息信息\" class=\"headerlink\" title=\"获取每只股票信息信息\"></a><strong>获取每只股票信息信息</strong></h4><h5 id=\"☆完整代码-1\"><a href=\"#☆完整代码-1\" class=\"headerlink\" title=\"☆完整代码\"></a><strong>☆完整代码</strong></h5><pre><code><figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br><span class=\"line\">32</span><br><span class=\"line\">33</span><br><span class=\"line\">34</span><br><span class=\"line\">35</span><br><span class=\"line\">36</span><br><span class=\"line\">37</span><br><span class=\"line\">38</span><br><span class=\"line\">39</span><br><span class=\"line\">40</span><br><span class=\"line\">41</span><br><span class=\"line\">42</span><br><span class=\"line\">43</span><br><span class=\"line\">44</span><br><span class=\"line\">45</span><br><span class=\"line\">46</span><br><span class=\"line\">47</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">import</span> urllib</span><br><span class=\"line\"><span class=\"keyword\">import</span> requests</span><br><span class=\"line\"><span class=\"keyword\">import</span> re</span><br><span class=\"line\"><span class=\"keyword\">import</span> os</span><br><span class=\"line\"><span class=\"keyword\">import</span> csv</span><br><span class=\"line\"><span class=\"keyword\">import</span> json</span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"comment\">#读取文件,拼接地址</span></span><br><span class=\"line\">f = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;info_fin.csv&#x27;</span>,<span class=\"string\">&#x27;w+&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">f.write(<span class=\"string\">&#x27;股票代码&#x27;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;股票名称&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;最新价&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;最高价&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;最低价&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;今开&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;总手&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;金额&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;外盘&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;量比&quot;</span></span><br><span class=\"line\">    +<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;涨停&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;跌停&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;收益（新）&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;昨收&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;总股本&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;流通股&quot;</span></span><br><span class=\"line\">        +<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;净利润&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;每股净资产&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;总值&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;流值&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;板块&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;地区&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;pe&quot;</span></span><br><span class=\"line\">        +<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;ROE&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;总营收&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;总营收同比&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;净利润同比&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;净利率&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;负债率&quot;</span>+<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;上市时间&quot;</span></span><br><span class=\"line\">        +<span class=\"string\">&quot;,&quot;</span>+<span class=\"string\">&quot;每股未分配利润&quot;</span>+<span class=\"string\">&quot;\\n&quot;</span>)</span><br><span class=\"line\">    </span><br><span class=\"line\">file = <span class=\"built_in\">open</span>(<span class=\"string\">&#x27;stock.csv&#x27;</span>,encoding=<span class=\"string\">&#x27;utf-8&#x27;</span>)</span><br><span class=\"line\">fileReader = csv.reader(file)</span><br><span class=\"line\">filedata = <span class=\"built_in\">list</span>(fileReader) </span><br><span class=\"line\"></span><br><span class=\"line\"><span class=\"keyword\">for</span> _,i <span class=\"keyword\">in</span> <span class=\"built_in\">enumerate</span>(filedata):</span><br><span class=\"line\">    <span class=\"keyword\">if</span> _==<span class=\"number\">0</span>: <span class=\"comment\"># 跳过文件头</span></span><br><span class=\"line\">        <span class=\"keyword\">continue</span></span><br><span class=\"line\">    <span class=\"keyword\">if</span> i[<span class=\"number\">1</span>].startswith(<span class=\"string\">&#x27;6&#x27;</span>):</span><br><span class=\"line\">        addr = <span class=\"string\">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=1.&quot;</span> + i[<span class=\"number\">1</span>] + <span class=\"string\">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class=\"line\">    <span class=\"keyword\">else</span>:</span><br><span class=\"line\">        addr = <span class=\"string\">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=0.&quot;</span> + i[<span class=\"number\">1</span>] + <span class=\"string\">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class=\"line\"></span><br><span class=\"line\"></span><br><span class=\"line\">    re_cont = re.findall(<span class=\"string\">&quot;\\\\((.*?)\\\\);&quot;</span>,requests.get(addr).text,re.S)</span><br><span class=\"line\">    je_cont = json.loads(re_cont[<span class=\"number\">0</span>])</span><br><span class=\"line\">    <span class=\"comment\">#fin = &#123;&#125;</span></span><br><span class=\"line\">    <span class=\"comment\">#fin[&#x27;code&#x27;] = je_cont[&#x27;data&#x27;][&#x27;f57&#x27;]</span></span><br><span class=\"line\">    <span class=\"comment\">#fin[&#x27;name&#x27;] = je_cont[&#x27;data&#x27;][&#x27;f58&#x27;]</span></span><br><span class=\"line\">    work = <span class=\"string\">&#x27;&#x27;</span></span><br><span class=\"line\">    <span class=\"comment\">#print(str(je_cont[&#x27;data&#x27;][&#x27;f43&#x27;]))</span></span><br><span class=\"line\">    <span class=\"comment\">#print(&#x27;12&#x27;)</span></span><br><span class=\"line\">    work = (<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f57&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f58&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span> + <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f43&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f44&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f45&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f46&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f47&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f48&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f49&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f50&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f51&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f52&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f55&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f60&#x27;</span>])+ <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f84&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f85&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f105&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f92&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f116&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f117&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f127&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f128&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f162&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f173&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f183&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f184&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f185&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f187&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f188&#x27;</span>])+<span class=\"string\">&quot;,&quot;</span>+<span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f189&#x27;</span>])</span><br><span class=\"line\">    + <span class=\"string\">&quot;,&quot;</span>+ <span class=\"built_in\">str</span>(je_cont[<span class=\"string\">&#x27;data&#x27;</span>][<span class=\"string\">&#x27;f190&#x27;</span>]))</span><br><span class=\"line\"></span><br><span class=\"line\">    work = work+<span class=\"string\">&#x27;\\n&#x27;</span></span><br><span class=\"line\">    f.write(work) </span><br></pre></td></tr></table></figure>\n</code></pre>\n<h5 id=\"☆代码解读-1\"><a href=\"#☆代码解读-1\" class=\"headerlink\" title=\"☆代码解读\"></a><strong>☆代码解读</strong></h5><ol>\n<li>通过点击详情页面，找到每只股票详细信息访问的连接的规律<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">http://quote.eastmoney.com/sz******.html</span><br><span class=\"line\">http://quote.eastmoney.com/sh******.html</span><br></pre></td></tr></table></figure></li>\n<li>同样的方法，发现所有的股票详细数据，都是动态加载的。使用<strong>fiddler或者chrome自带功能</strong>，获取真实连接。</li>\n<li>分析规律组装真实连接，“6”开头的请求参数为“1.股票代码”，其他是“0.股票代码”<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"> <span class=\"keyword\">if</span> i[<span class=\"number\">1</span>].startswith(<span class=\"string\">&#x27;6&#x27;</span>):</span><br><span class=\"line\">    addr = <span class=\"string\">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=1.&quot;</span> + i[<span class=\"number\">1</span>] + <span class=\"string\">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class=\"line\"><span class=\"keyword\">else</span>:</span><br><span class=\"line\">    addr = <span class=\"string\">&quot;http://push2.eastmoney.com/api/qt/stock/get?ut=fa5fd1943c7b386f172d6893dbfba10b&amp;invt=2&amp;fltt=2&amp;fields=f43,f57,f58,f169,f170,f46,f44,f51,f168,f47,f164,f163,f116,f60,f45,f52,f50,f48,f167,f117,f71,f161,f49,f530,f135,f136,f137,f138,f139,f141,f142,f144,f145,f147,f148,f140,f143,f146,f149,f55,f62,f162,f92,f173,f104,f105,f84,f85,f183,f184,f185,f186,f187,f188,f189,f190,f191,f192,f107,f111,f86,f177,f78,f110,f262,f263,f264,f267,f268,f250,f251,f252,f253,f254,f255,f256,f257,f258,f266,f269,f270,f271,f273,f274,f275,f127,f199,f128,f193,f196,f194,f195,f197,f80,f280,f281,f282,f284,f285,f286,f287,f292&amp;secid=0.&quot;</span> + i[<span class=\"number\">1</span>] + <span class=\"string\">&quot;&amp;cb=jQuery11240660569033297794_1610790254977&amp;_=1610790254978&quot;</span></span><br><span class=\"line\"></span><br></pre></td></tr></table></figure></li>\n<li>解析返回reponse，同样的正则表达式+json解析，然后通过页面对比，发现每个返回字段对比的中文含义，例如：f57代表股票代码<figure class=\"highlight python\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br><span class=\"line\">20</span><br><span class=\"line\">21</span><br><span class=\"line\">22</span><br><span class=\"line\">23</span><br><span class=\"line\">24</span><br><span class=\"line\">25</span><br><span class=\"line\">26</span><br><span class=\"line\">27</span><br><span class=\"line\">28</span><br><span class=\"line\">29</span><br><span class=\"line\">30</span><br><span class=\"line\">31</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">最新价:f43</span><br><span class=\"line\">最高:f44</span><br><span class=\"line\">最低:f45</span><br><span class=\"line\">今开:f46</span><br><span class=\"line\">总手:f47</span><br><span class=\"line\">金额:f48</span><br><span class=\"line\">外盘:f49</span><br><span class=\"line\">量比:f50</span><br><span class=\"line\">涨停:f51</span><br><span class=\"line\">跌停:f52</span><br><span class=\"line\">收益（三）: f55</span><br><span class=\"line\">股票代码:f57</span><br><span class=\"line\">股票名称:f58</span><br><span class=\"line\">昨收:f60</span><br><span class=\"line\">总股本:f84</span><br><span class=\"line\">流通股:f85</span><br><span class=\"line\">净利润:f105</span><br><span class=\"line\">每股净资产:f92</span><br><span class=\"line\">总值:f116</span><br><span class=\"line\">流值:f117</span><br><span class=\"line\">板块：f127</span><br><span class=\"line\">地区：f128</span><br><span class=\"line\">pe（动）:f162</span><br><span class=\"line\">ROE:f173</span><br><span class=\"line\">总营收:f183</span><br><span class=\"line\">总营收同比:f184</span><br><span class=\"line\">净利润同比:f185</span><br><span class=\"line\">净利率:f187</span><br><span class=\"line\">负债率:f188</span><br><span class=\"line\">上市时间:f189</span><br><span class=\"line\">每股未分配利润:f190</span><br></pre></td></tr></table></figure></li>\n</ol>\n"},{"title":"数据要素相关政策","date":"2023-12-02T04:45:05.000Z","top_img":"https://unclevicky.github.io/rabbitBear/2023/12/02/%E6%95%B0%E6%8D%AE%E8%A6%81%E7%B4%A0%E7%9B%B8%E5%85%B3%E6%94%BF%E7%AD%96/%E5%9B%BD%E5%AE%B6%E6%95%B0%E6%8D%AE%E5%B1%80.jpg","cover":"https://unclevicky.github.io/rabbitBear/2023/12/02/%E6%95%B0%E6%8D%AE%E8%A6%81%E7%B4%A0%E7%9B%B8%E5%85%B3%E6%94%BF%E7%AD%96/%E5%9B%BD%E5%AE%B6%E6%95%B0%E6%8D%AE%E5%B1%80.jpg","_content":"\n## 政策发布情况\n### **政策框架：** 1+N\n\t1个顶层设计文件《关于构建数据基础制度更好发挥数据要素作用的意见》\n\tN个具体措施，包括数据确权、流通交易、收益分配、安全治理等\n\n### 中国数字经济与数据要素相关政策\n| 发起部门                                   | 时间       | 事件/政策名称                                             |\n| ------------------------------------------ | ---------- | --------------------------------------------------------- |\n| 国务院                                     | 2014年3月  | 大数据首次写入《政府工作报告》                            |\n| 国务院                                     | 2015年8月  | 《促进大数据发展行动纲要》                                |\n| 中共中央办公厅、国务院办公厅               | 2016年7月  | 《国家信息化发展战略纲要》                                |\n| 国务院                                     | 2016年9月  | 《政务信息资源共享管理暂行办法》                          |\n| 工信部                                     | 2016年12月 | 《大数据产业发展规划 (2016-2020 年)》                     |\n| 中央全面深化改革领导小组                   | 2017年2月  | 《关于推进公共信息资源开放的若干意见的通知》              |\n| 国务院办公厅                               | 2017年5月  | 《政务信息系统整合共享实施方案》                          |\n| 国家发改委、中央网信办                     | 2017年7月  | 《政务信息资源目录编制指南 (试行)》                       |\n| 国家发改委                                 | 2017年10月 | 《关于开展政务信息系统整合共享应用试点的通知》            |\n| 中国网信办、发改委、工信部                 | 2018年1月  | 《公共信息资源开放试点工作方案》                          |\n| 中共中央办公厅、国务院办公厅               | 2020年3月  | 《关于构建更加完善的要素市场化配置体制机制的意见》        |\n| 中共中央、国务院                           | 2020年5月  | 《关于新时代加快完善社会主义市场经济体制的意见》          |\n| 中共中央办公厅、国务院办公厅               | 2021年1月  | 《建设高标准市场体系行动方案》                            |\n| 国家发改委、中央网信办、工信部、国家能源局 | 2021年5月 | 《全国一体化大数据中心协同创新体系算力枢纽实施方案》      |\n| 全国人大                                   | 2021年6月  | 《中华人民共和国数据安全法》                              |\n| 国务院办公厅                               | 2022年1月  | 《要素市场化配置综合改革试点总体方案》                    |\n| 国务院                                     | 2022年1月  | 《“十四五”数字经济发展规划》                              |\n| 中共中央、国务院                           | 2022年3月  | 《关于加快建设全国统一大市场的意见》                      |\n| 国务院                                     | 2022年6月  | 《关于加强数字政府建设的指导意见》                        |\n| 国务院办公厅                               | 2022年10月 | 《全国一体化政务大数据体系建设指南》                      |\n| 工信部                                     | 2022年12月 | 《关于构建数据基础制度更好发挥数据要素作用的意见》        |\n| 发改委                                     | 2023年1月  | 《建立数据流通和交易制度 培育一批活跃的数据要素市场主体》 |\n| 国务院                                     | 2023年2月  | 《数字中国建设整体布局规划》                              |\n| 国务院                                     | 2023年3月  | 组建国家数据局 |\n| 中共中央、国务院                           | 2023年3月  | 《党和国家机构改革方案》|\n| 财政部                                     | 2023年8月  | 《企业数据资源相关会计处理暂行规定》 |\n\n### 典型地区数据要素政策\n\n| 政策名称                                   | 施行时间   | 政策主要内容                                                                                                                                                                               |\n| ------------------------------------------ | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| 《北京市数字经济促进例》                   | 2022年12月 | 条例提出，加快数据要素市场培育，探索建立数据要素收益分配机制，推动数据要素有效流动。回应“数据共享”需求，条例设计了统一管理的“公共数据目录”和共享机制，推动公共数据和相关业务系统互联互通。 |\n| 《北京市数字经济全产业链开放发展行动方案》 | 2022年5月  | 利用 2~3 年时间，制定一批数据要素团体标准和地方标准，开放一批数据创新应用的特色示范场景，推动一批数字经济国家试点任务率先落地，出台一批数字经济产业政策和制度规范，加快孵化一批高成长性的数据服务企业，形成一批可复制可推广的经验做法，在全国率先建成活跃有序的数据要素市场体系，数据要素赋能经济高质量发展作用显著发挥，将北京打造成为数字经济全产业链开放发展和创新高地。|\n### 政策推进中重要的节点\n1. 数据二十条\n2. 数据局局长任命\n3. 数据资产入表\n4. 国家数据局挂牌","source":"_posts/2023-12-02-数据要素相关政策.md","raw":"---\ntitle: 数据要素相关政策\ndate: 2023-12-02 12:45:05\ntags:\n  - 数据要素\n  - 数字经济\ntop_img: https://unclevicky.github.io/rabbitBear/2023/12/02/%E6%95%B0%E6%8D%AE%E8%A6%81%E7%B4%A0%E7%9B%B8%E5%85%B3%E6%94%BF%E7%AD%96/%E5%9B%BD%E5%AE%B6%E6%95%B0%E6%8D%AE%E5%B1%80.jpg\ncover: https://unclevicky.github.io/rabbitBear/2023/12/02/%E6%95%B0%E6%8D%AE%E8%A6%81%E7%B4%A0%E7%9B%B8%E5%85%B3%E6%94%BF%E7%AD%96/%E5%9B%BD%E5%AE%B6%E6%95%B0%E6%8D%AE%E5%B1%80.jpg\ncategories:\n- [数据, 数据要素, 行业洞察]\n- [专业, 技术]\n---\n\n## 政策发布情况\n### **政策框架：** 1+N\n\t1个顶层设计文件《关于构建数据基础制度更好发挥数据要素作用的意见》\n\tN个具体措施，包括数据确权、流通交易、收益分配、安全治理等\n\n### 中国数字经济与数据要素相关政策\n| 发起部门                                   | 时间       | 事件/政策名称                                             |\n| ------------------------------------------ | ---------- | --------------------------------------------------------- |\n| 国务院                                     | 2014年3月  | 大数据首次写入《政府工作报告》                            |\n| 国务院                                     | 2015年8月  | 《促进大数据发展行动纲要》                                |\n| 中共中央办公厅、国务院办公厅               | 2016年7月  | 《国家信息化发展战略纲要》                                |\n| 国务院                                     | 2016年9月  | 《政务信息资源共享管理暂行办法》                          |\n| 工信部                                     | 2016年12月 | 《大数据产业发展规划 (2016-2020 年)》                     |\n| 中央全面深化改革领导小组                   | 2017年2月  | 《关于推进公共信息资源开放的若干意见的通知》              |\n| 国务院办公厅                               | 2017年5月  | 《政务信息系统整合共享实施方案》                          |\n| 国家发改委、中央网信办                     | 2017年7月  | 《政务信息资源目录编制指南 (试行)》                       |\n| 国家发改委                                 | 2017年10月 | 《关于开展政务信息系统整合共享应用试点的通知》            |\n| 中国网信办、发改委、工信部                 | 2018年1月  | 《公共信息资源开放试点工作方案》                          |\n| 中共中央办公厅、国务院办公厅               | 2020年3月  | 《关于构建更加完善的要素市场化配置体制机制的意见》        |\n| 中共中央、国务院                           | 2020年5月  | 《关于新时代加快完善社会主义市场经济体制的意见》          |\n| 中共中央办公厅、国务院办公厅               | 2021年1月  | 《建设高标准市场体系行动方案》                            |\n| 国家发改委、中央网信办、工信部、国家能源局 | 2021年5月 | 《全国一体化大数据中心协同创新体系算力枢纽实施方案》      |\n| 全国人大                                   | 2021年6月  | 《中华人民共和国数据安全法》                              |\n| 国务院办公厅                               | 2022年1月  | 《要素市场化配置综合改革试点总体方案》                    |\n| 国务院                                     | 2022年1月  | 《“十四五”数字经济发展规划》                              |\n| 中共中央、国务院                           | 2022年3月  | 《关于加快建设全国统一大市场的意见》                      |\n| 国务院                                     | 2022年6月  | 《关于加强数字政府建设的指导意见》                        |\n| 国务院办公厅                               | 2022年10月 | 《全国一体化政务大数据体系建设指南》                      |\n| 工信部                                     | 2022年12月 | 《关于构建数据基础制度更好发挥数据要素作用的意见》        |\n| 发改委                                     | 2023年1月  | 《建立数据流通和交易制度 培育一批活跃的数据要素市场主体》 |\n| 国务院                                     | 2023年2月  | 《数字中国建设整体布局规划》                              |\n| 国务院                                     | 2023年3月  | 组建国家数据局 |\n| 中共中央、国务院                           | 2023年3月  | 《党和国家机构改革方案》|\n| 财政部                                     | 2023年8月  | 《企业数据资源相关会计处理暂行规定》 |\n\n### 典型地区数据要素政策\n\n| 政策名称                                   | 施行时间   | 政策主要内容                                                                                                                                                                               |\n| ------------------------------------------ | ---------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| 《北京市数字经济促进例》                   | 2022年12月 | 条例提出，加快数据要素市场培育，探索建立数据要素收益分配机制，推动数据要素有效流动。回应“数据共享”需求，条例设计了统一管理的“公共数据目录”和共享机制，推动公共数据和相关业务系统互联互通。 |\n| 《北京市数字经济全产业链开放发展行动方案》 | 2022年5月  | 利用 2~3 年时间，制定一批数据要素团体标准和地方标准，开放一批数据创新应用的特色示范场景，推动一批数字经济国家试点任务率先落地，出台一批数字经济产业政策和制度规范，加快孵化一批高成长性的数据服务企业，形成一批可复制可推广的经验做法，在全国率先建成活跃有序的数据要素市场体系，数据要素赋能经济高质量发展作用显著发挥，将北京打造成为数字经济全产业链开放发展和创新高地。|\n### 政策推进中重要的节点\n1. 数据二十条\n2. 数据局局长任命\n3. 数据资产入表\n4. 国家数据局挂牌","slug":"数据要素相关政策","published":1,"updated":"2025-08-14T14:24:20.446Z","_id":"clqdww77l0016z4lt503hb59x","comments":1,"layout":"post","photos":[],"content":"<h2 id=\"政策发布情况\"><a href=\"#政策发布情况\" class=\"headerlink\" title=\"政策发布情况\"></a>政策发布情况</h2><h3 id=\"政策框架：-1-N\"><a href=\"#政策框架：-1-N\" class=\"headerlink\" title=\"政策框架： 1+N\"></a><strong>政策框架：</strong> 1+N</h3><pre><code>1个顶层设计文件《关于构建数据基础制度更好发挥数据要素作用的意见》\nN个具体措施，包括数据确权、流通交易、收益分配、安全治理等\n</code></pre>\n<h3 id=\"中国数字经济与数据要素相关政策\"><a href=\"#中国数字经济与数据要素相关政策\" class=\"headerlink\" title=\"中国数字经济与数据要素相关政策\"></a>中国数字经济与数据要素相关政策</h3><table>\n<thead>\n<tr>\n<th>发起部门</th>\n<th>时间</th>\n<th>事件&#x2F;政策名称</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>国务院</td>\n<td>2014年3月</td>\n<td>大数据首次写入《政府工作报告》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2015年8月</td>\n<td>《促进大数据发展行动纲要》</td>\n</tr>\n<tr>\n<td>中共中央办公厅、国务院办公厅</td>\n<td>2016年7月</td>\n<td>《国家信息化发展战略纲要》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2016年9月</td>\n<td>《政务信息资源共享管理暂行办法》</td>\n</tr>\n<tr>\n<td>工信部</td>\n<td>2016年12月</td>\n<td>《大数据产业发展规划 (2016-2020 年)》</td>\n</tr>\n<tr>\n<td>中央全面深化改革领导小组</td>\n<td>2017年2月</td>\n<td>《关于推进公共信息资源开放的若干意见的通知》</td>\n</tr>\n<tr>\n<td>国务院办公厅</td>\n<td>2017年5月</td>\n<td>《政务信息系统整合共享实施方案》</td>\n</tr>\n<tr>\n<td>国家发改委、中央网信办</td>\n<td>2017年7月</td>\n<td>《政务信息资源目录编制指南 (试行)》</td>\n</tr>\n<tr>\n<td>国家发改委</td>\n<td>2017年10月</td>\n<td>《关于开展政务信息系统整合共享应用试点的通知》</td>\n</tr>\n<tr>\n<td>中国网信办、发改委、工信部</td>\n<td>2018年1月</td>\n<td>《公共信息资源开放试点工作方案》</td>\n</tr>\n<tr>\n<td>中共中央办公厅、国务院办公厅</td>\n<td>2020年3月</td>\n<td>《关于构建更加完善的要素市场化配置体制机制的意见》</td>\n</tr>\n<tr>\n<td>中共中央、国务院</td>\n<td>2020年5月</td>\n<td>《关于新时代加快完善社会主义市场经济体制的意见》</td>\n</tr>\n<tr>\n<td>中共中央办公厅、国务院办公厅</td>\n<td>2021年1月</td>\n<td>《建设高标准市场体系行动方案》</td>\n</tr>\n<tr>\n<td>国家发改委、中央网信办、工信部、国家能源局</td>\n<td>2021年5月</td>\n<td>《全国一体化大数据中心协同创新体系算力枢纽实施方案》</td>\n</tr>\n<tr>\n<td>全国人大</td>\n<td>2021年6月</td>\n<td>《中华人民共和国数据安全法》</td>\n</tr>\n<tr>\n<td>国务院办公厅</td>\n<td>2022年1月</td>\n<td>《要素市场化配置综合改革试点总体方案》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2022年1月</td>\n<td>《“十四五”数字经济发展规划》</td>\n</tr>\n<tr>\n<td>中共中央、国务院</td>\n<td>2022年3月</td>\n<td>《关于加快建设全国统一大市场的意见》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2022年6月</td>\n<td>《关于加强数字政府建设的指导意见》</td>\n</tr>\n<tr>\n<td>国务院办公厅</td>\n<td>2022年10月</td>\n<td>《全国一体化政务大数据体系建设指南》</td>\n</tr>\n<tr>\n<td>工信部</td>\n<td>2022年12月</td>\n<td>《关于构建数据基础制度更好发挥数据要素作用的意见》</td>\n</tr>\n<tr>\n<td>发改委</td>\n<td>2023年1月</td>\n<td>《建立数据流通和交易制度 培育一批活跃的数据要素市场主体》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2023年2月</td>\n<td>《数字中国建设整体布局规划》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2023年3月</td>\n<td>组建国家数据局</td>\n</tr>\n<tr>\n<td>中共中央、国务院</td>\n<td>2023年3月</td>\n<td>《党和国家机构改革方案》</td>\n</tr>\n<tr>\n<td>财政部</td>\n<td>2023年8月</td>\n<td>《企业数据资源相关会计处理暂行规定》</td>\n</tr>\n</tbody></table>\n<h3 id=\"典型地区数据要素政策\"><a href=\"#典型地区数据要素政策\" class=\"headerlink\" title=\"典型地区数据要素政策\"></a>典型地区数据要素政策</h3><table>\n<thead>\n<tr>\n<th>政策名称</th>\n<th>施行时间</th>\n<th>政策主要内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>《北京市数字经济促进例》</td>\n<td>2022年12月</td>\n<td>条例提出，加快数据要素市场培育，探索建立数据要素收益分配机制，推动数据要素有效流动。回应“数据共享”需求，条例设计了统一管理的“公共数据目录”和共享机制，推动公共数据和相关业务系统互联互通。</td>\n</tr>\n<tr>\n<td>《北京市数字经济全产业链开放发展行动方案》</td>\n<td>2022年5月</td>\n<td>利用 2~3 年时间，制定一批数据要素团体标准和地方标准，开放一批数据创新应用的特色示范场景，推动一批数字经济国家试点任务率先落地，出台一批数字经济产业政策和制度规范，加快孵化一批高成长性的数据服务企业，形成一批可复制可推广的经验做法，在全国率先建成活跃有序的数据要素市场体系，数据要素赋能经济高质量发展作用显著发挥，将北京打造成为数字经济全产业链开放发展和创新高地。</td>\n</tr>\n</tbody></table>\n<h3 id=\"政策推进中重要的节点\"><a href=\"#政策推进中重要的节点\" class=\"headerlink\" title=\"政策推进中重要的节点\"></a>政策推进中重要的节点</h3><ol>\n<li>数据二十条</li>\n<li>数据局局长任命</li>\n<li>数据资产入表</li>\n<li>国家数据局挂牌</li>\n</ol>\n","cover_type":"img","excerpt":"","more":"<h2 id=\"政策发布情况\"><a href=\"#政策发布情况\" class=\"headerlink\" title=\"政策发布情况\"></a>政策发布情况</h2><h3 id=\"政策框架：-1-N\"><a href=\"#政策框架：-1-N\" class=\"headerlink\" title=\"政策框架： 1+N\"></a><strong>政策框架：</strong> 1+N</h3><pre><code>1个顶层设计文件《关于构建数据基础制度更好发挥数据要素作用的意见》\nN个具体措施，包括数据确权、流通交易、收益分配、安全治理等\n</code></pre>\n<h3 id=\"中国数字经济与数据要素相关政策\"><a href=\"#中国数字经济与数据要素相关政策\" class=\"headerlink\" title=\"中国数字经济与数据要素相关政策\"></a>中国数字经济与数据要素相关政策</h3><table>\n<thead>\n<tr>\n<th>发起部门</th>\n<th>时间</th>\n<th>事件&#x2F;政策名称</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>国务院</td>\n<td>2014年3月</td>\n<td>大数据首次写入《政府工作报告》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2015年8月</td>\n<td>《促进大数据发展行动纲要》</td>\n</tr>\n<tr>\n<td>中共中央办公厅、国务院办公厅</td>\n<td>2016年7月</td>\n<td>《国家信息化发展战略纲要》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2016年9月</td>\n<td>《政务信息资源共享管理暂行办法》</td>\n</tr>\n<tr>\n<td>工信部</td>\n<td>2016年12月</td>\n<td>《大数据产业发展规划 (2016-2020 年)》</td>\n</tr>\n<tr>\n<td>中央全面深化改革领导小组</td>\n<td>2017年2月</td>\n<td>《关于推进公共信息资源开放的若干意见的通知》</td>\n</tr>\n<tr>\n<td>国务院办公厅</td>\n<td>2017年5月</td>\n<td>《政务信息系统整合共享实施方案》</td>\n</tr>\n<tr>\n<td>国家发改委、中央网信办</td>\n<td>2017年7月</td>\n<td>《政务信息资源目录编制指南 (试行)》</td>\n</tr>\n<tr>\n<td>国家发改委</td>\n<td>2017年10月</td>\n<td>《关于开展政务信息系统整合共享应用试点的通知》</td>\n</tr>\n<tr>\n<td>中国网信办、发改委、工信部</td>\n<td>2018年1月</td>\n<td>《公共信息资源开放试点工作方案》</td>\n</tr>\n<tr>\n<td>中共中央办公厅、国务院办公厅</td>\n<td>2020年3月</td>\n<td>《关于构建更加完善的要素市场化配置体制机制的意见》</td>\n</tr>\n<tr>\n<td>中共中央、国务院</td>\n<td>2020年5月</td>\n<td>《关于新时代加快完善社会主义市场经济体制的意见》</td>\n</tr>\n<tr>\n<td>中共中央办公厅、国务院办公厅</td>\n<td>2021年1月</td>\n<td>《建设高标准市场体系行动方案》</td>\n</tr>\n<tr>\n<td>国家发改委、中央网信办、工信部、国家能源局</td>\n<td>2021年5月</td>\n<td>《全国一体化大数据中心协同创新体系算力枢纽实施方案》</td>\n</tr>\n<tr>\n<td>全国人大</td>\n<td>2021年6月</td>\n<td>《中华人民共和国数据安全法》</td>\n</tr>\n<tr>\n<td>国务院办公厅</td>\n<td>2022年1月</td>\n<td>《要素市场化配置综合改革试点总体方案》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2022年1月</td>\n<td>《“十四五”数字经济发展规划》</td>\n</tr>\n<tr>\n<td>中共中央、国务院</td>\n<td>2022年3月</td>\n<td>《关于加快建设全国统一大市场的意见》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2022年6月</td>\n<td>《关于加强数字政府建设的指导意见》</td>\n</tr>\n<tr>\n<td>国务院办公厅</td>\n<td>2022年10月</td>\n<td>《全国一体化政务大数据体系建设指南》</td>\n</tr>\n<tr>\n<td>工信部</td>\n<td>2022年12月</td>\n<td>《关于构建数据基础制度更好发挥数据要素作用的意见》</td>\n</tr>\n<tr>\n<td>发改委</td>\n<td>2023年1月</td>\n<td>《建立数据流通和交易制度 培育一批活跃的数据要素市场主体》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2023年2月</td>\n<td>《数字中国建设整体布局规划》</td>\n</tr>\n<tr>\n<td>国务院</td>\n<td>2023年3月</td>\n<td>组建国家数据局</td>\n</tr>\n<tr>\n<td>中共中央、国务院</td>\n<td>2023年3月</td>\n<td>《党和国家机构改革方案》</td>\n</tr>\n<tr>\n<td>财政部</td>\n<td>2023年8月</td>\n<td>《企业数据资源相关会计处理暂行规定》</td>\n</tr>\n</tbody></table>\n<h3 id=\"典型地区数据要素政策\"><a href=\"#典型地区数据要素政策\" class=\"headerlink\" title=\"典型地区数据要素政策\"></a>典型地区数据要素政策</h3><table>\n<thead>\n<tr>\n<th>政策名称</th>\n<th>施行时间</th>\n<th>政策主要内容</th>\n</tr>\n</thead>\n<tbody><tr>\n<td>《北京市数字经济促进例》</td>\n<td>2022年12月</td>\n<td>条例提出，加快数据要素市场培育，探索建立数据要素收益分配机制，推动数据要素有效流动。回应“数据共享”需求，条例设计了统一管理的“公共数据目录”和共享机制，推动公共数据和相关业务系统互联互通。</td>\n</tr>\n<tr>\n<td>《北京市数字经济全产业链开放发展行动方案》</td>\n<td>2022年5月</td>\n<td>利用 2~3 年时间，制定一批数据要素团体标准和地方标准，开放一批数据创新应用的特色示范场景，推动一批数字经济国家试点任务率先落地，出台一批数字经济产业政策和制度规范，加快孵化一批高成长性的数据服务企业，形成一批可复制可推广的经验做法，在全国率先建成活跃有序的数据要素市场体系，数据要素赋能经济高质量发展作用显著发挥，将北京打造成为数字经济全产业链开放发展和创新高地。</td>\n</tr>\n</tbody></table>\n<h3 id=\"政策推进中重要的节点\"><a href=\"#政策推进中重要的节点\" class=\"headerlink\" title=\"政策推进中重要的节点\"></a>政策推进中重要的节点</h3><ol>\n<li>数据二十条</li>\n<li>数据局局长任命</li>\n<li>数据资产入表</li>\n<li>国家数据局挂牌</li>\n</ol>\n"},{"title":"win11中安装copilot","date":"2023-12-20T14:23:41.000Z","_content":"\n最近万番尝试各种AI工具，发现了一个被忽略的免费AI助手—Copilot。\n\n只要你是Windows电脑，下载Copilot软件，就可以开始你的提问了。完全免费。\n\n此篇文章感谢熊先生悉心整理，大家按照步骤一步步来，100%可行。\n\n## 简介\n<font color=\"#ff0000\">Copilot，中文是“一起起飞”，</font>是微软在Windows 11中加入的AI助手，<font color=\"#ff0000\">集成在了操作系统中的侧边栏工具</font>。\n\nCopilot依托于底层大语言模型（LLM），<font color=\"#ff0000\">用户只需说几句话，做出指示，它就可以创建类似人类撰写的文本、绘制图片等</font>。\n\n## 安装\n### 方法1：windows自动更新到23H2及以上版本（推荐）\n<font color=\"#ff0000\">这是最推荐的方法。</font>\n\n{% asset_img windows自动更新.png  windows自动更新 %}\n\n如果能自动更新成功，是最简单最完美的。\n但有时候会更新失败，而且尝试了各种方法，比如手动下载升级包进行安装，依然安装失败。\n那这种情况可尝试方法2。\n\n### 方法2：使用安装媒体升级（非重装）\n<font color=\"#ff0000\">1. 在microsoft官网，下载一个媒体创建工具；</font>\n\n<font color=\"#ff0000\">2. 使用该工具，下载U盘（需要8G以上）或者ISO版本</font>\n\n注意：\n\n下载过程，一定要**选择默认推荐的版本，这个版本是和自己电脑相同版本**。只有版本相同才能直接升级，否则就只能覆盖安装。\n\n{% asset_img win11安装程序.png  win11安装程序 %}\n\n<font color=\"#ff0000\">3. 打开制作好的U盘或者ISO文件，运行setup文件，按提示一步步操作即可。</font>\n\n注：\n1. **一定要点升级安装，**这样可以保留现有的文件和安装的应用程序；\n2. **一定不要使用U盘或者DVD启动，**这种方式只能重新安装，或默认覆盖，之前安装的软件和保存在系统盘里的内容都会被清除。\n\n{% asset_img 系统中安装.png  系统中安装 %}\n\n{% asset_img 选择保留内容.png 选择保留内容 %}\n\n### 方法3：使用Windows 11 安装助手\n1.登录microsoft官网,win11安装助手页面\n\n2.根据提示，一步一步的操作即可，<font color=\"#ff0000\">后面的步骤跟方法2中一样</font>。\n\n### 方法4：不升级系统，直接安装功能启用包\n1.下载23H2 功能启用包\n\n2.解压后，找到自己电脑对应的安装包安装即可\n\n注：如果不知道哪个是，都点一遍也行，因为如果跟自己电脑不匹配会报错，无法安装。\n\n### 检查是否安装成功\n升级安装后，会在windows状态栏出现一个copilot的应用图标。\n\n如下图所示，即表示安装成功。\n\n## 使用 \n### 打开copilot之后，即可进入使用界面\n可以使用bing聊天，答疑、写作、绘画等，与使用chatgpt一样的方式；\n他也可以帮忙打开某个应用程序、更换电脑背景、调整电脑声音、做系统设置等等\n\n### <font color=\"#ff0000\">场景一：聊天</font>\n\n### <font color=\"#ff0000\"> 场景二：画图</font>\n\n### 可能的问题\n**问题1：提示不在服务区域。**\n原因：因为copilot暂不对中国大陆开放。\n\n解决方法：edge浏览器，打开newbing页面，设置区域为其他区域，例如“美国”。\n\n### 问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）\n\n解决方法：刷新即可；或者在newbing里，换个区域，再刷新，成功率更高。\n\n祝成为AI时代的我们。","source":"_posts/2023-12-20-win11中安装copilot.md","raw":"---\ntitle: win11中安装copilot\ndate: 2023-12-20 22:23:41\ntags:\n  - 技术\n  - 教程\ncategories:\n- [专业, 技术,教程]\n---\n\n最近万番尝试各种AI工具，发现了一个被忽略的免费AI助手—Copilot。\n\n只要你是Windows电脑，下载Copilot软件，就可以开始你的提问了。完全免费。\n\n此篇文章感谢熊先生悉心整理，大家按照步骤一步步来，100%可行。\n\n## 简介\n<font color=\"#ff0000\">Copilot，中文是“一起起飞”，</font>是微软在Windows 11中加入的AI助手，<font color=\"#ff0000\">集成在了操作系统中的侧边栏工具</font>。\n\nCopilot依托于底层大语言模型（LLM），<font color=\"#ff0000\">用户只需说几句话，做出指示，它就可以创建类似人类撰写的文本、绘制图片等</font>。\n\n## 安装\n### 方法1：windows自动更新到23H2及以上版本（推荐）\n<font color=\"#ff0000\">这是最推荐的方法。</font>\n\n{% asset_img windows自动更新.png  windows自动更新 %}\n\n如果能自动更新成功，是最简单最完美的。\n但有时候会更新失败，而且尝试了各种方法，比如手动下载升级包进行安装，依然安装失败。\n那这种情况可尝试方法2。\n\n### 方法2：使用安装媒体升级（非重装）\n<font color=\"#ff0000\">1. 在microsoft官网，下载一个媒体创建工具；</font>\n\n<font color=\"#ff0000\">2. 使用该工具，下载U盘（需要8G以上）或者ISO版本</font>\n\n注意：\n\n下载过程，一定要**选择默认推荐的版本，这个版本是和自己电脑相同版本**。只有版本相同才能直接升级，否则就只能覆盖安装。\n\n{% asset_img win11安装程序.png  win11安装程序 %}\n\n<font color=\"#ff0000\">3. 打开制作好的U盘或者ISO文件，运行setup文件，按提示一步步操作即可。</font>\n\n注：\n1. **一定要点升级安装，**这样可以保留现有的文件和安装的应用程序；\n2. **一定不要使用U盘或者DVD启动，**这种方式只能重新安装，或默认覆盖，之前安装的软件和保存在系统盘里的内容都会被清除。\n\n{% asset_img 系统中安装.png  系统中安装 %}\n\n{% asset_img 选择保留内容.png 选择保留内容 %}\n\n### 方法3：使用Windows 11 安装助手\n1.登录microsoft官网,win11安装助手页面\n\n2.根据提示，一步一步的操作即可，<font color=\"#ff0000\">后面的步骤跟方法2中一样</font>。\n\n### 方法4：不升级系统，直接安装功能启用包\n1.下载23H2 功能启用包\n\n2.解压后，找到自己电脑对应的安装包安装即可\n\n注：如果不知道哪个是，都点一遍也行，因为如果跟自己电脑不匹配会报错，无法安装。\n\n### 检查是否安装成功\n升级安装后，会在windows状态栏出现一个copilot的应用图标。\n\n如下图所示，即表示安装成功。\n\n## 使用 \n### 打开copilot之后，即可进入使用界面\n可以使用bing聊天，答疑、写作、绘画等，与使用chatgpt一样的方式；\n他也可以帮忙打开某个应用程序、更换电脑背景、调整电脑声音、做系统设置等等\n\n### <font color=\"#ff0000\">场景一：聊天</font>\n\n### <font color=\"#ff0000\"> 场景二：画图</font>\n\n### 可能的问题\n**问题1：提示不在服务区域。**\n原因：因为copilot暂不对中国大陆开放。\n\n解决方法：edge浏览器，打开newbing页面，设置区域为其他区域，例如“美国”。\n\n### 问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）\n\n解决方法：刷新即可；或者在newbing里，换个区域，再刷新，成功率更高。\n\n祝成为AI时代的我们。","slug":"win11中安装copilot","published":1,"updated":"2025-08-14T14:24:20.446Z","_id":"clqdww77m001az4lth425983h","comments":1,"layout":"post","photos":[],"content":"<p>最近万番尝试各种AI工具，发现了一个被忽略的免费AI助手—Copilot。</p>\n<p>只要你是Windows电脑，下载Copilot软件，就可以开始你的提问了。完全免费。</p>\n<p>此篇文章感谢熊先生悉心整理，大家按照步骤一步步来，100%可行。</p>\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p><font color=\"#ff0000\">Copilot，中文是“一起起飞”，</font>是微软在Windows 11中加入的AI助手，<font color=\"#ff0000\">集成在了操作系统中的侧边栏工具</font>。</p>\n<p>Copilot依托于底层大语言模型（LLM），<font color=\"#ff0000\">用户只需说几句话，做出指示，它就可以创建类似人类撰写的文本、绘制图片等</font>。</p>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"方法1：windows自动更新到23H2及以上版本（推荐）\"><a href=\"#方法1：windows自动更新到23H2及以上版本（推荐）\" class=\"headerlink\" title=\"方法1：windows自动更新到23H2及以上版本（推荐）\"></a>方法1：windows自动更新到23H2及以上版本（推荐）</h3><p><font color=\"#ff0000\">这是最推荐的方法。</font></p>\n<img src=\"/rabbitBear/.io//2023/12/20/win11%E4%B8%AD%E5%AE%89%E8%A3%85copilot/windows%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0.png\" class title=\"windows自动更新\">\n\n<p>如果能自动更新成功，是最简单最完美的。<br>但有时候会更新失败，而且尝试了各种方法，比如手动下载升级包进行安装，依然安装失败。<br>那这种情况可尝试方法2。</p>\n<h3 id=\"方法2：使用安装媒体升级（非重装）\"><a href=\"#方法2：使用安装媒体升级（非重装）\" class=\"headerlink\" title=\"方法2：使用安装媒体升级（非重装）\"></a>方法2：使用安装媒体升级（非重装）</h3><p><font color=\"#ff0000\">1. 在microsoft官网，下载一个媒体创建工具；</font></p>\n<p><font color=\"#ff0000\">2. 使用该工具，下载U盘（需要8G以上）或者ISO版本</font></p>\n<p>注意：</p>\n<p>下载过程，一定要<strong>选择默认推荐的版本，这个版本是和自己电脑相同版本</strong>。只有版本相同才能直接升级，否则就只能覆盖安装。</p>\n<img src=\"/rabbitBear/.io//2023/12/20/win11%E4%B8%AD%E5%AE%89%E8%A3%85copilot/win11%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F.png\" class title=\"win11安装程序\">\n\n<p><font color=\"#ff0000\">3. 打开制作好的U盘或者ISO文件，运行setup文件，按提示一步步操作即可。</font></p>\n<p>注：</p>\n<ol>\n<li><strong>一定要点升级安装，</strong>这样可以保留现有的文件和安装的应用程序；</li>\n<li><strong>一定不要使用U盘或者DVD启动，</strong>这种方式只能重新安装，或默认覆盖，之前安装的软件和保存在系统盘里的内容都会被清除。</li>\n</ol>\n<img src=\"/rabbitBear/.io//2023/12/20/win11%E4%B8%AD%E5%AE%89%E8%A3%85copilot/%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85.png\" class title=\"系统中安装\">\n\n<img src=\"/rabbitBear/.io//2023/12/20/win11%E4%B8%AD%E5%AE%89%E8%A3%85copilot/%E9%80%89%E6%8B%A9%E4%BF%9D%E7%95%99%E5%86%85%E5%AE%B9.png\" class title=\"选择保留内容\">\n\n<h3 id=\"方法3：使用Windows-11-安装助手\"><a href=\"#方法3：使用Windows-11-安装助手\" class=\"headerlink\" title=\"方法3：使用Windows 11 安装助手\"></a>方法3：使用Windows 11 安装助手</h3><p>1.登录microsoft官网,win11安装助手页面</p>\n<p>2.根据提示，一步一步的操作即可，<font color=\"#ff0000\">后面的步骤跟方法2中一样</font>。</p>\n<h3 id=\"方法4：不升级系统，直接安装功能启用包\"><a href=\"#方法4：不升级系统，直接安装功能启用包\" class=\"headerlink\" title=\"方法4：不升级系统，直接安装功能启用包\"></a>方法4：不升级系统，直接安装功能启用包</h3><p>1.下载23H2 功能启用包</p>\n<p>2.解压后，找到自己电脑对应的安装包安装即可</p>\n<p>注：如果不知道哪个是，都点一遍也行，因为如果跟自己电脑不匹配会报错，无法安装。</p>\n<h3 id=\"检查是否安装成功\"><a href=\"#检查是否安装成功\" class=\"headerlink\" title=\"检查是否安装成功\"></a>检查是否安装成功</h3><p>升级安装后，会在windows状态栏出现一个copilot的应用图标。</p>\n<p>如下图所示，即表示安装成功。</p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><h3 id=\"打开copilot之后，即可进入使用界面\"><a href=\"#打开copilot之后，即可进入使用界面\" class=\"headerlink\" title=\"打开copilot之后，即可进入使用界面\"></a>打开copilot之后，即可进入使用界面</h3><p>可以使用bing聊天，答疑、写作、绘画等，与使用chatgpt一样的方式；<br>他也可以帮忙打开某个应用程序、更换电脑背景、调整电脑声音、做系统设置等等</p>\n<h3 id=\"场景一：聊天\"><a href=\"#场景一：聊天\" class=\"headerlink\" title=\"场景一：聊天\"></a><font color=\"#ff0000\">场景一：聊天</font></h3><h3 id=\"场景二：画图\"><a href=\"#场景二：画图\" class=\"headerlink\" title=\" 场景二：画图\"></a><font color=\"#ff0000\"> 场景二：画图</font></h3><h3 id=\"可能的问题\"><a href=\"#可能的问题\" class=\"headerlink\" title=\"可能的问题\"></a>可能的问题</h3><p><strong>问题1：提示不在服务区域。</strong><br>原因：因为copilot暂不对中国大陆开放。</p>\n<p>解决方法：edge浏览器，打开newbing页面，设置区域为其他区域，例如“美国”。</p>\n<h3 id=\"问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）\"><a href=\"#问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）\" class=\"headerlink\" title=\"问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）\"></a>问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）</h3><p>解决方法：刷新即可；或者在newbing里，换个区域，再刷新，成功率更高。</p>\n<p>祝成为AI时代的我们。</p>\n","cover":false,"excerpt":"","more":"<p>最近万番尝试各种AI工具，发现了一个被忽略的免费AI助手—Copilot。</p>\n<p>只要你是Windows电脑，下载Copilot软件，就可以开始你的提问了。完全免费。</p>\n<p>此篇文章感谢熊先生悉心整理，大家按照步骤一步步来，100%可行。</p>\n<h2 id=\"简介\"><a href=\"#简介\" class=\"headerlink\" title=\"简介\"></a>简介</h2><p><font color=\"#ff0000\">Copilot，中文是“一起起飞”，</font>是微软在Windows 11中加入的AI助手，<font color=\"#ff0000\">集成在了操作系统中的侧边栏工具</font>。</p>\n<p>Copilot依托于底层大语言模型（LLM），<font color=\"#ff0000\">用户只需说几句话，做出指示，它就可以创建类似人类撰写的文本、绘制图片等</font>。</p>\n<h2 id=\"安装\"><a href=\"#安装\" class=\"headerlink\" title=\"安装\"></a>安装</h2><h3 id=\"方法1：windows自动更新到23H2及以上版本（推荐）\"><a href=\"#方法1：windows自动更新到23H2及以上版本（推荐）\" class=\"headerlink\" title=\"方法1：windows自动更新到23H2及以上版本（推荐）\"></a>方法1：windows自动更新到23H2及以上版本（推荐）</h3><p><font color=\"#ff0000\">这是最推荐的方法。</font></p>\n<img src=\"/rabbitBear/.io//2023/12/20/win11%E4%B8%AD%E5%AE%89%E8%A3%85copilot/windows%E8%87%AA%E5%8A%A8%E6%9B%B4%E6%96%B0.png\" class title=\"windows自动更新\">\n\n<p>如果能自动更新成功，是最简单最完美的。<br>但有时候会更新失败，而且尝试了各种方法，比如手动下载升级包进行安装，依然安装失败。<br>那这种情况可尝试方法2。</p>\n<h3 id=\"方法2：使用安装媒体升级（非重装）\"><a href=\"#方法2：使用安装媒体升级（非重装）\" class=\"headerlink\" title=\"方法2：使用安装媒体升级（非重装）\"></a>方法2：使用安装媒体升级（非重装）</h3><p><font color=\"#ff0000\">1. 在microsoft官网，下载一个媒体创建工具；</font></p>\n<p><font color=\"#ff0000\">2. 使用该工具，下载U盘（需要8G以上）或者ISO版本</font></p>\n<p>注意：</p>\n<p>下载过程，一定要<strong>选择默认推荐的版本，这个版本是和自己电脑相同版本</strong>。只有版本相同才能直接升级，否则就只能覆盖安装。</p>\n<img src=\"/rabbitBear/.io//2023/12/20/win11%E4%B8%AD%E5%AE%89%E8%A3%85copilot/win11%E5%AE%89%E8%A3%85%E7%A8%8B%E5%BA%8F.png\" class title=\"win11安装程序\">\n\n<p><font color=\"#ff0000\">3. 打开制作好的U盘或者ISO文件，运行setup文件，按提示一步步操作即可。</font></p>\n<p>注：</p>\n<ol>\n<li><strong>一定要点升级安装，</strong>这样可以保留现有的文件和安装的应用程序；</li>\n<li><strong>一定不要使用U盘或者DVD启动，</strong>这种方式只能重新安装，或默认覆盖，之前安装的软件和保存在系统盘里的内容都会被清除。</li>\n</ol>\n<img src=\"/rabbitBear/.io//2023/12/20/win11%E4%B8%AD%E5%AE%89%E8%A3%85copilot/%E7%B3%BB%E7%BB%9F%E4%B8%AD%E5%AE%89%E8%A3%85.png\" class title=\"系统中安装\">\n\n<img src=\"/rabbitBear/.io//2023/12/20/win11%E4%B8%AD%E5%AE%89%E8%A3%85copilot/%E9%80%89%E6%8B%A9%E4%BF%9D%E7%95%99%E5%86%85%E5%AE%B9.png\" class title=\"选择保留内容\">\n\n<h3 id=\"方法3：使用Windows-11-安装助手\"><a href=\"#方法3：使用Windows-11-安装助手\" class=\"headerlink\" title=\"方法3：使用Windows 11 安装助手\"></a>方法3：使用Windows 11 安装助手</h3><p>1.登录microsoft官网,win11安装助手页面</p>\n<p>2.根据提示，一步一步的操作即可，<font color=\"#ff0000\">后面的步骤跟方法2中一样</font>。</p>\n<h3 id=\"方法4：不升级系统，直接安装功能启用包\"><a href=\"#方法4：不升级系统，直接安装功能启用包\" class=\"headerlink\" title=\"方法4：不升级系统，直接安装功能启用包\"></a>方法4：不升级系统，直接安装功能启用包</h3><p>1.下载23H2 功能启用包</p>\n<p>2.解压后，找到自己电脑对应的安装包安装即可</p>\n<p>注：如果不知道哪个是，都点一遍也行，因为如果跟自己电脑不匹配会报错，无法安装。</p>\n<h3 id=\"检查是否安装成功\"><a href=\"#检查是否安装成功\" class=\"headerlink\" title=\"检查是否安装成功\"></a>检查是否安装成功</h3><p>升级安装后，会在windows状态栏出现一个copilot的应用图标。</p>\n<p>如下图所示，即表示安装成功。</p>\n<h2 id=\"使用\"><a href=\"#使用\" class=\"headerlink\" title=\"使用\"></a>使用</h2><h3 id=\"打开copilot之后，即可进入使用界面\"><a href=\"#打开copilot之后，即可进入使用界面\" class=\"headerlink\" title=\"打开copilot之后，即可进入使用界面\"></a>打开copilot之后，即可进入使用界面</h3><p>可以使用bing聊天，答疑、写作、绘画等，与使用chatgpt一样的方式；<br>他也可以帮忙打开某个应用程序、更换电脑背景、调整电脑声音、做系统设置等等</p>\n<h3 id=\"场景一：聊天\"><a href=\"#场景一：聊天\" class=\"headerlink\" title=\"场景一：聊天\"></a><font color=\"#ff0000\">场景一：聊天</font></h3><h3 id=\"场景二：画图\"><a href=\"#场景二：画图\" class=\"headerlink\" title=\" 场景二：画图\"></a><font color=\"#ff0000\"> 场景二：画图</font></h3><h3 id=\"可能的问题\"><a href=\"#可能的问题\" class=\"headerlink\" title=\"可能的问题\"></a>可能的问题</h3><p><strong>问题1：提示不在服务区域。</strong><br>原因：因为copilot暂不对中国大陆开放。</p>\n<p>解决方法：edge浏览器，打开newbing页面，设置区域为其他区域，例如“美国”。</p>\n<h3 id=\"问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）\"><a href=\"#问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）\" class=\"headerlink\" title=\"问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）\"></a>问题2：提示当前服务不可用，请刷新使用（频率低，但偶尔会报这个错）</h3><p>解决方法：刷新即可；或者在newbing里，换个区域，再刷新，成功率更高。</p>\n<p>祝成为AI时代的我们。</p>\n"}],"PostAsset":[{"_id":"source/_posts/2021-02-03-量化投资5/ts_stock_basics.png","slug":"ts_stock_basics.png","post":"clqdww77a0003z4ltc36n2wfy","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/butterfly.png","slug":"butterfly.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_new.png","slug":"github_new.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_new_config.png","slug":"github_new_config.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_new_pub.png","slug":"github_new_pub.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_pub_page.png","slug":"github_pub_page.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_setting.png","slug":"github_setting.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_ssh.png","slug":"github_ssh.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_ssh_new.png","slug":"github_ssh_new.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/github_ssh_newdetail.png","slug":"github_ssh_newdetail.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/git_ssh.png","slug":"git_ssh.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/hexo-hello.png","slug":"hexo-hello.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-07-hexo博客基础环境搭建/ssh_suc.png","slug":"ssh_suc.png","post":"clqdww77h000wz4ltdsf93xpi","modified":0,"renderable":0},{"_id":"source/_posts/2021-03-04-个人进化论01/wo.png","slug":"wo.png","post":"clqdww77i000zz4ltcw455lu1","modified":0,"renderable":0},{"_id":"source/_posts/2023-03-08-额尔古纳河右岸读后感/主人公原型.jpg","slug":"主人公原型.jpg","post":"clqdww77j0011z4lterc845em","modified":0,"renderable":0},{"_id":"source/_posts/2023-03-08-额尔古纳河右岸读后感/电影剧照.jpg","slug":"电影剧照.jpg","post":"clqdww77j0011z4lterc845em","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/analyse_pkg_1.png","slug":"analyse_pkg_1.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/analyse_pkg_2.png","slug":"analyse_pkg_2.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/analyse_pkg_3.png","slug":"analyse_pkg_3.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_filters.png","slug":"fiddle_filters.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_info_1.png","slug":"fiddle_info_1.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_info_2.png","slug":"fiddle_info_2.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_raw_1.png","slug":"fiddle_raw_1.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_raw_2.png","slug":"fiddle_raw_2.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_raw_3.png","slug":"fiddle_raw_3.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_raw_4.png","slug":"fiddle_raw_4.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_setup_1.png","slug":"fiddle_setup_1.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/fiddle_setup_2.png","slug":"fiddle_setup_2.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/last_html.png.crdownload","slug":"last_html.png.crdownload","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/last_pdf.png.crdownload","slug":"last_pdf.png.crdownload","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/raw_info.png","slug":"raw_info.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/without_img.png","slug":"without_img.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2022-07-27-python批量下载公众号历史文章（一）/with_img.png","slug":"with_img.png","post":"clqdww77k0012z4lt32151beg","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-01-量化投资4/get_sl_real_url.png","slug":"get_sl_real_url.png","post":"clqdww77l0015z4ltbh3acqhx","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-01-量化投资4/sl_real_url_req.png","slug":"sl_real_url_req.png","post":"clqdww77l0015z4ltbh3acqhx","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-01-量化投资4/sl_real_url_rsp.png","slug":"sl_real_url_rsp.png","post":"clqdww77l0015z4ltbh3acqhx","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-01-量化投资4/stock_info_csv.png","slug":"stock_info_csv.png","post":"clqdww77l0015z4ltbh3acqhx","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-01-量化投资4/stock_info_web.png","slug":"stock_info_web.png","post":"clqdww77l0015z4ltbh3acqhx","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-01-量化投资4/stock_list_csv.png","slug":"stock_list_csv.png","post":"clqdww77l0015z4ltbh3acqhx","modified":0,"renderable":0},{"_id":"source/_posts/2021-02-01-量化投资4/stock_list_web.png","slug":"stock_list_web.png","post":"clqdww77l0015z4ltbh3acqhx","modified":0,"renderable":0},{"_id":"source/_posts/2023-12-02-数据要素相关政策/国家数据局.jpg","slug":"国家数据局.jpg","post":"clqdww77l0016z4lt503hb59x","modified":0,"renderable":0},{"_id":"source/_posts/2023-12-20-win11中安装copilot/win11安装程序.png","slug":"win11安装程序.png","post":"clqdww77m001az4lth425983h","modified":0,"renderable":0},{"_id":"source/_posts/2023-12-20-win11中安装copilot/系统中安装.png","slug":"系统中安装.png","post":"clqdww77m001az4lth425983h","modified":0,"renderable":0},{"_id":"source/_posts/2023-12-20-win11中安装copilot/选择保留内容.png","slug":"选择保留内容.png","post":"clqdww77m001az4lth425983h","modified":0,"renderable":0},{"_id":"source/_posts/2023-12-20-win11中安装copilot/windows自动更新.png","slug":"windows自动更新.png","post":"clqdww77m001az4lth425983h","modified":0,"renderable":0}],"PostCategory":[{"post_id":"clqdww7760001z4ltb1gq7jrv","category_id":"clqdww77d0005z4lte0hxdjb1","_id":"clqdww77f000ez4lt6v2n40t2"},{"post_id":"clqdww7760001z4ltb1gq7jrv","category_id":"clqdww77e000az4lt31m2c1c0","_id":"clqdww77f000gz4ltgs0z15z0"},{"post_id":"clqdww77a0003z4ltc36n2wfy","category_id":"clqdww77d0007z4ltblfrh04z","_id":"clqdww77g000qz4lt0v5t3wq8"},{"post_id":"clqdww77a0003z4ltc36n2wfy","category_id":"clqdww77f000cz4lt6v66c99r","_id":"clqdww77g000rz4ltfrnw0qwd"},{"post_id":"clqdww77a0003z4ltc36n2wfy","category_id":"clqdww77f000fz4ltbfw4b4l3","_id":"clqdww77g000sz4lteapy2hl6"},{"post_id":"clqdww77a0003z4ltc36n2wfy","category_id":"clqdww77f000iz4ltejlr94jz","_id":"clqdww77g000tz4lta8fd5tsg"},{"post_id":"clqdww77a0003z4ltc36n2wfy","category_id":"clqdww77g000nz4lt06968z9h","_id":"clqdww77g000uz4ltgj4p7c8k"},{"post_id":"clqdww77a0003z4ltc36n2wfy","category_id":"clqdww77g000pz4lte0ducpv2","_id":"clqdww77g000vz4ltexizfynd"},{"post_id":"clqdww77h000wz4ltdsf93xpi","category_id":"clqdww77g000nz4lt06968z9h","_id":"clqdww77n001bz4lt90ub5gdg"},{"post_id":"clqdww77h000wz4ltdsf93xpi","category_id":"clqdww77j0010z4lt6fqh7da4","_id":"clqdww77n001dz4ltd4ljc0xe"},{"post_id":"clqdww77l0015z4ltbh3acqhx","category_id":"clqdww77d0007z4ltblfrh04z","_id":"clqdww77o001kz4lt5uup2dk3"},{"post_id":"clqdww77l0015z4ltbh3acqhx","category_id":"clqdww77f000cz4lt6v66c99r","_id":"clqdww77o001nz4lt68fg82k0"},{"post_id":"clqdww77l0015z4ltbh3acqhx","category_id":"clqdww77f000fz4ltbfw4b4l3","_id":"clqdww77o001qz4lteoxhfc2a"},{"post_id":"clqdww77l0015z4ltbh3acqhx","category_id":"clqdww77f000iz4ltejlr94jz","_id":"clqdww77p001tz4lt8ggkaqyv"},{"post_id":"clqdww77l0015z4ltbh3acqhx","category_id":"clqdww77g000nz4lt06968z9h","_id":"clqdww77p001vz4ltb4b8ek34"},{"post_id":"clqdww77l0015z4ltbh3acqhx","category_id":"clqdww77g000pz4lte0ducpv2","_id":"clqdww77p001zz4lte8w23pvv"},{"post_id":"clqdww77i000xz4lthdkn1ao0","category_id":"clqdww77k0014z4ltdtxy5hkz","_id":"clqdww77p0022z4lt9zo643vt"},{"post_id":"clqdww77i000xz4lthdkn1ao0","category_id":"clqdww77o001rz4ltf9k6hbdx","_id":"clqdww77p0023z4ltex5v36js"},{"post_id":"clqdww77i000zz4ltcw455lu1","category_id":"clqdww77m0019z4ltceoq4rou","_id":"clqdww77q0029z4lt4ma36n4d"},{"post_id":"clqdww77i000zz4ltcw455lu1","category_id":"clqdww77p0021z4ltbnv44s2n","_id":"clqdww77q002bz4ltfexk73ip"},{"post_id":"clqdww77j0011z4lterc845em","category_id":"clqdww77n001gz4lt5cbk2u09","_id":"clqdww77r002wz4ltdhyvf93u"},{"post_id":"clqdww77j0011z4lterc845em","category_id":"clqdww77p0025z4ltcwnu3avp","_id":"clqdww77s002xz4ltenj32k6s"},{"post_id":"clqdww77j0011z4lterc845em","category_id":"clqdww77q002gz4lt5e9t6rbx","_id":"clqdww77s002zz4ltbw8sh225"},{"post_id":"clqdww77j0011z4lterc845em","category_id":"clqdww77r002rz4lt31cp05nr","_id":"clqdww77s0030z4lt251bazbd"},{"post_id":"clqdww77l0016z4lt503hb59x","category_id":"clqdww77p001xz4lt7xeq5tk0","_id":"clqdww77s0033z4ltae3y7vuu"},{"post_id":"clqdww77l0016z4lt503hb59x","category_id":"clqdww77q002dz4lt2nkvh35h","_id":"clqdww77s0034z4lteq0r383z"},{"post_id":"clqdww77l0016z4lt503hb59x","category_id":"clqdww77r002oz4ltcr2b80w1","_id":"clqdww77s0035z4lt8cq7hega"},{"post_id":"clqdww77l0016z4lt503hb59x","category_id":"clqdww77r002vz4ltbbhve5ue","_id":"clqdww77s0036z4ltaxb8hm4n"},{"post_id":"clqdww77l0016z4lt503hb59x","category_id":"clqdww77s0031z4lthrwd46j5","_id":"clqdww77s0037z4lt8ysngzek"},{"post_id":"clqdww77k0012z4lt32151beg","category_id":"clqdww77o001lz4ltejcq0d8c","_id":"clqdww77s0038z4lt5yxz08mw"},{"post_id":"clqdww77k0012z4lt32151beg","category_id":"clqdww77q0027z4lt17vm1foy","_id":"clqdww77s0039z4ltce7w9rl1"},{"post_id":"clqdww77k0012z4lt32151beg","category_id":"clqdww77r002kz4ltb81ufbc4","_id":"clqdww77s003az4ltdw9tfuis"},{"post_id":"clqdww77k0012z4lt32151beg","category_id":"clqdww77r002uz4lth9wi3jdb","_id":"clqdww77s003bz4ltfipb0ky5"},{"post_id":"clqdww77k0012z4lt32151beg","category_id":"clqdww77s002yz4lt7a4z964p","_id":"clqdww77s003cz4ltd51lgf28"},{"post_id":"clqdww77k0012z4lt32151beg","category_id":"clqdww77s0032z4lt7753ckbz","_id":"clqdww77s003dz4lt863rgtvg"},{"post_id":"clqdww77m001az4lth425983h","category_id":"clqdww77r002vz4ltbbhve5ue","_id":"clqdx8i870001mklte69f5hpw"},{"post_id":"clqdww77m001az4lth425983h","category_id":"clqdww77s0031z4lthrwd46j5","_id":"clqdx8i870002mklt6pkzhvjo"},{"post_id":"clqdww77m001az4lth425983h","category_id":"clqdx8i860000mkltbh0fawc0","_id":"clqdx8i870003mkltgo4mde4a"}],"PostTag":[{"post_id":"clqdww7760001z4ltb1gq7jrv","tag_id":"clqdww77c0004z4lt9rnc01jl","_id":"clqdww77e0008z4ltbuqdcf6h"},{"post_id":"clqdww77a0003z4ltc36n2wfy","tag_id":"clqdww77d0006z4lt07kggkej","_id":"clqdww77g000jz4lta9mr8hti"},{"post_id":"clqdww77a0003z4ltc36n2wfy","tag_id":"clqdww77e0009z4ltbs9g4r51","_id":"clqdww77g000kz4ltajyt6wsd"},{"post_id":"clqdww77a0003z4ltc36n2wfy","tag_id":"clqdww77e000bz4lt4oshcatv","_id":"clqdww77g000lz4lt7htyfwkg"},{"post_id":"clqdww77a0003z4ltc36n2wfy","tag_id":"clqdww77f000dz4lt5ghf0ad4","_id":"clqdww77g000mz4lth1qredoq"},{"post_id":"clqdww77a0003z4ltc36n2wfy","tag_id":"clqdww77f000hz4lt2r4l5eeq","_id":"clqdww77g000oz4ltbiis1o0l"},{"post_id":"clqdww77l0015z4ltbh3acqhx","tag_id":"clqdww77d0006z4lt07kggkej","_id":"clqdww77m0018z4lt4a8bb01u"},{"post_id":"clqdww77l0015z4ltbh3acqhx","tag_id":"clqdww77e0009z4ltbs9g4r51","_id":"clqdww77n001cz4lt03j2bufe"},{"post_id":"clqdww77l0015z4ltbh3acqhx","tag_id":"clqdww77e000bz4lt4oshcatv","_id":"clqdww77n001fz4ltdzbh9ahg"},{"post_id":"clqdww77l0015z4ltbh3acqhx","tag_id":"clqdww77f000dz4lt5ghf0ad4","_id":"clqdww77o001hz4lt2xjdb2fz"},{"post_id":"clqdww77h000wz4ltdsf93xpi","tag_id":"clqdww77i000yz4ltcwwa5exu","_id":"clqdww77o001iz4ltc5o90pwf"},{"post_id":"clqdww77h000wz4ltdsf93xpi","tag_id":"clqdww77k0013z4lt1tkn5txy","_id":"clqdww77o001mz4ltbj6tgjey"},{"post_id":"clqdww77h000wz4ltdsf93xpi","tag_id":"clqdww77m0017z4lt99q9aqvu","_id":"clqdww77o001oz4lte1ezb5pg"},{"post_id":"clqdww77i000xz4lthdkn1ao0","tag_id":"clqdww77n001ez4lt2ga5hd63","_id":"clqdww77p001sz4lt12vkc1pa"},{"post_id":"clqdww77i000xz4lthdkn1ao0","tag_id":"clqdww77o001jz4lt7uv5gh4q","_id":"clqdww77p001uz4lt73dobfsf"},{"post_id":"clqdww77i000zz4ltcw455lu1","tag_id":"clqdww77o001pz4ltgf57aw16","_id":"clqdww77p001yz4lt96f7df22"},{"post_id":"clqdww77j0011z4lterc845em","tag_id":"clqdww77p001wz4ltaxia5r66","_id":"clqdww77q0028z4ltaju656dy"},{"post_id":"clqdww77j0011z4lterc845em","tag_id":"clqdww77p0020z4ltb7eo41u2","_id":"clqdww77q002az4lt7w5w8oe6"},{"post_id":"clqdww77j0011z4lterc845em","tag_id":"clqdww77p0024z4lteqwxflxa","_id":"clqdww77q002ez4lt52b53jly"},{"post_id":"clqdww77k0012z4lt32151beg","tag_id":"clqdww77q0026z4lt800j39nu","_id":"clqdww77q002hz4lt16wb6y2d"},{"post_id":"clqdww77k0012z4lt32151beg","tag_id":"clqdww77q002cz4lt5xtmdnn5","_id":"clqdww77q002iz4lt0go3ct6f"},{"post_id":"clqdww77k0012z4lt32151beg","tag_id":"clqdww77e000bz4lt4oshcatv","_id":"clqdww77r002lz4lt3p0n965g"},{"post_id":"clqdww77k0012z4lt32151beg","tag_id":"clqdww77f000dz4lt5ghf0ad4","_id":"clqdww77r002mz4ltabla1ttc"},{"post_id":"clqdww77l0016z4lt503hb59x","tag_id":"clqdww77q002fz4ltgxhd6qlu","_id":"clqdww77r002pz4lt6t611io8"},{"post_id":"clqdww77l0016z4lt503hb59x","tag_id":"clqdww77q002jz4lt6ihy0qqg","_id":"clqdww77r002qz4lt8kp3h8ml"},{"post_id":"clqdww77m001az4lth425983h","tag_id":"clqdww77e000bz4lt4oshcatv","_id":"clqdww77r002sz4lt27h2d7gg"},{"post_id":"clqdww77m001az4lth425983h","tag_id":"clqdww77r002nz4ltfjqx31b7","_id":"clqdww77r002tz4ltcij18eui"}],"Tag":[{"name":"资治通鉴","_id":"clqdww77c0004z4lt9rnc01jl"},{"name":"量化投资","_id":"clqdww77d0006z4lt07kggkej"},{"name":"数据获取","_id":"clqdww77e0009z4ltbs9g4r51"},{"name":"技术","_id":"clqdww77e000bz4lt4oshcatv"},{"name":"python","_id":"clqdww77f000dz4lt5ghf0ad4"},{"name":"mysql","_id":"clqdww77f000hz4lt2r4l5eeq"},{"name":"hexo","_id":"clqdww77i000yz4ltcwwa5exu"},{"name":"github","_id":"clqdww77k0013z4lt1tkn5txy"},{"name":"博客","_id":"clqdww77m0017z4lt99q9aqvu"},{"name":"工程清单","_id":"clqdww77n001ez4lt2ga5hd63"},{"name":"目录","_id":"clqdww77o001jz4lt7uv5gh4q"},{"name":"听陈海贤自我进化课","_id":"clqdww77o001pz4ltgf57aw16"},{"name":"读后感","_id":"clqdww77p001wz4ltaxia5r66"},{"name":"文学","_id":"clqdww77p0020z4ltb7eo41u2"},{"name":"矛盾文学奖","_id":"clqdww77p0024z4lteqwxflxa"},{"name":"爬虫","_id":"clqdww77q0026z4lt800j39nu"},{"name":"公众号","_id":"clqdww77q002cz4lt5xtmdnn5"},{"name":"数据要素","_id":"clqdww77q002fz4ltgxhd6qlu"},{"name":"数字经济","_id":"clqdww77q002jz4lt6ihy0qqg"},{"name":"教程","_id":"clqdww77r002nz4ltfjqx31b7"}]}}